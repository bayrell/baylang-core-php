"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.rtl=class{static LOG_FATAL=0;static LOG_CRITICAL=2;static LOG_ERROR=4;static LOG_WARNING=6;static LOG_INFO=8;static LOG_DEBUG=10;static LOG_DEBUG2=12;static STATUS_PLAN=0;static STATUS_DONE=1;static STATUS_PROCESS=100;static STATUS_FAIL=-1;static ERROR_NULL=0;static ERROR_OK=1;static ERROR_PROCCESS=100;static ERROR_FALSE=-100;static ERROR_RUNTIME=-1;static ERROR_UNKNOWN=-1;static ERROR_INDEX_OUT_OF_RANGE=-2;static ERROR_STOP_ITERATION=-3;static ERROR_ITEM_NOT_FOUND=-5;static ERROR_OBJECT_ALLREADY_EXISTS=-6;static ERROR_ASSERT=-7;static ERROR_REQUEST=-8;static ERROR_RESPONSE=-9;static ERROR_CSRF_TOKEN=-10;static ERROR_VALIDATION=-12;static ERROR_SERIALIZATION=-14;static ERROR_ASSIGN=-15;static ERROR_AUTH=-16;static ERROR_DUPLICATE=-17;static ERROR_API_NOT_FOUND=-18;static ERROR_API_WRONG_FORMAT=-19;static ERROR_API_WRONG_APP_NAME=-20;static ERROR_API=-21;static ERROR_CURL=-22;static ERROR_FATAL=-99;static ERROR_HTTP_CONTINUE=-100;static ERROR_HTTP_SWITCH=-101;static ERROR_HTTP_PROCESSING=-102;static ERROR_HTTP_OK=-200;static ERROR_HTTP_BAD_GATEWAY=-502;static ERROR_USER=-1e4;static ALLOW_OBJECTS=1;static JSON_PRETTY=8;static defClass(obj){if(Runtime.rtl._classes==undefined)Runtime.rtl._classes={};Runtime.rtl._classes[obj.getClassName()]=obj}static findClass(class_name){if(typeof class_name=="string"){class_name=typeof window!="undefined"?window[class_name]:use(class_name)}else if(class_name&&!(class_name instanceof Function)){class_name=class_name.constructor}if(class_name==undefined||class_name==null)return null;return class_name}static className(class_name){if(this.isString(class_name))return class_name;var obj=this.findClass(class_name);return obj&&obj.getClassName?obj.getClassName():""}static parentClassName(class_name){var obj=this.findClass(class_name);if(obj&&obj.extends&&obj.extends.name)return obj.extends.name;var parentObj=obj?Object.getPrototypeOf(obj):null;return parentObj&&parentObj.getClassName?parentObj.getClassName():""}static getParents(class_name,last_name){if(last_name==undefined)last_name="";let result=Runtime.Vector.create([]);let parent_class_name=class_name;while(parent_class_name!=""&&parent_class_name!=last_name){result.push(parent_class_name);parent_class_name=this.parentClassName(parent_class_name)}return result}static isInstanceOf(obj,class_name){if(obj==null)return false;obj=this.className(obj);if(!this.isString(obj))return false;let parent_class_name=obj;while(parent_class_name!=""){if(parent_class_name==class_name)return true;parent_class_name=this.parentClassName(parent_class_name)}}static isImplements(obj,interface_name){if(obj==null)return false;obj=this.findClass(obj);if(!obj)return false;while(obj!=null){if(obj.getInterfaces&&obj.getInterfaces().indexOf(interface_name)>=0)return true;obj=this.findClass(this.parentClassName(obj))}}static classExists(class_name){let obj=this.findClass(class_name);return obj!=null}static methodExists(class_name,method_name){if(typeof class_name=="object"){if(class_name[method_name]!=undefined)return true;return false}var obj=this.findClass(class_name);if(!this.exists(obj))return false;if(this.exists(obj[method_name]))return true;return false}static newInstance(class_name,args){if(args==undefined)args=null;var obj=this.findClass(class_name);if(!this.exists(obj)||!(obj instanceof Function)){throw new Runtime.Exceptions.ItemNotFound(class_name,"class name")}if(args==undefined||args==null){args=[]}args=args.slice();args.unshift(null);var f=Function.prototype.bind.apply(obj,args);return new f}static apply(f,args){if(f instanceof Runtime.Method)return f.apply(args);if(!args)args=[];return f.apply(null,args)}static assert(value,message){if(!value)throw new Runtime.Exceptions.AssertException(message)}static attr(item,name,def_val){if(def_val==undefined)def_val=null;return item[name]||def_val}static setAttr(item,name,value){item[name]=value}static exists(value){return value!=null&&value!=undefined}static getType(value){if(value===null)return"null";if(this.isString(value))return"string";if(this.isInteger(value))return"integer";if(this.isFloat(value))return"float";if(this.isBoolean(value))return"boolean";if(value instanceof Runtime.Vector)return"vector";if(value instanceof Runtime.Map)return"map";return"object"}static isBoolean(value){return value===true||value===false}static isInteger(value){if(typeof value=="number")return true;return false}static isFloat(value){if(typeof value=="number")return true;return false}static isString(value){if(typeof value=="string")return true;else if(value instanceof String)return true;return false}static isObject(value){return value instanceof use("Runtime.BaseObject")}static isCollection(value){return Array.isArray(value)}static isMap(value){return value instanceof Map}static isFunction(value){return value instanceof Function}static translate(s,params){return Runtime.rtl.getContext().translate(s,params)}static compare(f,order){if(f==undefined)f=null;if(order==undefined)order="asc";return(a,b)=>{if(f){a=f(a);b=f(b)}if(a==b)return 0;if(order=="asc")return a<b?-1:1;return a>b?-1:1}}static list(generator){const Vector=this.findClass("Runtime.Vector");return new Vector(...generator);return generator}static toInt(s){return Number(s)}static toStr(value){var StringInterface=use("Runtime.StringInterface");if(value===null)return"";if(typeof value=="string")return value;if(typeof value=="number")return""+value;if(value instanceof String)return""+value;if(typeof value=="object"&&this.isImplements(value,StringInterface))return value.toString();return""+value}static toNative(obj){const RuntimeMap=this.findClass("Runtime.Map");const RuntimeVector=this.findClass("Runtime.Vector");if(obj instanceof RuntimeVector){return obj.map(value=>{return this.toNative(value)})}else if(obj instanceof RuntimeMap){return obj.map(value=>{return this.toNative(value)}).toObject()}return obj}static fromNative(obj){if(obj===null||obj===undefined){return null}if(Array.isArray(obj)){const RuntimeVector=this.findClass("Runtime.Vector");return RuntimeVector.create(obj.map(item=>this.fromNative(item)))}if(typeof obj=="object"){const RuntimeMap=this.findClass("Runtime.Map");return RuntimeMap.create(obj).map(item=>this.fromNative(item))}return obj}static assign(obj,data,errors){if(errors==undefined)errors=Runtime.Vector.create([]);let rules=new Runtime.Serializer.ObjectType;return rules.filter(data,errors,obj)}static serialize(obj){let rules=new Runtime.Serializer.ObjectType;return rules.encode(obj)}static jsonDecode(obj){try{const RuntimeVector=this.findClass("Runtime.Vector");const RuntimeMap=this.findClass("Runtime.Map");obj=JSON.parse(obj,(key,value)=>{if(value===null)return null;if(Array.isArray(value))return RuntimeVector.create(value);if(typeof value=="object")return RuntimeMap.create(value);return value})}catch(e){}return obj}static jsonEncode(obj,flags){if(flags==undefined)flags=0;return JSON.stringify(obj)}static copy(obj){let data=this.serialize(obj);let item=this.newInstance(obj.constructor.getClassName());this.assign(item,data);return item}static print(message,new_line,type){if(new_line==undefined)new_line=true;if(type==undefined)type="";let output=Runtime.rtl.getContext().provider("output");output.print(message,new_line,type)}static error(message){let output=Runtime.rtl.getContext().provider("output");output.error(message)}static color(color,message){let output=Runtime.rtl.getContext().provider("output");return output.color(color,message)}static log(type,message){let p=Runtime.rtl.getContext().provider("log");p.log(type,message)}static input(){let input=Runtime.rtl.getContext().provider("input");return input.input()}static abs(value){return Math.abs(value)}static max(a,b){return a>b?a:b}static min(a,b){return a<b?a:b}static ceil(value){return Math.ceil(value)}static floor(value){return Math.floor(value)}static round(value){return Math.round(value)}static urandom(){if(window!=undefined&&window.crypto!=undefined&&window.crypto.getRandomValues!=undefined){var s=new Uint32Array(1);window.crypto.getRandomValues(s);return s[0]/4294967296}return Math.random()}static random(a,b){return this.round(this.urandom()*(b-a)+a)}static _global_context=null;static getContext(){if(!Runtime.rtl._global_context)return null;return Runtime.rtl._global_context}static setContext(context){this._global_context=context;window["global_context"]=context}static async createContext(params){let context=new Runtime.Context(Runtime.Context.initParams(params));this.setContext(context);await context.init(params);return context}static async createApp(app,modules){let params=Runtime.Map.create({providers:Runtime.Vector.create([new Runtime.Entity.Provider("app",app)]),modules:modules});let context=await this.createContext(params);await context.start();return context}static async runApp(app,modules){try{let context=await this.createApp(app,modules);let provider=context.provider("app");return await provider.main()}catch(e){console.log("[0;31m"+e.stack+"[0m\n")}}static async mount(app_data,element,callback){if(callback==undefined)callback=null;app_data=this.fromNative(app_data);let environments=app_data.get("environments");let modules=app_data.get("modules");let context=await this.createContext(Runtime.Map.create({environments:environments,modules:modules}));await context.start();let render=context.factory("render");let result=render.mount(app_data,element);if(callback){callback(result)}}static render(vdom){return Runtime.rtl.getContext().provider("render").render(vdom)}static async wait(timeout){return new Promise((resolve,reject)=>{setTimeout(()=>{resolve()},timeout)})}_init(){}static getClassName(){return"Runtime.rtl"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.rtl"]=Runtime.rtl;window["use"]=Runtime.rtl.findClass;"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.re=class{static split(delimiter,s,limit){if(limit==undefined)limit=-1;var _rtl=use("Runtime.rtl");var arr=null;var delimiter=new RegExp(delimiter,"g");if(!_rtl.exists(limit)){arr=s.split(delimiter)}else{arr=s.split(delimiter,limit)}return arr}static match(r,s,pattern){if(pattern==undefined)pattern="";pattern="g"+pattern;return s.match(new RegExp(r,pattern))!=null}static matchAll(r,s,pattern){if(pattern==undefined)pattern="";const Vector=use("Runtime.Vector");pattern="g"+pattern;var arr=new Vector;var r=new RegExp(r,pattern);if(s.matchAll==undefined){while((m=r.exec(s))!==null){arr.push(m)}}else arr=Vector.create(s.matchAll(r));if(arr.length==0)return null;return arr.map(v=>Vector.create(v));return null}static replace(r,replace,s,pattern){if(pattern==undefined)pattern="";pattern="g"+pattern;return s.replace(new RegExp(r,pattern),replace)}_init(){}static getClassName(){return"Runtime.re"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.re"]=Runtime.re;"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.rs=class{static strlen(s){return use("Runtime.rtl").toStr(s).length}static substr(s,start,length){if(length==undefined)length=null;var _rtl=use("Runtime.rtl");if(start<0)start=s.length+start;if(length===null){return _rtl.toStr(s).substring(start)}var end=start+length;if(length<0){var sz=this.strlen(s);end=sz+length}return _rtl.toStr(s).substring(start,end)}static charAt(s,pos){return this.substr(s,pos,1)}static chr(code){return String.fromCharCode(code)}static ord(ch){return use("Runtime.rtl").toStr(ch).charCodeAt(0)}static lower(s){return use("Runtime.rtl").toStr(s).toLowerCase()}static upper(s){return use("Runtime.rtl").toStr(s).toUpperCase()}static compare(a,b){if(a==b)return 0;if(a<b)return-1;if(a>b)return 1}static replace(search,item,s){return s.replaceAll(search,item)}static str_repeat(s,n){if(n<=0)return"";var res="";for(var i=0;i<n;i++){res+=s}return res}static split(delimiter,s,limit){if(limit==undefined)limit=-1;const rtl=use("Runtime.rtl");const RuntimeVector=use("Runtime.Vector");var arr=null;if(!rtl.exists(limit))arr=s.split(delimiter);arr=s.split(delimiter,limit);return RuntimeVector.create(arr)}static splitArr(delimiters,s,limit){if(limit==undefined)limit=-1;const rtl=use("Runtime.rtl");const RuntimeVector=use("Runtime.Vector");var arr=null;var delimiter=new RegExp("["+delimiters.join("")+"]","g");if(!rtl.exists(limit)){arr=s.split(delimiter)}else{arr=s.split(delimiter,limit)}return RuntimeVector.create(arr)}static join(ch,arr){if(arr==null)return"";return Array.prototype.join.call(arr,ch)}static join_path(arr){let path=this.join("/",arr);path=Runtime.re.replace("\\/+","/",path);path=Runtime.re.replace("\\/\\.\\/","/",path);path=Runtime.re.replace("\\/+$","",path);return path}static trim(s,ch){if(ch==undefined)ch="";if(ch==undefined)ch="";s=use("Runtime.rtl").toStr(s);if(ch==""){return s.trim()}return s.replace(new RegExp("^["+ch+"]+","g"),"").replace(new RegExp("["+ch+"]+$","g"),"")}static removeFirstSlash(path){let i=0;let sz=this.strlen(path);while(i<sz&&this.substr(path,i,1)=="/")i++;return this.substr(path,i)}static removeLastSlash(path){let i=this.strlen(path)-1;while(i>=0&&this.substr(path,i,1)=="/")i--;return this.substr(path,0,i+1)}static addFirstSlash(path){if(Runtime.rs.substr(path,0,1)=="/")return path;return"/"+String(path)}static addLastSlash(path){if(Runtime.rs.substr(path,Runtime.rs.strlen(path)-1,1)=="/")return path;return path+String("/")}static pathinfo(filepath){let arr1=this.split(".",filepath);let arr2=this.split("/",filepath);let extension=arr1.pop();let basename=arr2.pop();let dirname=this.join("/",arr2);let ext_length=this.strlen(extension);if(ext_length>0)ext_length++;let filename=this.substr(basename,0,-1*ext_length);return Runtime.Map.create({filepath:filepath,extension:extension,basename:basename,dirname:dirname,filename:filename})}static filename(filepath){let ret=this.pathinfo(filepath);let res=ret.get("basename");let ext=ret.get("extension");if(ext!=""){let sz=0-Runtime.rs.strlen(ext)-1;res=Runtime.rs.substr(res,0,sz)}return res}static basename(filepath){let ret=this.pathinfo(filepath);let res=ret.get("basename");return res}static extname(filepath){let ret=this.pathinfo(filepath);let res=ret.get("extension");return res}static dirname(filepath){let ret=this.pathinfo(filepath);let res=ret.get("dirname");return res}static nl2br(s){return this.replace("\n","<br/>",s)}static spaceless(s){s=Runtime.re.replace(" +"," ",s);s=Runtime.re.replace("\t","",s);s=Runtime.re.replace("\n","",s);return s}static indexOf(s,search,offset){if(offset==undefined)offset=0;var _rtl=use("Runtime.rtl");if(!_rtl.exists(offset))offset=0;var res=_rtl.toStr(s).indexOf(search);return res}static url_encode(s){return encodeURIComponent(s)}static htmlDecode(s){let count_spaces=0;while(count_spaces<s.length&&s.charAt(count_spaces)==" ")count_spaces++;const parser=new DOMParser;const doc=parser.parseFromString(s.substr(count_spaces),"text/html");return this.str_repeat(" ",count_spaces)+doc.body.textContent}static decodeHtml(s){return this.htmlDecode(s)}static htmlEscape(s){if(s==null)return"";var obj={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#39;","`":"&#x60;","=":"&#x3D;"};return new String(s).replace(/[<>&"'`=]/g,function(v){return obj[v]})}static escapeHtml(s){return this.htmlEscape(s)}static base64_encode(s){return window.btoa(window.unescape(window.encodeURIComponent(s)))}static base64_decode(s){return window.decodeURIComponent(window.escape(window.atob(s)))}static base64_encode_url(s){s=this.base64_encode(s).replace(new RegExp("\\+","g"),"-").replace(new RegExp("\\/","g"),"_").replace(new RegExp("=","g"),"");return s}static base64_decode_url(s){var c=4-s.length%4;if(c<4&&c>0)s=s+"=".repeat(c);s=s.replace(new RegExp("-","g"),"+").replace(new RegExp("_","g"),"/");return this.base64_decode(s)}static parse_url(s){let pos;let uri,query,hash;pos=this.indexOf(s,"#");s=pos>=0?this.substr(s,0,pos):s;hash=pos>=0?this.substr(s,pos+1):"";pos=this.indexOf(s,"?");uri=pos>=0?this.substr(s,0,pos):s;query=pos>=0?this.substr(s,pos+1):"";let arr=this.split("&",query);let arr2=arr.filter(s=>{return s!=""}).transition(item=>{let arr=this.split("=",item);return Runtime.Vector.create([arr[1],arr[0]])});return Runtime.Map.create({uri:uri,query:query,query_arr:arr2,hash:hash})}static url_get_add(s,key,value){let r=this.parse_url(s);let s1=r.get("uri");let s2=r.get("query");let find=false;let arr=this.split("&",s2);arr=arr.map(s=>{let arr=this.split("=",s);if(arr[0]==key){find=true;if(key!=""&&value!=""){return key+String("=")+String(this.htmlEscape(value))}return""}return s}).filter(s=>{return s!=""});if(!find&&value!=""){arr.push(key+String("=")+String(this.htmlEscape(value)))}s=s1;s2=this.join("&",arr);if(s2!="")s=s+String("?")+String(s2);return s}static urlGetAdd(s,params){let keys=Runtime.rtl.list(params.keys());for(let i=0;i<keys.count();i++){let key=keys.get(i);let value=params.get(key);if(!value)continue;s=this.url_get_add(s,key,value)}return s}static strip_tags(content,allowed_tags){if(allowed_tags==undefined)allowed_tags=null;if(allowed_tags==null){content=Runtime.re.replace("<[^>]+>","",content);content=Runtime.rs.trim(Runtime.rs.spaceless(content));return content}let matches=Runtime.re.matchAll("<[^>]+>",content,"i");if(matches){for(let i=0;i<matches.count();i++){let match=matches[i];let tag_str=match[0];let tag_match=Runtime.re.matchAll("<(\\/|)([a-zA-Z]+)(|[^>]*)>",tag_str,"i");if(tag_match){let tag_name=this.lower(tag_match[0][2]);if(allowed_tags.indexOf(tag_name)==-1){content=this.replace(tag_str,"",content)}}}}content=Runtime.rs.trim(Runtime.rs.spaceless(content));return content}static uid(){}static time_uid(){}static className(arr){return Runtime.rs.join(" ",arr.map(s=>{return this.trim(s)}).filter(s=>{return s!=""}))}static mergeStyles(class_name,items){return Runtime.rs.join(" ",items.map(s=>{return this.trim(s)}).filter(s=>{return s!=""}).map(item=>{return class_name+String("--")+String(item)}))}static hash(s,x,p){if(x==undefined)x=257;if(p==undefined)p=1000000007;let h=0;let sz=Runtime.rs.strlen(s);for(let i=0;i<sz;i++){let ch=Runtime.rs.ord(Runtime.rs.charAt(s,i,1));h=(h*x+ch)%p}return h}static getCssHash(class_name){let h=Runtime.rs.hash(class_name,337,65537)+65537;let res=Runtime.rs.toHex(h*337%65537);return Runtime.rs.substr(res,-4)}static getComponentHash(class_name){if(!Runtime.rtl.isString(class_name))class_name=Runtime.rtl.className(class_name);let global_hash=Runtime.rtl.getContext().provider("hash");let component_hash=global_hash.get("component_hash");if(!component_hash){component_hash=new Runtime.Map;global_hash.set("component_hash",component_hash)}if(component_hash.has(class_name))return component_hash.get(class_name);let result=Runtime.Vector.create([]);let item_name=class_name;while(item_name!=""&&item_name!="Runtime.Component"){result.push("h-"+String(this.getCssHash(item_name)));item_name=Runtime.rtl.parentClassName(item_name)}let value=Runtime.rs.join(" ",result);component_hash.set(class_name,value);return value}static toHex(h){let r="";let a="0123456789abcdef";while(h>=0){let c=h&15;h=h>>4;r=Runtime.rs.charAt(a,c)+String(r);if(h==0)break}return r}static hexdec(s){return parseInt(s,16)}static random_string(len,spec){if(len==undefined)len=8;if(spec==undefined)spec="aun";let s="";let res="";let sz=Runtime.rs.strlen(spec);for(let i=0;i<sz;i++){let ch=spec[i];if(ch=="a"){s+="qwertyuiopasdfghjklzxcvbnm"}if(ch=="u"){s+="QWERTYUIOPASDFGHJKLZXCVBNM"}else if(ch=="n"){s+="0123456789"}else if(ch=="s"){s+="!@#$%^&*()-_+='\":;'.,<>?/|~"}}let sz_s=Runtime.rs.strlen(s);for(let i=0;i<len;i++){let code=Runtime.rtl.random(0,sz_s-1);res+=s[code]}return res}static format(s,params){if(params==undefined)params=null;if(params==null)return s;params.each((value,key)=>{s=Runtime.rs.replace("%"+String(key)+String("%"),value,s)});return s}_init(){}static getClassName(){return"Runtime.rs"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.rs"]=Runtime.rs;"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.BaseObject=class{constructor(){this._init()}static newInstance(args){return Runtime.rtl.newInstance(this.getClassName(),args)}_init(){}static serialize(rules){rules.setClassName(this.getClassName())}_assign_values(changes){if(changes==undefined)changes=null;if(changes instanceof Map){for(var key of changes.keys()){var value=changes.get(key);this[key]=value}}}_init(){}static getClassName(){return"Runtime.BaseObject"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.BaseObject"]=Runtime.BaseObject;"use strict;";if(typeof Runtime=="undefined")Runtime={};"use strict;";if(typeof Runtime=="undefined")Runtime={};"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.HashMap=class{constructor(){this._map=new Map}set(key,value){this._map.set(key,value);return this}get(key){return this._map.get(key);return this}has(key){return this._map.has(key)}remove(key){this._map.delete(key);return this}_init(){}static getClassName(){return"Runtime.HashMap"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.HashMap"]=Runtime.HashMap;"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.Map=class extends Map{constructor(obj=null){super(obj?Object.entries(obj):null)}copy(){return new Runtime.Map(this.toObject())}toObject(){return Object.fromEntries(this)}concat(map){var obj=this.toObject();return new Runtime.Map(Object.assign(obj,map.toObject()))}get(key,default_value){if(default_value==undefined)default_value=null;var value=super.get(key);return value!=undefined?value:default_value}map(f){var map=new Runtime.Map;for(var key of this.keys()){map.set(key,f(this.get(key),key,this))}return map}mapWithKeys(f){var map=new Runtime.Map;for(var key of this.keys()){var item=f(this.get(key),key,this);map.set(item[1],item[0])}return map}reduce(f,result){for(var key of this.keys()){result=f(result,this.get(key),key,this)}return result}filter(f){var map=new Runtime.Map;for(var key of this.keys()){var value=this.get(key);var flag=f(value,key,this);if(flag)map.set(key,value)}return map}each(f){for(var key of this.keys()){var value=this.get(key);f(value,key,this)}}transition(f){const Vector=use("Runtime.Vector");var arr=new Vector;for(var key of this.keys()){var value=this.get(key);arr.push(f(value,key,this))}return arr}intersect(fields){const h=fields.transition((value,key)=>[key,value]);return this.filter((value,key)=>h.has(key))}static create(obj){return new Runtime.Map(obj)}static from(obj){return new Runtime.Map(obj)}static getNamespace(){return"Runtime"}static getClassName(){return"Runtime.Map"}};window["Runtime.Map"]=Runtime.Map;"use strict;";if(typeof Runtime=="undefined")Runtime={};"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.Vector=class extends Array{get(pos,defaultValue=null){return pos>=0&&pos<this.length?this[pos]:defaultValue}set(pos,value){if(pos>=0&&pos<this.length){this[pos]=value}}insert(pos,value){this.splice(pos,0,value)}remove(pos){this.splice(pos,1)}removeItem(item){let pos=this.findIndex(elem=>{return elem==item});if(pos>=0)this.remove(pos)}flatten(){var res=[];for(var i=0;i<this.length;i++){if(Array.isArray(this[i]))res=res.concat(this[i].flatten());else res.push(this[i])}return res}find(f){var index=this.findIndex(f);if(index==-1)return null;return this[index]}first(value){return this.length>0?this[0]:value?value:null}last(value){return this.length>0?this[this.length-1]:value?value:null}each(f){super.forEach(f)}transition(f){const RuntimeMap=use("Runtime.Map");const map=new RuntimeMap;for(let i=0;i<this.length;i++){let res=null;if(f)res=f(this[i],i,this);else res=[this[i],i];map.set(res[1],res[0])}return map}appendItems(arr){for(var item of arr)this.push(item)}count(){return this.length}removeDuplicates(){var res=new Runtime.Vector;for(var i=0;i<this.length;i++){var p=res.indexOf(this[i]);if(p==-1){res.push(this[i])}}return res}static create(arr){if(arr.length==1){let value=new Runtime.Vector;value.push(arr[0]);return value}return new Runtime.Vector(...arr)}static from(arr){return this.create(arr)}static getNamespace(){return"Runtime"}static getClassName(){return"Runtime.Vector"}};window["Runtime.Vector"]=Runtime.Vector;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Exceptions=="undefined")Runtime.Exceptions={};if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Exceptions=="undefined")Runtime.Exceptions={};Runtime.Exceptions.ClassException=function(message,code,prev){Error.call(this);Error.captureStackTrace(this,this.constructor);this.message=message;this.code=code;this.prev=prev};Runtime.Exceptions.ClassException.prototype=Object.create(Error.prototype);Runtime.Exceptions.ClassException.prototype.constructor=Runtime.Exceptions.ClassException;Object.assign(Runtime.Exceptions.ClassException.prototype,{_init:function(){}});Object.assign(Runtime.Exceptions.ClassException,{getNamespace:function(){return"Runtime.Exceptions"},getClassName:function(){return"Runtime.Exceptions.ClassException"},getParentClassName:function(){return""}});Runtime.Exceptions.RuntimeException=class extends Runtime.Exceptions.ClassException{constructor(message,code,prev){if(message==undefined)message="";if(code==undefined)code=-1;if(prev==undefined)prev=null;super(message,code,prev);this._init();this.error_message=message;this.error_code=code;this.prev=prev}getPreviousException(){return this.prev}buildErrorMessage(){return this.error_message}getErrorMessage(){return this.error_message}getErrorCode(){return this.error_code}getFileName(){return this.error_file}getErrorLine(){return this.error_line}getErrorPos(){return this.error_pos}toString(){return this.buildErrorMessage()}getTraceStr(){}getTraceCollection(){}_init(){super._init();this.prev=null;this.error_message="";this.error_code=0;this.error_file="";this.error_line="";this.error_pos=""}static getClassName(){return"Runtime.Exceptions.RuntimeException"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Exceptions.RuntimeException"]=Runtime.Exceptions.RuntimeException;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Exceptions=="undefined")Runtime.Exceptions={};Runtime.Exceptions.ApiError=class extends Runtime.Exceptions.RuntimeException{constructor(prev){if(prev==undefined)prev=null;super(prev.getErrorMessage(),Runtime.rtl.ERROR_API,prev instanceof Runtime.Exceptions.RuntimeException?prev:null);if(prev instanceof Runtime.ApiResult)this.result=prev}getErrorMessage(){return this.prev.getErrorMessage()}getErrorCode(){return this.prev.getErrorCode()}getFileName(){return this.prev.getFileName()}getErrorLine(){return this.prev.getErrorLine()}getErrorPos(){return this.prev.getErrorPos()}_init(){super._init();this.result=null}static getClassName(){return"Runtime.Exceptions.ApiError"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Exceptions.ApiError"]=Runtime.Exceptions.ApiError;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Exceptions=="undefined")Runtime.Exceptions={};Runtime.Exceptions.AssertException=class extends Runtime.Exceptions.RuntimeException{constructor(message,prev){if(prev==undefined)prev=null;super(message,Runtime.rtl.ERROR_ASSERT,prev)}_init(){super._init()}static getClassName(){return"Runtime.Exceptions.AssertException"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Exceptions.AssertException"]=Runtime.Exceptions.AssertException;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Exceptions=="undefined")Runtime.Exceptions={};Runtime.Exceptions.CurlException=class extends Runtime.Exceptions.RuntimeException{constructor(http_code,http_content,prev){if(prev==undefined)prev=null;super("HTTP error code: "+String(http_code),Runtime.rtl.ERROR_CURL_ERROR,prev);this.http_code=http_code;this.http_content=http_content}_init(){super._init();this.http_code=-1;this.http_content=""}static getClassName(){return"Runtime.Exceptions.CurlException"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Exceptions.CurlException"]=Runtime.Exceptions.CurlException;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Exceptions=="undefined")Runtime.Exceptions={};"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Exceptions=="undefined")Runtime.Exceptions={};Runtime.Exceptions.FieldException=class extends Runtime.Exceptions.RuntimeException{constructor(data,prev){if(prev==undefined)prev=null;super("Field error",Runtime.rtl.ERROR_UNKNOWN,prev);this.data=data}getData(){return this.data}_init(){super._init();this.data=null}static getClassName(){return"Runtime.Exceptions.FieldException"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return["Runtime.Exceptions.DataError"]}};window["Runtime.Exceptions.FieldException"]=Runtime.Exceptions.FieldException;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Exceptions=="undefined")Runtime.Exceptions={};Runtime.Exceptions.IndexOutOfRange=class extends Runtime.Exceptions.RuntimeException{constructor(pos,prev){if(prev==undefined)prev=null;super(Runtime.rtl.translate("Index out of range. Pos: %pos%",Runtime.Map.create({pos:pos})),Runtime.rtl.ERROR_INDEX_OUT_OF_RANGE,prev)}_init(){super._init()}static getClassName(){return"Runtime.Exceptions.IndexOutOfRange"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Exceptions.IndexOutOfRange"]=Runtime.Exceptions.IndexOutOfRange;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Exceptions=="undefined")Runtime.Exceptions={};Runtime.Exceptions.ItemNotFound=class extends Runtime.Exceptions.RuntimeException{constructor(name,object,prev){if(name==undefined)name="";if(object==undefined)object="Item";if(prev==undefined)prev=null;let message="";if(name!=""){message=Runtime.rs.format("%object% '%name%' not found",Runtime.Map.create({name:name,object:object}))}else{message=Runtime.rs.format("%object% not found",Runtime.Map.create({object:object}))}super(message,Runtime.rtl.ERROR_ITEM_NOT_FOUND,prev)}_init(){super._init()}static getClassName(){return"Runtime.Exceptions.ItemNotFound"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Exceptions.ItemNotFound"]=Runtime.Exceptions.ItemNotFound;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Exceptions=="undefined")Runtime.Exceptions={};Runtime.Exceptions.KeyNotFound=class extends Runtime.Exceptions.RuntimeException{constructor(key,prev){if(prev==undefined)prev=null;super(Runtime.rtl.translate("Key '%key%' not found",Runtime.Map.create({key:key})),Runtime.rtl.ERROR_KEY_NOT_FOUND,prev)}_init(){super._init()}static getClassName(){return"Runtime.Exceptions.KeyNotFound"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Exceptions.KeyNotFound"]=Runtime.Exceptions.KeyNotFound;"use strict;";if(typeof Runtime=="undefined")Runtime={};"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.ApiResult=class extends Runtime.BaseObject{isError(){return this.code<0}isException(){return this.is_exception}isSuccess(){return this.code>0}getErrorMessage(){return this.message}getErrorCode(){return this.code}getContent(){let res=Runtime.Map.create({api_name:this.api_name,method_name:this.method_name,code:this.code,message:this.message,data:this.data});if(this.error_name!="")res.set("error_name",this.error_name);if(this.error_file!="")res.set("error_file",this.error_file);if(this.error_line!="")res.set("error_line",this.error_line);if(this.error_pos!="")res.set("error_pos",this.error_pos);if(this.error_trace!="")res.set("error_trace",this.error_trace);return res}importContent(content){this.api_name=content.get("api_name","");this.method_name=content.get("method_name","");this.data=content.get("data",null);this.code=content.get("code",-1);this.message=content.get("message","Unknown error");this.ob_content=content.get("ob_content","");this.error_name=content.get("error_name","");this.error_file=content.get("error_file","");this.error_line=content.get("error_line","");this.error_trace=content.get("error_trace",Runtime.Vector.create([]));this.error_pos=content.get("error_pos","");this.is_exception=this.error_file!="";return this}setData(data){if(data==null)return;if(data instanceof Runtime.Dict){let keys=data.keys();for(let i=0;i<keys.count();i++){let key=keys.get(i);this.data.set(key,data.get(key))}}else{this.data=data}return this}success(data){if(data==undefined)data=null;this.code=Runtime.rtl.ERROR_OK;this.message="Ok";if(!data)return this;if(data.has("code"))this.code=data.get("code");else this.code=Runtime.rtl.ERROR_OK;if(data.has("message"))this.message=data.get("message");else this.message="Ok";if(data.has("data"))this.setData(data.get("data"));return this}exception(e){this.code=e.getErrorCode();this.message=e.getErrorMessage();this.error_name=e.constructor.getClassName();this.error_file=e.getFileName();this.error_line=e.getErrorLine();this.error_pos=e.getErrorPos();if(Runtime.rtl.getContext().env("DEBUG")){this.error_trace=e.getTraceCollection()}if(Runtime.rtl.isImplements(e,"Runtime.Exceptions.DataError"))this.data=e.getData();this.is_exception=true;return this}fail(data){if(data==undefined)data=null;this.code=Runtime.rtl.ERROR_UNKNOWN;this.message="Unknown error";if(data instanceof Runtime.Exceptions.RuntimeException){this.code=data.getErrorCode();this.message=data.getErrorMessage();this.error_name=data.constructor.getClassName();if(Runtime.rtl.isImplements(data,"Runtime.Exceptions.DataError"))this.data=data.getData()}else if(data instanceof Runtime.Map){if(data.has("code"))this.code=data.get("code");else this.code=Runtime.rtl.ERROR_UNKNOWN;if(data.has("message"))this.message=data.get("message");else this.message="Error";if(data.has("data"))this.setData(data.get("data"))}else{this.code=Runtime.rtl.ERROR_UNKNOWN;this.message="Error"}return this}_init(){super._init();this.code=0;this.message="";this.data=new Runtime.Map;this.api_name="";this.method_name="";this.ob_content="";this.error_name=null;this.error_file="";this.error_line="";this.error_pos=0;this.error_trace=null;this.is_exception=false}static getClassName(){return"Runtime.ApiResult"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.ApiResult"]=Runtime.ApiResult;"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.BaseModel=class extends Runtime.BaseObject{constructor(params){if(params==undefined)params=null;super();this.initParams(params);this.initWidget(params);if(this.layout!=null&&this.component!=""){this.layout.addComponent(this.component)}}initParams(params){if(!params)return;this.parent_widget=params.get("parent_widget");if(params.has("layout"))this.layout=params.get("layout");else this.layout=this.parent_widget?this.parent_widget.layout:null;this.component=params.has("component")?params.get("component"):this.component}initWidget(params){}static serialize(rules){rules.addType("component",new Runtime.Serializer.StringType)}async loadData(container){}buildTitle(container){}createWidget(class_name,params){if(params==undefined)params=null;if(params==null)params=new Runtime.Map;if(!params.has("parent_widget"))params.set("parent_widget",this);let widget=Runtime.rtl.newInstance(class_name,Runtime.Vector.create([params]));return widget}addEventListener(event_name,f,priority){if(priority==undefined)priority=100;this.listener.add(event_name,f,priority)}_init(){super._init();this.layout=null;this.parent_widget=null;this.listener=new Runtime.Listener(this);this.component=""}static getClassName(){return"Runtime.BaseModel"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return["Runtime.SerializeInterface"]}};window["Runtime.BaseModel"]=Runtime.BaseModel;"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.BaseLayout=class extends Runtime.BaseModel{initParams(params){super.initParams(params);this.layout=this}initWidget(params){super.initWidget(params);this.initStorage()}initStorage(){this.storage=this.createWidget("Runtime.BaseStorage")}static serialize(rules){super.serialize(rules);rules.addType("component_props",new Runtime.Serializer.StringType);rules.addType("components",new Runtime.Serializer.VectorType(new Runtime.Serializer.StringType));rules.addType("current_component",new Runtime.Serializer.StringType);rules.addType("current_page_model",new Runtime.Serializer.StringType);rules.addType("lang",new Runtime.Serializer.StringType);rules.addType("theme",new Runtime.Serializer.StringType);rules.addType("title",new Runtime.Serializer.StringType);rules.addType("storage",new Runtime.Serializer.ObjectType(Runtime.Map.create({class_name:"Runtime.BaseStorage"})));rules.addType("pages",new Runtime.Serializer.MapType(new Runtime.Serializer.ObjectType(Runtime.Map.create({autocreate:true,extends:"Runtime.BaseModel",create:(layout,rules,data)=>{return layout.createWidget(rules.class_name,data)}}))))}addComponent(class_name){this.components.push(class_name)}getPageModel(){return this.pages.get(this.current_page_model)}setPageModel(class_name,params){if(params==undefined)params=null;if(!params)params=new Runtime.Map;this.current_page_model=class_name;let page=this.pages.get(class_name);if(!page){page=this.createWidget(class_name,params);this.pages.set(class_name,page)}return page}setCurrentPage(component_name,props){if(props==undefined)props=null;this.current_component=component_name;this.component_props=props}setPageTitle(title,full_title){if(full_title==undefined)full_title=false;let res=Runtime.rtl.getContext().hook(Runtime.Hooks.RuntimeHook.TITLE,Runtime.Map.create({layout:this,title:title,title_orig:title,full_title:full_title}));this.title=res.get("title")}get(name){return this.storage.frontend.get(name)}getSiteName(){return""}url(name,params){if(params==undefined)params=null;let router=this.get("router");return router.url(name,params)}sendApi(params){let api=Runtime.rtl.getContext().provider("api");return api.send(params)}translate(text,params){if(params==undefined)params=null;let s=text.has(this.lang)?text.get(this.lang):text.get(this.getDefaultLang());return Runtime.rs.format(s,params)}getDefaultLang(){return"en"}assets(path){let res=Runtime.rtl.getContext().hook(Runtime.Hooks.RuntimeHook.ASSETS,Runtime.Map.create({layout:this,path:path}));return res.get("path")}static getRequiredComponents(component,result,hash){if(hash.has(component))return;let components=Runtime.rtl.getParents(component,"Runtime.Component").filter(class_name=>{return!hash.has(class_name)});components.each(class_name=>{hash.set(class_name,true)});let f=new Runtime.Method(component,"getRequiredComponents");if(f.exists()){let items=f.apply();for(let i=0;i<items.count();i++){let name=items.get(i);if(!hash.has(name)){this.getRequiredComponents(name,result,hash)}}}result.appendItems(components)}getComponents(){let hash=new Runtime.Map;let res=Runtime.rtl.getContext().hook(Runtime.Hooks.RuntimeHook.COMPONENTS,Runtime.Map.create({components:this.components.slice()}));let result_components=Runtime.Vector.create([]);let components=res.get("components");for(let i=0;i<components.count();i++){let class_name=components.get(i);this.constructor.getRequiredComponents(class_name,result_components,hash)}return result_components}static getStyle(components){let content=Runtime.Vector.create([]);for(let i=0;i<components.count();i++){let class_name=components.get(i);let f=new Runtime.Method(class_name,"getComponentStyle");if(!f.exists())continue;content.push(f.apply())}return Runtime.rs.join("",content)}_init(){super._init();this.storage=null;this.components=Runtime.Vector.create([]);this.pages=new Runtime.Map;this.component_props=new Runtime.Map;this.component="Runtime.DefaultLayout";this.current_component="";this.current_page_model="";this.name="";this.lang="en";this.title="";this.theme="light"}static getClassName(){return"Runtime.BaseLayout"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.BaseLayout"]=Runtime.BaseLayout;"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.BaseProvider=class extends Runtime.BaseObject{isStarted(){return this.started}getParam(param_name,def_value){if(this.params==null)return def_value;if(this.params.has(param_name))return def_value;return this.params.get(param_name)}constructor(params){if(params==undefined)params=null;super();this.params=params!=null?params.toDict():null}async init(){}async start(){this.started=true}_init(){super._init();this.started=false;this.params=null}static getClassName(){return"Runtime.BaseProvider"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.BaseProvider"]=Runtime.BaseProvider;"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.BaseStorage=class extends Runtime.BaseModel{static serialize(serializer){super.serialize(serializer);serializer.addType("frontend",new Runtime.Serializer.MapType(new Runtime.Serializer.ObjectType(Runtime.Map.create({autocreate:true}))))}set(key,value){this.frontend.set(key,value)}_init(){super._init();this.widget_name="storage";this.frontend=new Runtime.Map}static getClassName(){return"Runtime.BaseStorage"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.BaseStorage"]=Runtime.BaseStorage;"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.BusHttp=class extends Runtime.BaseProvider{async send(params){let service=params.get("service","");let api_name=params.get("api_name","");let method_name=params.get("method_name","");let data=params.get("data",null);let api_kind="api";let route_prefix=Runtime.rtl.getContext().env("ROUTE_PREFIX");route_prefix=Runtime.rs.removeFirstSlash(route_prefix);route_prefix=Runtime.rs.removeLastSlash(route_prefix);let api_url_arr=Runtime.Vector.create([route_prefix,api_kind,api_name,method_name]);api_url_arr=api_url_arr.filter(s=>{return s!=""});let api_url="/"+String(api_url_arr.join("/"));let res=new Runtime.ApiResult;let d=Runtime.rtl.getContext().hook(Runtime.Hooks.RuntimeHook.SEND_API_BEFORE,Runtime.Map.create({api_url:api_url,service:service,api_name:api_name,method_name:method_name,params:params,data:data}));api_url=d.get("api_url");let curl=new Runtime.Curl(api_url,Runtime.Map.create({post:d.get("data")}));try{await curl.send()}catch(_ex){if(_ex instanceof Runtime.Exceptions.CurlException){var e=_ex;res.exception(e)}else{throw _ex}}let answer=Runtime.rtl.jsonDecode(curl.response);if(answer&&answer instanceof Runtime.Map){res.importContent(answer)}else{res.ob_content=curl.response}if(Runtime.rtl.getContext().env("DEBUG")&&res.ob_content){Runtime.rtl.error(res.ob_content)}if(Runtime.rtl.getContext().env("DEBUG")&&res.isException()&&res.error_trace){let arr=Runtime.Vector.create(["Error message: "+String(res.message),"in file "+String(res.error_file)+String(":")+String(res.error_line)]);arr.appendItems(res.error_trace.map((value,pos)=>{return pos+1+String(") ")+String(value)}));Runtime.rtl.error(Runtime.rs.join("\n",arr))}return res}_init(){super._init()}static getClassName(){return"Runtime.BusHttp"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return["Runtime.BusInterface"]}};window["Runtime.BusHttp"]=Runtime.BusHttp;"use strict;";if(typeof Runtime=="undefined")Runtime={};"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.Listener=class extends Runtime.BaseObject{constructor(object){super();this.object=object}clear(message_name){this.listeners.set(message_name,new Runtime.Chain)}add(message_name,f,priority){if(priority==undefined)priority=100;if(!(f instanceof Runtime.Method))return;if(!this.listeners.has(message_name)){this.clear(message_name)}let chain=this.listeners.get(message_name);chain.add(f,priority);chain.sort()}emit(message){if(message.model==null){message.model=this.object}this.emitMessage(message.constructor.getClassName(),message);this.emitMessage(message.name,message)}async emitAsync(message){if(message.model==null){message.model=this.object}let res1=this.emitMessage(message.constructor.getClassName(),message);let res2=this.emitMessage(message.name,message);if(res1 instanceof Promise)await res1;if(res2 instanceof Promise)await res2}emitMessage(message_name,message){if(!this.listeners.has(message_name))return;let chain=this.listeners.get(message_name);return chain.apply(Runtime.Vector.create([message]))}_init(){super._init();this.object=null;this.listeners=new Runtime.Map}static getClassName(){return"Runtime.Listener"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Listener"]=Runtime.Listener;"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.Method=class extends Runtime.BaseObject{constructor(obj,name,tag){if(tag==undefined)tag=null;super();this._init();this.obj=obj;this.name=name;this.tag=tag}exists(){if(!Runtime.rtl.methodExists(this.obj,this.name)){return false}return true}check(){if(!this.exists()){throw new Runtime.Exceptions.RuntimeException("Method '"+String(this.name)+String("' not found in ")+String(Runtime.rtl.className(this.obj)))}}apply(args){if(args==undefined)args=null;this.check();if(args==null)args=[];var obj=this.obj;if(typeof obj=="string")obj=Runtime.rtl.findClass(obj);return obj[this.name].bind(obj).apply(null,args)}_init(){super._init();this.tag=null}static getClassName(){return"Runtime.Method"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Method"]=Runtime.Method;"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.Chain=class extends Runtime.Method{constructor(){super(null,null)}exists(){return true}check(){}getChain(){return this.chain.slice()}add(f,priority){if(priority==undefined)priority=100;this.chain.push(Runtime.Map.create({method:f,priority:priority}));return this}sort(){this.chain.sort(Runtime.rtl.compare(item=>{return item.get("priority")}))}apply(args){if(args==undefined)args=null;for(let i=0;i<this.chain.count();i++){let item=this.chain.get(i);let f=item.get("method");if(f instanceof Runtime.Method)f.apply(args);else Runtime.rtl.apply(f,args)}}_init(){super._init();this.chain=Runtime.Vector.create([])}static getClassName(){return"Runtime.Chain"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Chain"]=Runtime.Chain;"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.ChainAsync=class extends Runtime.Chain{apply(args){if(args==undefined)args=null;let f=async()=>{for(let i=0;i<this.chain.count();i++){let item=this.chain.get(i);let f=item.get("method");let res=null;if(f instanceof Runtime.Method)res=f.apply(args);else res=Runtime.rtl.apply(f,args);if(res instanceof Promise)await res}};return f()}_init(){super._init()}static getClassName(){return"Runtime.ChainAsync"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.ChainAsync"]=Runtime.ChainAsync;"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.ClearLayout={name:"Runtime.ClearLayout",extends:Runtime.Component,methods:{renderHeader:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("title");__v0.push(this.layout.title);__v.element("meta",new Runtime.Map({name:"viewport",content:"width=device-width, initial-scale=1.0"}));return __v},renderStyle:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let style=Runtime.BaseLayout.getStyle(this.getComponents());if(style){let __v0=__v.element("style");__v0.push(style)}return __v},renderFooter:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);return __v},renderCurrentPage:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);if(this.layout.current_component!=""){let component=this.layout.current_component;__v.element(component,new Runtime.Map({}).concat(this.layout.component_props))}else{let model=this.layout.getPageModel();let class_name=model?model.component:"";if(class_name){__v.element(class_name,new Runtime.Map({model:model}))}}return __v},render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);__v.push(this.renderCurrentPage());return __v},renderApp:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("html",new Runtime.Map({lang:this.layout.lang}));let __v1=__v0.element("head");__v1.push(this.renderHeader());__v1.push(this.renderStyle());let __v2=__v0.element("body",new Runtime.Map({class:rs.className(["theme_"+String(this.layout.theme),componentHash])}));let __v3=__v2.element("div",new Runtime.Map({class:rs.className(["root_container",componentHash])}));__v3.push(this.render());__v2.push(this.renderFooter());return __v},getComponents:function(){let hash=new Runtime.Map;let result_components=Runtime.Vector.create([]);let components=this.layout.components.slice();for(let i=0;i<components.count();i++){let class_name=components.get(i);Runtime.BaseLayout.getRequiredComponents(class_name,result_components,hash)}return components},getClassName:function(){return"Runtime.ClearLayout"}},getComponentStyle:function(){return""},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.ClearLayout"]=Runtime.ClearLayout;"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.Component={name:"Runtime.Component",props:{model:{default:null},class:{default:""}},data:function(){return{parent_component:null}},methods:{renderWidget:function(model,attrs){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);if(model){let component=model.component;if(!attrs){attrs=new Runtime.Map}__v.element(component,new Runtime.Map({model:model}).concat(attrs))}return __v},render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);return __v},slot:function(name){return this.$slots[name]!=undefined},renderSlot:function(slot_name,args){if(args==undefined)args=null;if(!args)args=[];var f=this.$slots[slot_name];return f?f.apply(null,args):null},getParent:function(){return this.$parent},getRef:function(name){return this.$refs[name]},emit:function(message){message.src=this;this.$emit(message.name,message)},nextTick:function(f){this.$nextTick(f)},hash:function(s,f){if(f==undefined)f=null;return f},getClassName:function(){return"Runtime.Component"}},computed:{layout:function(){return this.$layout}},render:function(){let vdom=this.render();return Runtime.rtl.getContext().provider("render").render(vdom)},getComponentStyle:function(){return""},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Component"]=Runtime.Component;"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.Context=class extends Runtime.BaseObject{isInitialized(){return this.initialized}isStarted(){return this.started}getStartTime(){return this.start_time}getBasePath(){return this.base_path}getEntities(class_name){if(class_name==undefined)class_name="";if(class_name==""){return this.entities.slice()}return this.entities.filter(entity_name=>{return Runtime.rtl.isInstanceOf(entity_name,class_name)})}getEnvironments(){return this.environments.copy()}factory(name,params){if(params==undefined)params=null;let item=this.entities.find(entity=>{return entity.name==name});if(!item&&!Runtime.rtl.isImplements(item,"Runtime.FactoryInterface")){throw new Runtime.Exceptions.ItemNotFound(name,"Factory")}return item.createInstance(params)}provider(provider_name){if(!this.providers.has(provider_name)){throw new Runtime.Exceptions.ItemNotFound(provider_name,"Provider")}return this.providers.get(provider_name)}env(name){let value=this.environments.get(name);let res=Runtime.Map.create({name:name,value:value});this.hook(Runtime.Hooks.RuntimeHook.ENV,res);return res.get("value")}static initParams(params){if(!params.has("start_time")){params.set("start_time",Date.now())}if(!params.has("environments"))params.set("environments",new Runtime.Map);let env=params.get("environments");if(!env.has("CLOUD_ENV"))env.set("CLOUD_ENV",false);if(!env.has("DEBUG"))env.set("DEBUG",false);if(!env.has("LOCALE"))env.set("LOCALE","en_US");if(!env.has("TZ"))env.set("TZ","UTC");if(!env.has("TZ_OFFSET"))env.set("TZ_OFFSET",0);return params}constructor(params){super();if(params.has("base_path"))this.base_path=params.get("base_path");if(params.has("cli_args"))this.cli_args=params.get("cli_args");if(params.has("environments"))this.environments=params.get("environments");if(params.has("modules"))this.modules=params.get("modules");if(params.has("start_time"))this.start_time=params.get("start_time")}async init(params){if(this.initialized)return;this.modules=this.constructor.getRequiredModules(this.modules);this.entities=this.constructor.getEntitiesFromModules(this.modules);let providers=this.getEntities("Runtime.Entity.Provider");this.createProviders(providers);if(params.has("providers")){this.createProviders(params.get("providers"))}await this.initProviders();await this.hook(Runtime.Hooks.RuntimeHook.INIT);this.initialized=true}async start(){if(this.started)return;await this.startProviders();await this.hook(Runtime.Hooks.RuntimeHook.START);this.started=true}async run(){return 0}createProviders(providers){for(let i=0;i<providers.count();i++){let factory=providers.get(i);let provider=factory.createInstance();if(!provider){throw new Runtime.Exceptions.RuntimeException("Can't to create provider '"+String(factory.name)+String("'"))}this.registerProvider(factory.name,provider)}}registerProvider(provider_name,provider){if(this.initialized)return;if(!(provider instanceof Runtime.BaseProvider)){throw new Runtime.Exceptions.RuntimeException("Provider '"+String(provider_name)+String("' must be intstanceof BaseProvider"))}this.providers.set(provider_name,provider)}async initProviders(){let providers_names=Runtime.rtl.list(this.providers.keys());for(let i=0;i<providers_names.count();i++){let provider_name=providers_names.get(i);let provider=this.providers.get(provider_name);await provider.init()}}async startProviders(){let providers_names=Runtime.rtl.list(this.providers.keys());for(let i=0;i<providers_names.count();i++){let provider_name=providers_names.get(i);let provider=this.providers.get(provider_name);await provider.start()}}hook(hook_name,params){if(params==undefined)params=null;let hook=this.provider("hook");return hook.apply(hook_name,params)}translate(s,params){if(params==undefined)params=null;if(params==null)return s;return Runtime.rs.format(s,params)}static getRequiredModules(modules){let res=new Runtime.Vector;let cache=new Runtime.Map;this._getRequiredModules(res,cache,modules);return res.removeDuplicates()}static _getRequiredModules(res,cache,modules){if(modules==null)return;for(let i=0;i<modules.count();i++){let module_name=modules.get(i);if(!cache.has(module_name)){cache.set(module_name,true);let f=new Runtime.Method(module_name+String(".ModuleDescription"),"requiredModules");if(f.exists()){let sub_modules=f.apply();if(sub_modules!=null){let sub_modules_keys=Runtime.rtl.list(sub_modules.keys());this._getRequiredModules(res,cache,sub_modules_keys)}res.push(module_name)}}}}static getEntitiesFromModules(modules){return modules.reduce((entities,module_name)=>{let f=new Runtime.Method(module_name+String(".ModuleDescription"),"entities");if(!f.exists())return entities;let arr=f.apply();if(!arr)return entities;return entities.concat(arr)},new Runtime.Vector)}_init(){super._init();this.environments=new Runtime.Map;this.providers=new Runtime.Map;this.modules=Runtime.Vector.create([]);this.entities=Runtime.Vector.create([]);this.cli_args=Runtime.Vector.create([]);this.base_path="";this.start_time=0;this.initialized=false;this.started=false}static getClassName(){return"Runtime.Context"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Context"]=Runtime.Context;"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.Curl=class extends Runtime.BaseObject{constructor(url,params){if(params==undefined)params=null;super();this.url=url;if(params==null)return;if(params.has("post"))this.post=params.get("post")}isSuccess(){return this.code==200}async send(){this.code=0;this.response="";await this.sendPost();return this.response}_init(){super._init();this.url="";this.post=null;this.code=0;this.response=""}static getClassName(){return"Runtime.Curl"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Curl"]=Runtime.Curl;Object.assign(Runtime.Curl.prototype,{getKey:function(key,index){if(key=="")return index;return key+"["+index+"]"},buildPostData:function(result,key,value){if(Runtime.rtl.isImplements(value,"Runtime.SerializeInterface")){value=Runtime.rtl.serialize(value)}if(value instanceof Array){for(var i=0;i<value.length;i++){this.buildPostData(result,this.getKey(key,i),value[i])}}else if(value instanceof Runtime.Map){var keys=Runtime.rtl.list(value.keys());for(var i=0;i<keys.length;i++){var name=keys.get(i);this.buildPostData(result,this.getKey(key,name),value.get(name))}}else if(value!==null){result.append(key,value)}},sendPost:async function(){return await new Promise((resolve,reject)=>{try{var data=new FormData;this.buildPostData(data,"",this.post);let xhr=new XMLHttpRequest;xhr.open("POST",this.url,true);xhr.send(data);xhr.onreadystatechange=function(curl,xhr,resolve,reject){return function(){if(xhr.readyState!=4)return;curl.code=xhr.status;curl.response=xhr.responseText;if(xhr.status==200){resolve()}else{reject(new Runtime.Exceptions.CurlException(xhr.status,xhr.responseText))}}}(this,xhr,resolve,reject)}catch(e){reject(e)}})}});"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.Date=class extends Runtime.BaseObject{constructor(data){if(data==undefined)data=null;super();if(data!=null){if(data.has("y"))this.y=data.get("y");if(data.has("m"))this.m=data.get("m");if(data.has("d"))this.d=data.get("d")}}toMap(){return Runtime.Map.create({y:this.y,m:this.m,d:this.d})}getDate(){return this.y+String("-")+String(this.m)+String("-")+String(this.d)}normalize(){return this}toString(){return this.y+String("-")+String(this.m)+String("-")+String(this.d)}_init(){super._init();this.y=0;this.m=0;this.d=0}static getClassName(){return"Runtime.Date"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return["Runtime.StringInterface"]}};window["Runtime.Date"]=Runtime.Date;Runtime.Date.prototype.toObject=function(){var dt=new Date(this.y,this.m-1,this.d);return dt};Runtime.Date.fromObject=function(dt){var Dict=use("Runtime.Dict");var y=Number(dt.getFullYear());var m=Number(dt.getMonth())+1;var d=Number(dt.getDate());var dt=new Runtime.Date(Dict.from({y:y,m:m,d:d}));return dt};"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.DateTime=class extends Runtime.BaseObject{constructor(data){if(data==undefined)data=null;super();if(data!=null){if(data.has("y"))this.y=data.get("y");if(data.has("m"))this.m=data.get("m");if(data.has("d"))this.d=data.get("d");if(data.has("h"))this.h=data.get("h");if(data.has("i"))this.i=data.get("i");if(data.has("s"))this.s=data.get("s");if(data.has("ms"))this.ms=data.get("ms");if(data.has("o"))this.o=data.get("o")}}toMap(){return Runtime.Map.create({y:this.y,m:this.m,d:this.d,h:this.h,i:this.i,s:this.s,ms:this.ms,o:this.o})}static create(time){if(time==undefined)time=-1;var dt=null;if(time==-1)dt=new Date;else dt=new Date(time*1e3);return this.fromObject(dt);return null}static now(){return this.create(-1)}getTimestamp(){var dt=this.toObject();return Math.round(dt.getTime()/1e3);return null}timestamp(){return this.getTimestamp()}getDayOfWeek(){var dt=this.toObject();return dt.getDay();return null}toString(){let m=this.m<10?"0"+String(this.m):""+String(this.m);let d=this.d<10?"0"+String(this.d):""+String(this.d);let h=this.h<10?"0"+String(this.h):""+String(this.h);let i=this.i<10?"0"+String(this.i):""+String(this.i);let s=this.s<10?"0"+String(this.s):""+String(this.s);let offset=this.o*60;let offset_h=Runtime.rtl.abs(Runtime.rtl.floor(offset/60));let offset_m=offset%60;offset_h=offset_h<10?"0"+String(offset_h):""+String(offset_h);offset_m=offset_m<10?"0"+String(offset_m):""+String(offset_m);let offset_str=offset_h+String(offset_m);offset_str=offset<0?"-"+String(offset_str):"+"+String(offset_str);return this.y+String("-")+String(m)+String("-")+String(d)+String("T")+String(h)+String(":")+String(i)+String(":")+String(s)+String(offset_str)}static fromString(s){let dt=new Runtime.DateTime;dt.y=Runtime.rtl.toInt(Runtime.rs.substr(s,0,4));dt.m=Runtime.rtl.toInt(Runtime.rs.substr(s,5,2));dt.d=Runtime.rtl.toInt(Runtime.rs.substr(s,8,2));dt.h=Runtime.rtl.toInt(Runtime.rs.substr(s,11,2));dt.i=Runtime.rtl.toInt(Runtime.rs.substr(s,14,2));dt.s=Runtime.rtl.toInt(Runtime.rs.substr(s,17,2));dt.o=0;if(Runtime.rs.strlen(s)>19){let sign=Runtime.rs.substr(s,19,1);let tz_h=Runtime.rtl.toInt(Runtime.rs.substr(s,20,2));let tz_m=Runtime.rtl.toInt(Runtime.rs.substr(s,23,2));dt.o=(tz_h*60+tz_m)/60;if(sign=="-")dt.o=0-dt.o}return dt}format(){let m=this.m<10?"0"+String(this.m):""+String(this.m);let d=this.d<10?"0"+String(this.d):""+String(this.d);let h=this.h<10?"0"+String(this.h):""+String(this.h);let i=this.i<10?"0"+String(this.i):""+String(this.i);let s=this.s<10?"0"+String(this.s):""+String(this.s);return this.y+String("-")+String(m)+String("-")+String(d)+String(" ")+String(h)+String(":")+String(i)+String(":")+String(s)}normalize(){let dt=this;let offset=Runtime.rtl.getContext().env("TZ_OFFSET");if(offset)dt=dt.setOffset(offset);return dt}shift(seconds){let timestamp=this.getTimestamp();let dt=this.constructor.create(timestamp+seconds);dt.setOffset(this.o);return dt}setOffset(offset){let dt=this.toObject();let dt_offset;dt_offset=-dt.getTimezoneOffset()*60;let delta=offset-dt_offset;dt=this.constructor.modify(dt,delta);let obj=this.constructor.fromObject(dt);obj.o=offset;return obj}static getOffset(tz){}static modify(dt,seconds){if(seconds==0)return dt;var offset=Math.floor(seconds/60);var h=Math.floor(offset/60);var m=offset%60;dt.setMinutes(dt.getMinutes()+m);dt.setHours(dt.getHours()+h);return dt}toObject(){var dt=new Date(this.y,this.m-1,this.d,this.h,this.i,this.s);var offset=dt.getTimezoneOffset()+this.o*60;dt=this.constructor.modify(dt,-offset*60);return dt}static fromObject(dt){var Map=use("Runtime.Map");var offset=-dt.getTimezoneOffset()/60;var y=Number(dt.getFullYear());var m=Number(dt.getMonth())+1;var d=Number(dt.getDate());var h=Number(dt.getHours());var i=Number(dt.getMinutes());var s=Number(dt.getSeconds());var obj=new Runtime.DateTime(new Map({y:y,m:m,d:d,h:h,i:i,s:s,o:offset}));return obj}_init(){super._init();this.y=1970;this.m=1;this.d=1;this.h=0;this.i=0;this.s=0;this.ms=0;this.o=0}static getClassName(){return"Runtime.DateTime"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return["Runtime.StringInterface"]}};window["Runtime.DateTime"]=Runtime.DateTime;"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.DefaultLayout={name:"Runtime.DefaultLayout",extends:Runtime.Component,methods:{renderCurrentPage:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);if(this.layout.current_component!=""){let component=this.layout.current_component;__v.element(component,new Runtime.Map({}).concat(this.layout.component_props))}else{let model=this.layout.getPageModel();let class_name=model?model.component:"";if(class_name){__v.element(class_name,new Runtime.Map({model:model}))}}return __v},render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);__v.push(this.renderCurrentPage());return __v},renderComponents:function(components){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);for(let i=0;i<components.count();i++){let class_name=components.get(i);if(class_name instanceof Runtime.VirtualDom){__v.push(class_name)}else if(Runtime.rtl.isString(class_name)){__v.element(class_name)}}return __v},renderHeader:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("title");__v0.push(this.layout.title);__v.element("meta",new Runtime.Map({name:"viewport",content:"width=device-width, initial-scale=1.0"}));__v.push(this.renderComponents(this.getComponents(Runtime.Hooks.RuntimeHook.LAYOUT_HEADER)));return __v},renderFooter:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);__v.push(this.renderComponents(this.getComponents(Runtime.Hooks.RuntimeHook.LAYOUT_FOOTER)));return __v},renderMountApp:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("script");__v0.push("var app_data =");__v0.push(Runtime.rtl.jsonEncode(this.container.getData()));__v0.push(';\n\t\tdocument.addEventListener("DOMContentLoaded", function(){\n\t\t\tRuntime.rtl.mount(app_data, document.querySelector(".root_container"), function (result){\n\t\t\t\twindow["app"] = result.get("app");\n\t\t\t\twindow["app_layout"] = result.get("layout");\n\t\t\t});\n\t\t});');return __v},renderStyle:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("style");__v0.push(Runtime.BaseLayout.getStyle(this.layout.getComponents()));return __v},renderApp:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("html",new Runtime.Map({lang:this.layout.lang}));let __v1=__v0.element("head");__v1.push(this.renderHeader());__v1.push(this.renderStyle());let __v2=__v0.element("body",new Runtime.Map({class:rs.className(["theme_"+String(this.layout.theme),componentHash])}));let __v3=__v2.element("div",new Runtime.Map({class:rs.className(["root_container",componentHash])}));__v3.push(this.render());__v2.push(this.renderFooter());__v2.push(this.renderMountApp());return __v},getComponents:function(name){let d=Runtime.rtl.getContext().hook(name,Runtime.Map.create({layout:this.layout,components:Runtime.Vector.create([])}));return d.get("components")},getClassName:function(){return"Runtime.DefaultLayout"}},getComponentStyle:function(){return""},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.DefaultLayout"]=Runtime.DefaultLayout;"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.Message=class extends Runtime.BaseObject{constructor(params){if(params==undefined)params=null;super();this._assign_values(params)}_init(){super._init();this.data=null;this.name="";this.model=null}static getClassName(){return"Runtime.Message"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Message"]=Runtime.Message;"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.Money=class extends Runtime.BaseObject{constructor(value,currency){super();this.value=value;this.currency=currency}getValue(){return this.value}getCurrency(){return this.currency}add(money){if(this.currency!=money.currency){throw new Runtime.Exceptions.RuntimeException("Money currency mismatch")}this.value+=money.currency}_init(){super._init();this.value=0;this.currency=""}static getClassName(){return"Runtime.Money"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Money"]=Runtime.Money;"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.RawString=class{constructor(s){this.s="";if(Runtime.rtl.isString(s)){this.s=s}}toString(){return this.s}static normalize(item){if(Runtime.rtl.isString(item)){return item}else if(item instanceof Runtime.RawString){return item.s}else if(item instanceof Runtime.Collection){item=item.map(item=>{return this.normalize(item)});return Runtime.rs.join("",item)}return""}_init(){}static getClassName(){return"Runtime.RawString"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return["Runtime.StringInterface"]}};window["Runtime.RawString"]=Runtime.RawString;"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.Reference=class extends Runtime.BaseObject{constructor(ref){if(ref==undefined)ref=null;super();this.ref=ref}setValue(new_value){this.ref=new_value}value(){return this.ref}_init(){super._init();this.ref=null}static getClassName(){return"Runtime.Reference"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Reference"]=Runtime.Reference;"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.RenderContainer=class extends Runtime.BaseObject{createLayout(layout_name){let class_name="Runtime.BaseLayout";let params=Runtime.rtl.getContext().hook(Runtime.Hooks.RuntimeHook.LAYOUT_NAME,Runtime.Map.create({class_name:class_name,layout_name:layout_name}));this.layout=Runtime.rtl.newInstance(params.get("class_name"),Runtime.Vector.create([params]));this.layout.name=layout_name;Runtime.rtl.getContext().hook(Runtime.Hooks.RuntimeHook.CREATE_LAYOUT,Runtime.Map.create({container:this}));return this.layout}changeLayout(layout_name){if(this.layout&&this.layout.name==layout_name)return;let old_widgets=this.layout?this.layout.widgets:new Runtime.Map;this.createLayout(layout_name);let keys=Runtime.rtl.list(old_widgets.keys());for(let i=0;i<keys.count();i++){let key=keys.get(i);let widget=old_widgets.get(key);widget.parent_widget=this.layout;this.layout.widgets.set(key,widget)}if(old_widgets.has("storage"))this.layout.storage=old_widgets.get("storage");Runtime.rtl.getContext().hook(Runtime.Hooks.RuntimeHook.CHANGE_LAYOUT,Runtime.Map.create({container:this}))}async resolve(){}async renderPageModel(model_name,params){if(params==undefined)params=null;this.layout.setPageModel(model_name,params);let page_model=this.layout.getPageModel();if(page_model){await page_model.loadData(this);if(page_model==this.layout.getPageModel())page_model.buildTitle(this)}}async loadData(){await this.layout.loadData()}getData(){let layout_data=Runtime.rtl.serialize(this.layout);let data=Runtime.Map.create({modules:Runtime.rtl.getContext().modules,class:this.layout.getClassName(),layout:layout_data,environments:Runtime.Map.create({CLOUD_ENV:Runtime.rtl.getContext().env("CLOUD_ENV"),DEBUG:Runtime.rtl.getContext().env("DEBUG"),LOCALE:Runtime.rtl.getContext().env("LOCALE"),TZ:Runtime.rtl.getContext().env("TZ"),TZ_OFFSET:Runtime.rtl.getContext().env("TZ_OFFSET")})});let res=Runtime.rtl.getContext().hook(Runtime.Hooks.RuntimeHook.CREATE_CONTAINER_DATA,Runtime.Map.create({container:this,data:data}));return res.get("data")}renderApp(){let component=Runtime.rtl.newInstance(this.layout.component);component.container=this;component.layout=this.layout;let vdom=component.renderApp();return vdom.render()}render(){let vdom=new Runtime.VirtualDom;vdom.setName(this.layout.component);vdom.setAttrs(Runtime.Map.create({layout:this.layout}));return vdom.render()}_init(){super._init();this.layout=null}static getClassName(){return"Runtime.RenderContainer"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.RenderContainer"]=Runtime.RenderContainer;"use strict;";if(typeof Runtime=="undefined")Runtime={};"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.ModuleDescription=class{static getModuleName(){return"Runtime"}static getModuleVersion(){return"1.0"}static requiredModules(){return null}static entities(){return Runtime.Vector.create([new Runtime.Entity.Provider("hash","Runtime.Providers.GlobalHash"),new Runtime.Entity.Provider("output","Runtime.Providers.OutputProvider"),new Runtime.Entity.Provider("hook","Runtime.Providers.HookProvider"),new Runtime.Entity.Provider("api","Runtime.BusHttp"),new Runtime.Entity.Provider("render","Runtime.Providers.RenderProvider")])}_init(){}static getClassName(){return"Runtime.ModuleDescription"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.ModuleDescription"]=Runtime.ModuleDescription;"use strict;";if(typeof Runtime=="undefined")Runtime={};Runtime.VirtualDom=class extends Runtime.BaseObject{constructor(component){if(component==undefined)component=null;super();this.component=component}static isComponent(tag_name){if(tag_name=="")return false;let first=Runtime.rs.substr(tag_name,0,1);return Runtime.rs.upper(first)==first}setName(name){this.name=name;this.is_component=this.constructor.isComponent(name)}setAttrs(attrs){if(attrs)this.attrs=attrs}element(name,attrs){if(attrs==undefined)attrs=null;let item=this.constructor.newInstance(Runtime.Vector.create([this.component]));item.setName(name);item.setAttrs(attrs);if(name=="script"||name=="style")item.is_raw=true;this.push(item);return item}push(content){if(Array.isArray(content)){this.items.appendItems(content);return}if(Runtime.rtl.isString(content)&&content=="")return;if(!(content instanceof Runtime.VirtualDom)&&!Runtime.rtl.isString(content)){content=Runtime.rtl.toStr(content)}if(this.items.count()>0&&Runtime.rtl.isString(content)){let item=this.items.last();if(Runtime.rtl.isString(item)){this.items.set(this.items.count()-1,item+String(content));return}}this.items.push(content)}slot(slot_name,content){this.slots.set(slot_name,content)}render(){let content=Runtime.Vector.create([]);let provider=new Runtime.Providers.RenderContent;provider.components=Runtime.rtl.getContext().provider("render").components;provider.render(this,content);return Runtime.rs.join("",content)}static raw(content){let vdom=new Runtime.VirtualDom;vdom.is_raw=true;vdom.push(content);return vdom}static renderModel(model){let vdom=new Runtime.VirtualDom;vdom.setName(model.component);vdom.attrs=Runtime.Map.create({model:model,layout:model.layout});return vdom}_init(){super._init();this.component=null;this.attrs=new Runtime.Map;this.slots=new Runtime.Map;this.items=Runtime.Vector.create([]);this.is_raw=false;this.is_render=false;this.is_component=false;this.name=""}static getClassName(){return"Runtime.VirtualDom"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.VirtualDom"]=Runtime.VirtualDom;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Entity=="undefined")Runtime.Entity={};Runtime.Entity.Entity=class extends Runtime.BaseObject{constructor(obj){if(obj==undefined)obj=null;super();this._assign_values(obj)}_init(){super._init();this.name=""}static getClassName(){return"Runtime.Entity.Entity"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Entity.Entity"]=Runtime.Entity.Entity;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Entity=="undefined")Runtime.Entity={};Runtime.Entity.Factory=class extends Runtime.Entity.Entity{constructor(name,params){if(params==undefined)params=null;super(Runtime.Map.create({name:name,params:params}))}getName(){return this.name}createInstance(){let class_name=this.getName();return Runtime.rtl.newInstance(class_name,Runtime.Vector.create([this.params]))}_init(){super._init();this.params=null}static getClassName(){return"Runtime.Entity.Factory"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return["Runtime.FactoryInterface"]}};window["Runtime.Entity.Factory"]=Runtime.Entity.Factory;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Entity=="undefined")Runtime.Entity={};Runtime.Entity.Hook=class extends Runtime.Entity.Factory{constructor(name,params){if(params==undefined)params=null;super(name,params)}_init(){super._init();this.params=null}static getClassName(){return"Runtime.Entity.Hook"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Entity.Hook"]=Runtime.Entity.Hook;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Entity=="undefined")Runtime.Entity={};Runtime.Entity.Provider=class extends Runtime.Entity.Factory{constructor(name,value,params){if(value==undefined)value="";if(params==undefined)params=null;super(name,params);this.value=value}getName(){return this.value?this.value:this.name}_init(){super._init();this.value=null}static getClassName(){return"Runtime.Entity.Provider"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Entity.Provider"]=Runtime.Entity.Provider;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Hooks=="undefined")Runtime.Hooks={};Runtime.Hooks.BaseHook=class extends Runtime.BaseObject{constructor(params){if(params==undefined)params=null;super();this.initParams(params)}initParams(params){}register(hook_name,method_name,priority){if(method_name==undefined)method_name="";if(priority==undefined)priority=100;let chain=this.provider.getChain(hook_name);if(!chain)return;chain.add(new Runtime.Method(this,method_name),priority)}register_hooks(){}_init(){super._init();this.provider=null}static getClassName(){return"Runtime.Hooks.BaseHook"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Hooks.BaseHook"]=Runtime.Hooks.BaseHook;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Hooks=="undefined")Runtime.Hooks={};Runtime.Hooks.RuntimeHook=class extends Runtime.Hooks.BaseHook{static INIT="runtime::init";static START="runtime::start";static LAUNCHED="runtime::launched";static RUN="runtime::run";static ENV="runtime::env";static MOUNT="runtime::mount";static ASSETS="runtime::assets";static COMPONENTS="runtime::components";static LAYOUT_HEADER="runtime::header";static LAYOUT_FOOTER="runtime::footer";static LAYOUT_NAME="runtime::layout_name";static CREATE_CONTAINER="runtime::create_container";static CREATE_CONTAINER_DATA="runtime::create_container_data";static CREATE_LAYOUT="runtime::create_layout";static CHANGE_LAYOUT="runtime::change_layout";static SEND_API_BEFORE="runtime::send_api_before";static TITLE="runtime::title";register_hooks(){super.register_hooks();this.provider.setAsync(Runtime.Vector.create([this.constructor.INIT,this.constructor.START,this.constructor.LAUNCHED,this.constructor.RUN]))}_init(){super._init()}static getClassName(){return"Runtime.Hooks.RuntimeHook"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Hooks.RuntimeHook"]=Runtime.Hooks.RuntimeHook;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Providers=="undefined")Runtime.Providers={};Runtime.Providers.GlobalHash=class extends Runtime.BaseProvider{get(key,value){if(value==undefined)value=null;return this.hash.get(key,value)}set(key,value){this.hash.set(key,value)}_init(){super._init();this.hash=new Runtime.Map}static getClassName(){return"Runtime.Providers.GlobalHash"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Providers.GlobalHash"]=Runtime.Providers.GlobalHash;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Providers=="undefined")Runtime.Providers={};Runtime.Providers.HookProvider=class extends Runtime.BaseProvider{async init(){let hooks=Runtime.rtl.getContext().getEntities("Runtime.Entity.Hook");this.base_hooks=new Runtime.Vector;for(let i=0;i<hooks.count();i++){let hook=hooks[i];let base_hook=hook.createInstance();base_hook.provider=this;base_hook.register_hooks();this.base_hooks.push(base_hook)}}async start(){await super.start();this.sort()}setAsync(arr){for(let i=0;i<arr.count();i++){let hook_name=arr.get(i);this.async_hooks.set(hook_name,true)}}isAsync(name){if(!this.async_hooks.has(name))return false;return this.async_hooks.get(name)}register(hook_name,f,priority){if(priority==undefined)priority=100;let chain=this.getChain(hook_name);if(!chain)return;chain.add(f,priority)}sort(){this.chains.each(chain=>{chain.sort()})}createChain(name,is_async){if(this.chains.has(name))return;if(is_async)this.chains.set(name,new Runtime.ChainAsync);else this.chains.set(name,new Runtime.Chain)}getChain(name){if(!this.chains.has(name))this.createChain(name,this.isAsync(name));return this.chains.get(name)}apply(hook_name,params){if(params==undefined)params=null;let chain=this.chains.get(hook_name);if(!chain)return params;if(chain instanceof Runtime.ChainAsync){let f=async()=>{await chain.apply(Runtime.Vector.create([params]));return params};return f()}chain.apply(Runtime.Vector.create([params]));return params}_init(){super._init();this.base_hooks=Runtime.Vector.create([]);this.chains=new Runtime.Map;this.async_hooks=new Runtime.Map}static getClassName(){return"Runtime.Providers.HookProvider"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Providers.HookProvider"]=Runtime.Providers.HookProvider;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Providers=="undefined")Runtime.Providers={};Runtime.Providers.OutputProvider=class extends Runtime.BaseProvider{constructor(){super();this.color_table=Runtime.Map.create({black:"0;30",dark_red:"0;31",green:"0;32",brown:"0;33",dark_blue:"0;34",dark_purple:"0;35",dark_cyan:"0;36",gray:"0;37",dark_gray:"0;90",red:"0;91",light_green:"0;92",yellow:"0;93",blue:"0;94",purple:"0;95",cyan:"0;96",white:"0;97",bold_black:"1;30",bold_dark_red:"1;31",bold_green:"1;32",bold_brown:"1;33",bold_dark_blue:"1;34",bold_dark_purple:"1;35",bold_dark_cyan:"1;36",bold_gray:"1;37",bold_dark_gray:"1;90",bold_red:"1;91",bold_light_green:"1;92",bold_yellow:"1;93",bold_blue:"1;94",bold_purple:"1;95",bold_cyan:"1;96",bold_white:"1;97",italic_black:"3;30",italic_dark_red:"3;31",italic_green:"3;32",italic_brown:"3;33",italic_dark_blue:"3;34",italic_dark_purple:"3;35",italic_dark_cyan:"3;36",italic_gray:"3;37",italic_dark_gray:"3;90",italic_red:"3;91",italic_light_green:"3;92",italic_yellow:"3;93",italic_blue:"3;94",italic_purple:"3;95",italic_cyan:"3;96",italic_white:"3;97",underline_black:"4;30",underline_dark_red:"4;31",underline_green:"4;32",underline_brown:"4;33",underline_dark_blue:"4;34",underline_dark_purple:"4;35",underline_dark_cyan:"4;36",underline_gray:"4;37",underline_dark_gray:"4;90",underline_red:"4;91",underline_light_green:"4;92",underline_yellow:"4;93",underline_blue:"4;94",underline_purple:"4;95",underline_cyan:"4;96",underline_white:"4;97",bg_black:"0;40",bg_dark_red:"0;41",bg_green:"0;42",bg_brown:"0;43",bg_dark_blue:"0;44",bg_dark_purple:"0;45",bg_dark_cyan:"0;46",bg_gray:"0;47",bg_dark_gray:"0;100",bg_red:"0;101",bg_light_green:"0;102",bg_yellow:"0;103",bg_blue:"0;104",bg_purple:"0;105",bg_cyan:"0;106",bg_white:"0;107",bg_italic_black:"3;40",bg_italic_dark_red:"3;41",bg_italic_green:"3;42",bg_italic_brown:"3;43",bg_italic_dark_blue:"3;44",bg_italic_dark_purple:"3;45",bg_italic_dark_cyan:"3;46",bg_italic_gray:"3;47",bg_italic_dark_gray:"3;100",bg_italic_red:"3;101",bg_italic_light_green:"3;102",bg_italic_yellow:"3;103",bg_italic_blue:"3;104",bg_italic_purple:"3;105",bg_italic_cyan:"3;106",bg_italic_white:"3;107",bg_underline_black:"4;40",bg_underline_dark_red:"4;41",bg_underline_green:"4;42",bg_underline_brown:"4;43",bg_underline_dark_blue:"4;44",bg_underline_dark_purple:"4;45",bg_underline_dark_cyan:"4;46",bg_underline_gray:"4;47",bg_underline_dark_gray:"4;100",bg_underline_red:"4;101",bg_underline_light_green:"4;102",bg_underline_yellow:"4;103",bg_underline_blue:"4;104",bg_underline_purple:"4;105",bg_underline_cyan:"4;106",bg_underline_white:"4;107"})}print(message,new_line,type){if(new_line==undefined)new_line=true;if(type==undefined)type="";if(!Runtime.rtl.isString(message)){throw new Runtime.Exceptions.RuntimeException("print message must be string")}console.log(message)}error(message){let text_color="dark_red";let isNode=false;if(message instanceof Error){let color=this.getColor(text_color);let char_27=String.fromCharCode(27);if(isNode){this.print(char_27+"["+color+"m",false,"err");this.print(message.stack,false,"err");this.print(char_27+"[0m",true,"err")}else{let s=char_27+"["+color+"m"+message.stack+char_27+"[0m";this.print(s,true,"err")}}else{this.print(this.color(text_color,message),true,"err")}}color(color,message){color=this.getColor(color);message=Runtime.rs.chr(27)+String("[")+String(color)+String("m")+String(message);message=message+String(Runtime.rs.chr(27))+String("[0m");return message}getColor(color){color=Runtime.rs.lower(color);if(this.color_table.has(color))return this.color_table.get(color);if(Runtime.rs.strlen(color)>5)return"0";return color}_init(){super._init();this.color_table=new Runtime.Map}static getClassName(){return"Runtime.Providers.OutputProvider"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Providers.OutputProvider"]=Runtime.Providers.OutputProvider;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Providers=="undefined")Runtime.Providers={};Runtime.Providers.RenderProvider=class extends Runtime.BaseProvider{createLayout(app_data){let class_name=app_data.get("class");let layout_data=app_data.get("layout");let layout=Runtime.rtl.newInstance(class_name);Runtime.rtl.assign(layout,layout_data);return window["Vue"].reactive(layout)}createApp(layout){let app=null;let registerLayout=null;registerLayout=layout=>{return{install:()=>{app.config.globalProperties.$layout=layout}}};let component=Runtime.rtl.findClass(layout.component);let props=new Runtime.Map;let Vue=window["Vue"];if(this.enable_ssr){app=Vue.createSSRApp(component,props)}else{app=Vue.createApp(component,props)}app.use(registerLayout(layout));return app}mount(app_data,element){let layout=this.createLayout(app_data);let app=this.createApp(layout);app.mount(element,true);Runtime.rtl.getContext().hook(Runtime.Hooks.RuntimeHook.MOUNT,Runtime.Map.create({app:app,layout:layout,data:app_data}));return Runtime.Map.create({app:app,layout:layout})}addComponent(component,name){this.components.set(component,name)}findElement(vdom){if(vdom.is_component){let name=vdom.name;if(this.components.has(name))name=this.components.get(name);if(name=="TransitionGroup")return Vue.TransitionGroup;return Runtime.rtl.findClass(name)}return vdom.name}render(vdom){if(!(vdom instanceof Runtime.VirtualDom))return vdom;let content=Runtime.Vector.create([]);if(!vdom.attrs.has("@raw")){for(let i=0;i<vdom.items.count();i++){let item=vdom.items.get(i);content.push(this.render(item))}}let h=window["Vue"].h;if(vdom.name==""){if(content.count()==1)return content.get(0);return content}let children=content;if(vdom.is_component){children=vdom.slots.map(function(f){return(...args)=>{return Runtime.rtl.render(f.apply(null,args))}}).toObject()}if(children instanceof Runtime.Vector){children=children.flatten().filter(item=>{return item!=null&&item!=""})}let attrs=vdom.attrs;if(attrs instanceof Runtime.Map){attrs=attrs.mapWithKeys((value,key)=>{if(key=="@ref")key="ref";return Runtime.Vector.create([value,key])}).filter((value,key)=>{return Runtime.rs.charAt(key,0)!="@"});attrs=attrs.toObject();if(vdom.attrs.has("@raw")){attrs["innerHTML"]=vdom.attrs.get("@raw")}}let name=this.findElement(vdom);return h(name,attrs,children)}_init(){super._init();this.enable_ssr=true;this.components=new Runtime.Map}static getClassName(){return"Runtime.Providers.RenderProvider"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Providers.RenderProvider"]=Runtime.Providers.RenderProvider;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Serializer=="undefined")Runtime.Serializer={};Runtime.Serializer.Allowed=class extends Runtime.BaseObject{constructor(items){super();this.items=items}filter(value,errors){if(value===null)return null;if(this.items.indexOf(value)==-1){errors.push("Value not allowed")}return value}encode(value){return value}_init(){super._init();this.items=Runtime.Vector.create([])}static getClassName(){return"Runtime.Serializer.Allowed"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return["Runtime.Serializer.BaseType"]}};window["Runtime.Serializer.Allowed"]=Runtime.Serializer.Allowed;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Serializer=="undefined")Runtime.Serializer={};"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Serializer=="undefined")Runtime.Serializer={};Runtime.Serializer.BooleanType=class extends Runtime.BaseObject{constructor(params){if(params==undefined)params=null;super();if(!params)return;if(params.has("convert"))this.convert=params.get("convert");if(params.has("default"))this.default_value=params.get("default")}filter(value,errors){if(value===null){if(!this.convert)errors.push(new Runtime.Serializer.TypeError("Does not boolean"));return this.default_value}if(this.convert&&(Runtime.rtl.isInteger(value)||Runtime.rtl.isBoolean(value))){if(value==1)return true;return false}if(value=="true"||value=="1")return true;if(value=="false"||value=="0")return false;errors.push(new Runtime.Serializer.TypeError("Does not boolean"));return false}encode(value){return value}_init(){super._init();this.convert=true;this.default_value=false}static getClassName(){return"Runtime.Serializer.BooleanType"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return["Runtime.Serializer.BaseType"]}};window["Runtime.Serializer.BooleanType"]=Runtime.Serializer.BooleanType;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Serializer=="undefined")Runtime.Serializer={};Runtime.Serializer.DateTimeType=class extends Runtime.BaseObject{filter(value,errors){if(value===null)return null;if(value instanceof Runtime.DateTime)return value;if(!(value instanceof Runtime.Map)){errors.push("Must be Map");return null}return new Runtime.DateTime(value)}encode(value){if(value===null)return null;return value.toMap()}_init(){super._init()}static getClassName(){return"Runtime.Serializer.DateTimeType"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return["Runtime.Serializer.BaseType"]}};window["Runtime.Serializer.DateTimeType"]=Runtime.Serializer.DateTimeType;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Serializer=="undefined")Runtime.Serializer={};Runtime.Serializer.ConstantType=class extends Runtime.BaseObject{constructor(value){super();this.value=value}filter(value,errors){return this.value}encode(value){return this.value}_init(){super._init();this.value=null}static getClassName(){return"Runtime.Serializer.ConstantType"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return["Runtime.Serializer.BaseType"]}};window["Runtime.Serializer.ConstantType"]=Runtime.Serializer.ConstantType;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Serializer=="undefined")Runtime.Serializer={};Runtime.Serializer.IntegerType=class extends Runtime.BaseObject{constructor(params){if(params==undefined)params=null;super();if(!params)return;if(params.has("convert"))this.conver=params.get("convert");if(params.has("default"))this.default_value=params.get("default")}filter(value,errors){if(value===null)return this.default_value;if(this.convert){if(Runtime.rtl.isInteger(value)||Runtime.rtl.isBoolean(value))value=Runtime.rtl.toInt(value);else if(Runtime.rtl.isString(value))value=Runtime.rtl.toInt(value)}if(!Runtime.rtl.isInteger(value)){errors.push(new Runtime.Serializer.TypeError("Does not integer"));return""}return value}encode(value){if(Runtime.rtl.isInteger(value))return value;if(Runtime.rtl.isBoolean(value)||Runtime.rtl.isString(value))return Runtime.rtl.toInt(value);return 0}_init(){super._init();this.convert=true;this.default_value=0}static getClassName(){return"Runtime.Serializer.IntegerType"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return["Runtime.Serializer.BaseType"]}};window["Runtime.Serializer.IntegerType"]=Runtime.Serializer.IntegerType;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Serializer=="undefined")Runtime.Serializer={};Runtime.Serializer.MapType=class extends Runtime.BaseObject{constructor(params){if(params==undefined)params=null;super();if(Runtime.rtl.isImplements(params,"Runtime.Serializer.BaseType"))this.fields=Runtime.Vector.create([params]);else if(params instanceof Runtime.Vector)this.fields=params;else if(params instanceof Runtime.Map)this.items=params}addType(key,rule){if(!this.items.has(key))this.items.set(key,Runtime.Vector.create([]));let items=this.items.get(key);items.push(rule)}getRules(field_name){if(this.items&&this.items.has(field_name)){let fields=this.items.get(field_name);if(!(fields instanceof Runtime.Vector))fields=Runtime.Vector.create([fields]);return fields}if(this.fields)return this.fields;return null}keys(value){if(value==undefined)value=null;return Runtime.rtl.list(this.fields&&value?value.keys():this.items.keys())}walk(value,errors,f){let new_value=new Runtime.Map;let keys=this.keys(value);for(let i=0;i<keys.count();i++){let key=keys.get(i);let item_value=null;if(Runtime.rtl.isImplements(value,"Runtime.SerializeInterface"))item_value=Runtime.rtl.attr(value,key);else if(value instanceof Runtime.Map)item_value=value.get(key);let fields=this.getRules(key);let item_errors=Runtime.Vector.create([]);if(fields){for(let j=0;j<fields.count();j++){let item=fields.get(j);if(Runtime.rtl.isImplements(item,"Runtime.Serializer.BaseType")){item_value=f(item,item_value,item_errors,key)}}}new_value.set(key,item_value);errors.appendItems(item_errors);Runtime.Serializer.TypeError.addFieldErrors(item_errors,key)}return new_value}filter(value,errors,old_value,prev){if(old_value==undefined)old_value=null;if(prev==undefined)prev=null;if(!(value instanceof Runtime.Map))return null;let new_value=this.walk(value,errors,(rule,item_value,item_errors,key)=>{return rule.filter(item_value,item_errors,old_value?old_value.get(key):null,prev)});return new_value}encode(value){if(!(value instanceof Runtime.Map))return null;let errors=Runtime.Vector.create([]);let new_value=this.walk(value,errors,(rule,item_value,item_errors)=>{return rule.encode(item_value)});return new_value}_init(){super._init();this.fields=null;this.items=new Runtime.Map}static getClassName(){return"Runtime.Serializer.MapType"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return["Runtime.Serializer.BaseType"]}};window["Runtime.Serializer.MapType"]=Runtime.Serializer.MapType;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Serializer=="undefined")Runtime.Serializer={};Runtime.Serializer.ObjectType=class extends Runtime.Serializer.MapType{constructor(params){if(params==undefined)params=null;super();this.params=params;if(!params)return;if(params.has("autocreate"))this.autocreate();if(params.has("create"))this.fn_create=params.get("create");if(params.has("class_name"))this.class_name=params.get("class_name");if(params.has("class_extends"))this.class_extends=params.get("extends");if(params.has("class_implements"))this.class_implements=params.get("implements");if(params.has("rules"))this.fn_rules=params.get("rules");if(params.has("serialize"))this.fn_serialize=params.get("serialize")}setClassName(class_name){this.class_name=class_name}copy(){let rules=new Runtime.Serializer.ObjectType;rules.fn_create=this.fn_create;rules.fn_rules=this.fn_rules;rules.fn_serialize=this.fn_serialize;rules.setup=this.setup;rules.items=this.items.map(items=>{return items.slice()});rules.class_name=this.class_name;rules.class_extends=this.class_extends;rules.class_implements=this.class_implements;return rules}autocreate(){this.fn_rules=(rules,value)=>{rules.class_name=value.get("__class_name__")};this.fn_serialize=(item,value)=>{value.set("__class_name__",item.constructor.getClassName())}}createObject(value,errors,prev){if(this.class_name=="")return null;if(!Runtime.rtl.classExists(this.class_name)){errors.push("Class '"+String(this.class_name)+String("' does not exists"));return null}if(this.class_extends!=""&&!Runtime.rtl.isInstanceOf(this.class_name,this.class_extends)){errors.push("Class '"+String(this.class_name)+String("' does not extends '")+String(this.class_extends)+String("'"));return null}if(this.class_implements!=""&&!Runtime.rtl.isImplements(this.class_name,this.class_implements)){errors.push("Class '"+String(this.class_name)+String("' does not implements '")+String(this.class_implements)+String("'"));return null}if(this.fn_create){let fn_create=this.fn_create;return fn_create(prev,this,value)}return Runtime.rtl.newInstance(this.class_name,Runtime.Vector.create([value]))}initRules(value){if(this.fn_rules){let rules=this.fn_rules;rules(this,value)}return this}filter(value,errors,old_value,prev){if(old_value==undefined)old_value=null;if(prev==undefined)prev=null;if(value==null)return null;if(Runtime.rtl.isImplements(value,"Runtime.SerializeInterface"))return value;let new_value=old_value;if(!new_value){let rules=this.copy().initRules(value);new_value=rules.createObject(value,errors,prev)}if(!new_value)return null;let rules=new Runtime.Serializer.ObjectType(this.params);new_value.constructor.serialize(rules);rules.setup.apply(Runtime.Vector.create([new_value,rules]));rules.walk(value,errors,(field,new_item,item_errors,key)=>{if(!value.has(key))return;let old_item=new_value?Runtime.rtl.attr(new_value,key):null;new_item=field.filter(new_item,item_errors,old_item,new_value);if(key!="__class_name__"){Runtime.rtl.setAttr(new_value,key,new_item)}});return new_value}encode(value){if(value===null)return null;if(!Runtime.rtl.isImplements(value,"Runtime.SerializeInterface"))return null;let rules=new Runtime.Serializer.ObjectType(this.params);value.constructor.serialize(rules);let errors=Runtime.Vector.create([]);let new_value=rules.walk(value,errors,(field,new_item,item_errors)=>{return field.encode(new_item)});let serialize=this.fn_serialize;if(serialize)serialize(value,new_value);return new_value}_init(){super._init();this.fn_create=null;this.fn_rules=null;this.fn_serialize=null;this.setup=new Runtime.Chain;this.class_name="";this.class_extends="";this.class_implements="";this.params=new Runtime.Map}static getClassName(){return"Runtime.Serializer.ObjectType"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Serializer.ObjectType"]=Runtime.Serializer.ObjectType;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Serializer=="undefined")Runtime.Serializer={};Runtime.Serializer.Required=class extends Runtime.BaseObject{filter(value,errors){if(value===null||value==="")errors.push(new Runtime.Serializer.TypeError("Required"));return value}encode(value){return value}_init(){super._init()}static getClassName(){return"Runtime.Serializer.Required"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return["Runtime.Serializer.BaseType"]}};window["Runtime.Serializer.Required"]=Runtime.Serializer.Required;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Serializer=="undefined")Runtime.Serializer={};Runtime.Serializer.StringType=class extends Runtime.BaseObject{constructor(params){if(params==undefined)params=null;super();if(!params)return;if(params.has("convert"))this.convert=params.get("convert");if(params.has("multiline"))this.multiline=params.get("multiline");if(params.has("default"))this.default_value=params.get("default")}filter(value,errors){if(value===null){if(!this.convert)errors.push(new Runtime.Serializer.TypeError("Does not string"));return this.default_value}if(this.convert&&(Runtime.rtl.isInteger(value)||Runtime.rtl.isBoolean(value))){value=Runtime.rtl.toStr(value)}if(!Runtime.rtl.isString(value)){errors.push(new Runtime.Serializer.TypeError("Does not string"));return""}if(this.multiline)value=Runtime.rs.replace("\r\n","\n",value);return value}encode(value){if(value===null)return"";if(Runtime.rtl.isString(value))return value;if(Runtime.rtl.isBoolean(value)||Runtime.rtl.isInteger(value))return Runtime.rtl.toStr(value);return""}_init(){super._init();this.convert=true;this.multiline=true;this.default_value=""}static getClassName(){return"Runtime.Serializer.StringType"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return["Runtime.Serializer.BaseType"]}};window["Runtime.Serializer.StringType"]=Runtime.Serializer.StringType;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Serializer=="undefined")Runtime.Serializer={};Runtime.Serializer.TypeError=class extends Runtime.BaseObject{constructor(message){super();this.message=message}getMessage(){let path=this.path.slice().reverse();let field_name=path.first();if(path.count()>1)field_name+="["+String(Runtime.rs.join("][",path))+String("]");return field_name+String(": ")+String(this.message)}static getMessages(errors){return errors.map(error=>{return error.getMessage()})}getFieldName(){return Runtime.rs.join(".",this.path.slice().reverse())}addKey(key){this.path.push(key)}static getMap(errors){let result=new Runtime.Map;for(let i=0;i<errors.count();i++){let item=errors.get(i);let key=item.getFieldName();if(!result.has(key))result.set(key,Runtime.Vector.create([]));let arr=result.get(key);arr.push(item.message)}return result}static addFieldErrors(errors,key){for(let i=0;i<errors.count();i++){let item=errors.get(i);if(Runtime.rtl.isString(item)){item=new Runtime.Serializer.TypeError(item);errors.set(i,item)}item.addKey(key)}}_init(){super._init();this.path=Runtime.Vector.create([]);this.message=""}static getClassName(){return"Runtime.Serializer.TypeError"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Serializer.TypeError"]=Runtime.Serializer.TypeError;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Serializer=="undefined")Runtime.Serializer={};Runtime.Serializer.VectorType=class extends Runtime.BaseObject{constructor(fields){super();if(Runtime.rtl.isImplements(fields,"Runtime.Serializer.BaseType"))this.fields=Runtime.Vector.create([fields]);else if(fields instanceof Runtime.Vector)this.fields=fields}walk(value,errors,f){let new_value=Runtime.Vector.create([]);for(let i=0;i<value.count();i++){let item_errors=Runtime.Vector.create([]);let new_item=value.get(i);for(let j=0;j<this.fields.count();j++){let field=this.fields.get(j);if(Runtime.rtl.isImplements(field,"Runtime.Serializer.BaseType")){new_item=f(field,new_item,item_errors,i)}}new_value.push(new_item);Runtime.Serializer.TypeError.addFieldErrors(item_errors,i);errors.appendItems(item_errors)}return new_value}filter(value,errors,old_value,prev){if(old_value==undefined)old_value=null;if(prev==undefined)prev=null;if(value===null)return null;if(!(value instanceof Runtime.Vector))return null;let new_value=this.walk(value,errors,(field,new_item,item_errors,i)=>{return field.filter(new_item,item_errors,old_value?old_value.get(i):null,prev)});return new_value}encode(value){if(value===null)return null;if(!(value instanceof Runtime.Vector))return null;let errors=Runtime.Vector.create([]);let new_value=this.walk(value,errors,(field,new_item,item_errors,i)=>{return field.encode(new_item)});return new_value}_init(){super._init();this.fields=Runtime.Vector.create([])}static getClassName(){return"Runtime.Serializer.VectorType"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return["Runtime.Serializer.BaseType"]}};window["Runtime.Serializer.VectorType"]=Runtime.Serializer.VectorType;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Web=="undefined")Runtime.Web={};Runtime.Web.RenderHelper=class{static rgbToInt(color){let ch=this.substr(color,0,1);if(ch=="#")color=this.substr(color,1);let r="";let g="";let b="";let sz=this.strlen(color);if(sz==3){r=Runtime.rs.substr(color,0,1);r+=r;g=Runtime.rs.substr(color,1,1);g+=g;b=Runtime.rs.substr(color,2,1);b+=b}else if(sz==6){r=Runtime.rs.substr(color,0,2);g=Runtime.rs.substr(color,2,2);b=Runtime.rs.substr(color,4,2)}r=this.hexdec(r);g=this.hexdec(g);b=this.hexdec(b);return Runtime.Vector.create([r,g,b])}static intToRgb(r,g,b){r=r.toString(16).padStart(2,"0");g=g.toString(16).padStart(2,"0");b=b.toString(16).padStart(2,"0");return r+g+b}static brightness(color,percent){let result=this.rgbToInt(color);let r=result[0];let g=result[1];let b=result[2];r=Runtime.Math.round(r+r*percent/100);g=Runtime.Math.round(g+g*percent/100);b=Runtime.Math.round(b+b*percent/100);if(r>255)r=255;if(g>255)g=255;if(b>255)b=255;if(r<0)r=0;if(g<0)g=0;if(b<0)b=0;return"#"+String(this.intToRgb(r,g,b))}static strip_tags(content,allowed_tags){if(allowed_tags==undefined)allowed_tags=null;if(allowed_tags==null){content=Runtime.re.replace("<[^>]+>","",content);content=Runtime.rs.trim(Runtime.rs.spaceless(content));return content}let matches=Runtime.re.matchAll("<[^>]+>",content,"i");if(matches){for(let i=0;i<matches.count();i++){let match=matches[i];let tag_str=match[0];let tag_match=Runtime.re.matchAll("<(\\/|)([a-zA-Z]+)(|[^>]*)>",tag_str,"i");if(tag_match){let tag_name=this.strtolower(tag_match[0][2]);if(allowed_tags.indexOf(tag_name)==-1){content=this.replace(tag_str,"",content)}}}}content=Runtime.rs.trim(Runtime.rs.spaceless(content));return content}_init(){}static getClassName(){return"Runtime.Web.RenderHelper"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Web.RenderHelper"]=Runtime.Web.RenderHelper;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Web=="undefined")Runtime.Web={};Runtime.Web.Request=class extends Runtime.BaseObject{static METHOD_GET="GET";static METHOD_HEAD="HEAD";static METHOD_POST="POST";static METHOD_PUT="PUT";static METHOD_DELETE="DELETE";static METHOD_CONNECT="CONNECT";static METHOD_OPTIONS="OPTIONS";static METHOD_TRACE="TRACE";static METHOD_PATCH="PATCH";static serialize(rules){super.serialize(rules);rules.addType("uri",new Runtime.Serializer.StringType);rules.addType("full_uri",new Runtime.Serializer.StringType);rules.addType("host",new Runtime.Serializer.StringType);rules.addType("method",new Runtime.Serializer.StringType);rules.addType("protocol",new Runtime.Serializer.StringType);rules.addType("is_https",new Runtime.Serializer.StringType);rules.addType("query",new Runtime.Serializer.MapType(new Runtime.Serializer.StringType))}assignRules(rules){}getClientIP(){let params=Runtime.rtl.getContext().hook(Runtime.Web.Hooks.AppHook.CLIENT_IP,Runtime.Map.create({headers:this.headers,client_ip:this.headers.get("REMOTE_ADDR")}));return params.get("client_ip")}initUri(full_uri){let res=Runtime.rs.parse_url(full_uri);let uri=res.get("uri");let query=res.get("query_arr");this.full_uri=full_uri;this.uri=uri;this.query=query;if(this.uri=="")this.uri="/";let route_prefix=Runtime.rtl.getContext().env("ROUTE_PREFIX");if(route_prefix==null)route_prefix="";let route_prefix_sz=Runtime.rs.strlen(route_prefix);if(route_prefix_sz!=0&&Runtime.rs.substr(this.uri,0,route_prefix_sz)==route_prefix){this.uri=Runtime.rs.substr(this.uri,route_prefix_sz);this.full_uri=Runtime.rs.substr(this.full_uri,route_prefix_sz)}}_init(){super._init();this.uri="";this.full_uri="";this.host="";this.method="GET";this.protocol="";this.is_https=false;this.query=null}static getClassName(){return"Runtime.Web.Request"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return["Runtime.SerializeInterface"]}};window["Runtime.Web.Request"]=Runtime.Web.Request;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Web=="undefined")Runtime.Web={};Runtime.Web.RouteInfo=class extends Runtime.BaseObject{constructor(params){if(params==undefined)params=null;super();this._assign_values(params)}static serialize(rules){super.serialize(rules);rules.addType("data",new Runtime.Serializer.MapType(new Runtime.Serializer.StringType));rules.addType("domain",new Runtime.Serializer.StringType);rules.addType("label",new Runtime.Serializer.StringType);rules.addType("layout",new Runtime.Serializer.StringType);rules.addType("name",new Runtime.Serializer.StringType);rules.addType("matches",new Runtime.Serializer.MapType(new Runtime.Serializer.StringType));rules.addType("params",new Runtime.Serializer.VectorType(new Runtime.Serializer.StringType));rules.addType("pos",new Runtime.Serializer.IntegerType);rules.addType("route_class",new Runtime.Serializer.StringType);rules.addType("uri",new Runtime.Serializer.StringType);rules.addType("uri_match",new Runtime.Serializer.StringType)}copy(){return Runtime.rtl.copy(this)}getLayoutName(){if(this.layout!="")return this.layout;if(this.route_class!=""){let f=new Runtime.Method(this.route_class,"getLayoutName");return f.apply()}return""}compile(){if(this.uri_match==""){this.uri_match="^"+String(Runtime.re.replace("\\/","\\/",this.uri))+String("$")}let matches=Runtime.re.matchAll("{(.*?)}",this.uri);if(matches){let params=new Runtime.Vector;for(let i=0;i<matches.count();i++){let arr=matches[i];let name=arr[1];this.uri_match=Runtime.re.replace("{"+String(name)+String("}"),"([^\\/]*?)",this.uri_match);this.params.push(name)}}else{this.params=Runtime.Vector.create([])}}addMatches(matches){for(let i=0;i<this.params.count();i++){let param_name=this.params.get(i);let match_value=matches.get(i);this.matches.set(param_name,match_value)}}async callMiddleware(container){if(this.middleware){for(let i=0;i<this.middleware.count();i++){let middleware=null;let item=this.middleware.get(i);if(Runtime.rtl.isString(item)){middleware=Runtime.rtl.newInstance(item)}else if(item instanceof Runtime.Entity.Factory){middleware=item.factory()}else if(item instanceof Runtime.Web.BaseMiddleware){middleware=item}await middleware.apply(container)}}if(this.route_class){let class_name=this.route_class;let getMiddleware=new Runtime.Method(class_name,"getMiddleware");if(getMiddleware.exists()){let items=getMiddleware.apply();for(let i=0;i<items.count();i++){let middleware=items.get(i);await middleware.apply(container)}}}}async render(container){throw new Runtime.Exceptions.RuntimeException("RouteInfo is abstract class")}_init(){super._init();this.name=null;this.uri=null;this.uri_match=null;this.domain=null;this.label=null;this.layout=null;this.route_class=null;this.data=null;this.middleware=null;this.params=Runtime.Vector.create([]);this.matches=new Runtime.Map;this.is_backend=false;this.pos=100}static getClassName(){return"Runtime.Web.RouteInfo"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return["Runtime.SerializeInterface"]}};window["Runtime.Web.RouteInfo"]=Runtime.Web.RouteInfo;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Web=="undefined")Runtime.Web={};Runtime.Web.RouteList=class extends Runtime.BaseObject{static serialize(rules){super.serialize(rules);rules.addType("routes",new Runtime.Serializer.MapType(new Runtime.Serializer.MapType(new Runtime.Serializer.StringType)));rules.addType("route_params",new Runtime.Serializer.MapType(new Runtime.Serializer.StringType))}assignRules(rule){}url(route_name,route_params,url_params){if(route_params==undefined)route_params=null;if(url_params==undefined)url_params=null;if(!this.routes.has(route_name))return"";if(route_params==null)route_params=new Runtime.Map;if(url_params==null)url_params=new Runtime.Map;route_params=this.route_params.concat(route_params);let route=this.routes.get(route_name);let res=Runtime.rtl.getContext().hook(Runtime.Web.Hooks.AppHook.MAKE_URL_PARAMS,Runtime.Map.create({route:route,route_name:route_name,route_params:route_params,url_params:url_params}));let domain=route.get("domain");let url=route.get("uri");if(route_params!=null&&url!=null){route_params.each((value,key)=>{let pos=Runtime.rs.indexOf(url,"{"+String(key)+String("}"));if(pos>=0){url=Runtime.rs.replace("{"+String(key)+String("}"),value,url)}})}if(url==null)url="";let url_with_domain=url;if(domain){url_with_domain="//"+String(domain)+String(url)}res=Runtime.rtl.getContext().hook(Runtime.Web.Hooks.AppHook.MAKE_URL,Runtime.Map.create({domain:domain,route:route,route_name:route_name,route_params:route_params,url:url,url_with_domain:url_with_domain,url_params:url_params?url_params:new Runtime.Map}));let is_domain=url_params?url_params.get("domain",true):true;return is_domain?res.get("url_with_domain"):res.get("url")}_init(){super._init();this.routes=new Runtime.Map;this.route_params=new Runtime.Map}static getClassName(){return"Runtime.Web.RouteList"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return["Runtime.SerializeInterface"]}};window["Runtime.Web.RouteList"]=Runtime.Web.RouteList;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Web=="undefined")Runtime.Web={};Runtime.Web.RouteAction=class extends Runtime.Web.RouteInfo{static serialize(rules){super.serialize(rules)}copy(){let route=super.copy();route.action=this.action;return route}compile(){super.compile();if(Runtime.rtl.methodExists(this.route_class,this.action)){this.action=new Runtime.Method(this.route_class,this.action)}else{this.action=new Runtime.Entity.Factory(this.route_class,Runtime.Map.create({action:this.action}))}}async render(container){let action=null;if(this.action instanceof Runtime.Method)action=this.action;else if(this.action instanceof Runtime.Entity.Factory){let base_route=this.action.createInstance();action=new Runtime.Method(base_route,base_route.action)}if(action&&action.exists()){await action.apply(Runtime.Vector.create([container]))}}_init(){super._init();this.action=null}static getClassName(){return"Runtime.Web.RouteAction"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Web.RouteAction"]=Runtime.Web.RouteAction;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Web=="undefined")Runtime.Web={};Runtime.Web.RoutePage=class extends Runtime.Web.RouteInfo{static serialize(rules){super.serialize(rules);rules.addType("page",new Runtime.Serializer.StringType)}async render(container){container.layout.current_page_model="page_model";container.layout.pages.set("page_model",container.layout.createWidget("Runtime.BaseModel",Runtime.Map.create({component:this.page})));if(this.data){let title=this.data.get("title");let is_full_title=this.data.get("full_title",false);container.layout.setPageTitle(title,is_full_title)}}_init(){super._init();this.page=""}static getClassName(){return"Runtime.Web.RoutePage"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Web.RoutePage"]=Runtime.Web.RoutePage;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Web=="undefined")Runtime.Web={};Runtime.Web.RouteModel=class extends Runtime.Web.RouteInfo{static serialize(rules){super.serialize(rules);rules.addType("model",new Runtime.Serializer.StringType);rules.addType("model_params",new Runtime.Serializer.MapType)}async render(container){if(this.model=="")return;if(!Runtime.rtl.classExists(this.model))return;await container.renderPageModel(this.model,this.model_params)}_init(){super._init();this.model="";this.model_params=null}static getClassName(){return"Runtime.Web.RouteModel"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Web.RouteModel"]=Runtime.Web.RouteModel;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Web=="undefined")Runtime.Web={};Runtime.Web.RouteProvider=class extends Runtime.BaseProvider{async init(){await super.init();await this.initRoutes();this.register_hooks()}async initRoutes(){this.routes=new Runtime.Map;let routes=Runtime.rtl.getContext().getEntities("Runtime.Web.Annotations.Route");for(let i=0;i<routes.count();i++){let info=routes[i];if(!info.name)continue;let getRoutes=new Runtime.Method(info.name,"getRoutes");if(!getRoutes.exists()){throw new Runtime.Exceptions.ItemNotFound(info.name,"Route")}let routes_list=getRoutes.apply();if(!routes_list)continue;for(let j=0;j<routes_list.count();j++){let route=routes_list.get(j);route.route_class=info.name;route.compile();this.addRoute(route)}}await Runtime.rtl.getContext().hook(Runtime.Web.Hooks.AppHook.ROUTES_INIT,Runtime.Map.create({routes:this}));this.sortRoutes()}addRoute(route){if(route.uri_match===null)route.compile();this.routes.set(route.name,Runtime.Map.create({uri:route.uri,domain:route.domain}));this.routes_list.push(route)}hasRoute(route_name){return this.routes.has(route_name)}sortRoutes(){let routes_list=this.routes_list.map((value,index)=>{return Runtime.Vector.create([value,index])});routes_list.sort((a,b)=>{let pos_a=a.get(0).pos;let pos_b=b.get(0).pos;if(pos_a==pos_b){return a.get(1)-b.get(1)}return pos_a-pos_b});this.routes_list=routes_list.map(item=>{return item.get(0)})}async start(){await super.start()}register_hooks(){let hook=Runtime.rtl.getContext().provider("hook");hook.register(Runtime.Web.Hooks.AppHook.ROUTE_BEFORE,new Runtime.Method(this,"routeBefore"),50)}routeBefore(params){let container=params.get("container");let layout=container.layout;let router=layout.storage.createWidget("Runtime.Web.RouteList");router.routes=this.routes.copy();layout.storage.set("router",router)}getRoute(route_name){return this.routes_list.find(route=>{return route.name==route_name})}findRoute(request){if(request.uri===null)return null;for(let i=0;i<this.routes_list.count();i++){let route=this.routes_list.get(i);let matches=this.matchRoute(request,route);if(matches==null)continue;route=route.copy();route.addMatches(matches);return route}return null}matchRoute(request,route){if(route==null)return null;if(route.domain&&route.domain!=request.host)return null;let matches=Runtime.re.matchAll(route.uri_match,request.uri);if(matches){matches=matches.get(0,null);matches.remove(0)}let d=Runtime.rtl.getContext().hook(Runtime.Web.Hooks.AppHook.MATCH_ROUTE,Runtime.Map.create({route:route,request:request,matches:matches}));matches=d.get("matches");if(matches==null)return null;return matches}_init(){super._init();this.routes=new Runtime.Map;this.routes_list=Runtime.Vector.create([])}static getClassName(){return"Runtime.Web.RouteProvider"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Web.RouteProvider"]=Runtime.Web.RouteProvider;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Web=="undefined")Runtime.Web={};if(typeof Runtime.Web.Hooks=="undefined")Runtime.Web.Hooks={};Runtime.Web.Hooks.AppHook=class extends Runtime.Hooks.BaseHook{static ASSETS="runtime.web.app::assets";static API_MIDDLEWARE="runtime.web.app::api_middleware";static CLIENT_IP="runtime.web.app::client_ip";static FIND_API="runtime.web.app::find_api";static FIND_ROUTE_BEFORE="runtime.web.app::find_route_before";static FIND_ROUTE_AFTER="runtime.web.app::find_route_after";static MAKE_URL="runtime.web.app::make_url";static MAKE_URL_PARAMS="runtime.web.app::make_url_params";static MATCH_ROUTE="runtime.web.app::match_route";static RESPONSE="runtime.web.app::response";static ROUTES_INIT="runtime.web.app::routes_init";static ROUTE_AFTER="runtime.web.app::route_after";static ROUTE_MIDDLEWARE="runtime.web.app::route_middleware";static ROUTE_BEFORE="runtime.web.app::route_before";register_hooks(){super.register_hooks();this.provider.setAsync(Runtime.Vector.create([this.constructor.FIND_ROUTE_AFTER,this.constructor.FIND_ROUTE_BEFORE,this.constructor.ROUTES_INIT,this.constructor.ROUTE_AFTER,this.constructor.ROUTE_MIDDLEWARE,this.constructor.ROUTE_BEFORE]))}_init(){super._init()}static getClassName(){return"Runtime.Web.Hooks.AppHook"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Web.Hooks.AppHook"]=Runtime.Web.Hooks.AppHook;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Web=="undefined")Runtime.Web={};if(typeof Runtime.Web.Hooks=="undefined")Runtime.Web.Hooks={};Runtime.Web.Hooks.AssetsHook=class extends Runtime.Web.Hooks.AppHook{register_hooks(){this.register(this.constructor.ASSETS)}assets(params){let path=Runtime.rs.join_path(Runtime.Vector.create([Runtime.rtl.getContext().env("ROUTE_PREFIX"),"assets"]));params.set("assets_path",path)}_init(){super._init()}static getClassName(){return"Runtime.Web.Hooks.AssetsHook"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Web.Hooks.AssetsHook"]=Runtime.Web.Hooks.AssetsHook;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Web=="undefined")Runtime.Web={};if(typeof Runtime.Web.Hooks=="undefined")Runtime.Web.Hooks={};Runtime.Web.Hooks.CanonicalUrl=class extends Runtime.Web.Hooks.AppHook{initParams(params){super.initParams(params);if(params==null)return;if(params.has("query"))this.query=params.get("query")}register_hooks(){this.register(this.constructor.ROUTE_BEFORE)}route_before(params){let container=params.get("container");let layout=container.layout;let seo=layout.getWidget("seo");if(!seo)return;if(!layout.route)return;if(layout.route.uri==null)return;let canonical_url=layout.url(layout.route.name,layout.route.matches,Runtime.Map.create({domain:false}));let keys=layout.request_query.keys().sort();for(let i=0;i<keys.count();i++){let key=keys.get(i);if(!this.query.has(key))continue;if(this.query.get(key).indexOf(layout.route.name)==-1)continue;let value=layout.request_query.get(key);canonical_url=Runtime.rs.url_get_add(canonical_url,key,value)}seo.setCanonicalUrl(canonical_url)}_init(){super._init();this.query=null}static getClassName(){return"Runtime.Web.Hooks.CanonicalUrl"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Web.Hooks.CanonicalUrl"]=Runtime.Web.Hooks.CanonicalUrl;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Web=="undefined")Runtime.Web={};if(typeof Runtime.Web.Hooks=="undefined")Runtime.Web.Hooks={};Runtime.Web.Hooks.Components=class extends Runtime.Hooks.RuntimeHook{static hook(items){return new Runtime.Entity.Hook(this.getClassName(),Runtime.Map.create({components:items}))}static header(items){return new Runtime.Entity.Hook(this.getClassName(),Runtime.Map.create({header:items}))}static footer(items){return new Runtime.Entity.Hook(this.getClassName(),Runtime.Map.create({footer:items}))}initParams(params){super.initParams(params);if(params==null)return;if(params.has("components"))this.items.set("components",params.get("components"));if(params.has("footer"))this.items.set("footer",params.get("footer"));if(params.has("header"))this.items.set("header",params.get("header"))}register_hooks(){this.register(Runtime.Hooks.RuntimeHook.COMPONENTS,"components");this.register(Runtime.Hooks.RuntimeHook.LAYOUT_HEADER,"render_head");this.register(Runtime.Hooks.RuntimeHook.LAYOUT_FOOTER,"render_footer")}components(params){params.get("components").appendItems(this.items.get("components"))}render_head(params){params.get("components").appendItems(this.items.get("header"))}render_footer(params){params.get("components").appendItems(this.items.get("footer"))}_init(){super._init();this.items=Runtime.Map.create({components:Runtime.Vector.create([]),footer:Runtime.Vector.create([]),header:Runtime.Vector.create([])})}static getClassName(){return"Runtime.Web.Hooks.Components"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Web.Hooks.Components"]=Runtime.Web.Hooks.Components;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Web=="undefined")Runtime.Web={};if(typeof Runtime.Web.Hooks=="undefined")Runtime.Web.Hooks={};Runtime.Web.Hooks.DetectLanguage=class extends Runtime.Hooks.RuntimeHook{static hook(params){return new Runtime.Entity.Hook("Runtime.Web.Hooks.DetectLanguage",params)}initParams(params){super.initParams(params);if(!params)return;if(params.has("allowed_languages")){this.allowed_languages=params.get("allowed_languages")}if(params.has("default_language")){this.default_language=params.get("default_language")}if(params.has("route_match_name")){this.route_match_name=params.get("route_match_name")}}register_hooks(){}_init(){super._init();this.default_language="en";this.route_match_name="lang";this.allowed_languages=Runtime.Vector.create([])}static getClassName(){return"Runtime.Web.Hooks.DetectLanguage"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Web.Hooks.DetectLanguage"]=Runtime.Web.Hooks.DetectLanguage;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Web=="undefined")Runtime.Web={};if(typeof Runtime.Web.Hooks=="undefined")Runtime.Web.Hooks={};Runtime.Web.Hooks.PageNotFound=class extends Runtime.Hooks.RuntimeHook{static hook(model,layout){if(layout==undefined)layout="default";return new Runtime.Entity.Hook(this.getClassName(),Runtime.Map.create({model:model,layout:layout}))}initParams(params){super.initParams(params);if(params.has("model"))this.model=params.get("model")}register_hooks(){super.register_hooks();this.register(Runtime.Web.Hooks.AppHook.FIND_ROUTE_AFTER,"routeNotFound");this.register(Runtime.Web.Hooks.AppHook.ROUTE_AFTER,"renderPageNotFound")}async routeNotFound(params){let container=params.get("container");if(container.route)return null;container.route=new Runtime.Web.RouteModel(Runtime.Map.create({model:this.model,layout:this.layout_name}))}async renderPageNotFound(params){let container=params.get("container");if(container.response)return;if(container.layout==null){container.createLayout(this.layout_name)}let page_model=container.layout.getPageModel();if(page_model)return;await container.renderPageModel(this.model)}_init(){super._init();this.model="";this.layout_name="default"}static getClassName(){return"Runtime.Web.Hooks.PageNotFound"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Web.Hooks.PageNotFound"]=Runtime.Web.Hooks.PageNotFound;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Web=="undefined")Runtime.Web={};if(typeof Runtime.Web.Hooks=="undefined")Runtime.Web.Hooks={};Runtime.Web.Hooks.SetupLayout=class extends Runtime.Hooks.RuntimeHook{static hook(params){return new Runtime.Entity.Hook(this.getClassName(),Runtime.Map.create({names:params}))}initParams(params){super.initParams(params);if(params==null)return;if(params.has("names"))this.names=params.get("names")}register_hooks(){this.register(this.constructor.LAYOUT_NAME,"getLayoutName")}getLayoutName(params){let layout_name=params.get("layout_name");if(this.names&&this.names.has(layout_name)){params.set("class_name",this.names.get(layout_name))}}_init(){super._init();this.names=null}static getClassName(){return"Runtime.Web.Hooks.SetupLayout"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Web.Hooks.SetupLayout"]=Runtime.Web.Hooks.SetupLayout;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Web=="undefined")Runtime.Web={};if(typeof Runtime.Web.Hooks=="undefined")Runtime.Web.Hooks={};Runtime.Web.Hooks.WidgetModelFactory=class extends Runtime.Web.Hooks.AppHook{static hook(model_name){return new Runtime.Entity.Hook(this.getClassName(),Runtime.Map.create({model_name:model_name}))}initParams(params){super.initParams(params);if(params==null)return;if(params.has("model_name"))this.model_name=params.get("model_name")}register_hooks(){}route_before(params){let container=params.get("container");if(container.response!=null)return;container.layout.addWidget(this.model_name)}_init(){super._init();this.model_name=""}static getClassName(){return"Runtime.Web.Hooks.WidgetModelFactory"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Web.Hooks.WidgetModelFactory"]=Runtime.Web.Hooks.WidgetModelFactory;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Web=="undefined")Runtime.Web={};Runtime.Web.ModuleDescription=class{static getModuleName(){return"Runtime.Web"}static getModuleVersion(){return"0.12.0"}static requiredModules(){return Runtime.Map.create({Runtime:">=0.12"})}static entities(){return Runtime.Vector.create([new Runtime.Entity.Provider("Runtime.Web.RouteProvider")])}_init(){}static getClassName(){return"Runtime.Web.ModuleDescription"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Web.ModuleDescription"]=Runtime.Web.ModuleDescription;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};Runtime.Widget.AppHook=class extends Runtime.Hooks.RuntimeHook{register_hooks(){this.register(this.constructor.COMPONENTS,"components",50)}components(params){let components=Runtime.Vector.create(["Runtime.Widget.CSS"]);components.appendItems(params.get("components"));params.set("components",components)}_init(){super._init()}static getClassName(){return"Runtime.Widget.AppHook"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Widget.AppHook"]=Runtime.Widget.AppHook;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};Runtime.Widget.Button={name:"Runtime.Widget.Button",extends:Runtime.Component,props:{type:{default:"button"},target:{default:"_self"},content:{default:""},href:{default:null},styles:{default:Runtime.Vector.create([])}},methods:{render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);if(this.href==null){let __v0=__v.element("button",new Runtime.Map({type:this.type,class:rs.className(["button",Runtime.rs.mergeStyles("button",this.styles),this.class,componentHash]),onClick:this.onClick,"@ref":"widget"}));__v0.push(this.renderSlot("default"))}else{let __v1=__v.element("a",new Runtime.Map({class:rs.className(["button",this.class,Runtime.rs.mergeStyles("button",this.styles),componentHash]),href:this.href,target:this.target,onClick:this.onClick,"@ref":"widget"}));__v1.push(this.renderSlot("default"))}return __v},onClick:function(e){e.stopPropagation()},getClassName:function(){return"Runtime.Widget.Button"}},getComponentStyle:function(){return".button{display: inline-flex;align-items: center;justify-content: center;color: var(--color-text);font-weight: 500;font-family: var(--font-family);font-size: var(--font-input-size);line-height: var(--line-height);text-decoration: none;background-color: var(--color-background);border: var(--border-width) var(--color-border) solid;padding: calc(var(--space) * 0.75) calc(var(--space) * 1.5);outline: none;cursor: pointer;border-radius: var(--border-radius);transition: background-color var(--transition) var(--transition-type),\n\t\tborder-color var(--transition) var(--transition-type),\n\t\tcolor var(--transition) var(--transition-type)}.button:active{box-shadow: inset 0px 2px 5px 0px rgba(0,0,0,0.25);outline: none}.button--small{padding: calc(var(--space) * 0.5) calc(var(--space) * 1);line-height: 1.2em}.button--large{padding: calc(var(--space) * 1) calc(var(--space) * 2)}.button--primary{color: var(--color-primary-text);background-color: var(--color-primary);border-color: var(--color-primary-border)}.button--primary:hover{background-color: var(--color-primary-hover)}.button--secondary{color: var(--color-secondary-text);background-color: var(--color-secondary);border-color: var(--color-secondary-border)}.button--secondary:hover{background-color: var(--color-secondary-hover)}.button--outline{background-color: transparent;color: var(--color-text);border-color: var(--color-border)}.button--outline:hover{background-color: var(--color-surface)}.button--danger{color: var(--color-danger-text);background-color: var(--color-danger);border-color: var(--color-danger-border)}.button--danger:hover{background-color: var(--color-danger-hover)}.button--success{color: var(--color-success-text);background-color: var(--color-success);border-color: var(--color-success-border)}.button--success:hover{background-color: var(--color-success-hover)}.button--info{color: var(--color-info-text);background-color: var(--color-info);border-color: var(--color-info-border)}.button--info:hover{background-color: var(--color-info-hover)}.button--warning{background-color: var(--color-warning);border-color: var(--color-warning-border)}.button--warning:hover{background-color: var(--color-warning-hover)}.button--stretch{width: 100%}"},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.Button"]=Runtime.Widget.Button;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};Runtime.Widget.CSS={name:"Runtime.Widget.CSS",extends:Runtime.Component,methods:{getClassName:function(){return"Runtime.Widget.CSS"}},getComponentStyle:function(){return":root{--font-family: 'Arial', sans-serif;--font-size: 16px;--font-size-h1: 2.2rem;--font-size-h2: 1.8rem;--font-size-h3: 1.5rem;--font-size-h4: 1.2rem;--font-size-h5: 1rem;--font-size-h6: 1rem;--font-input-size: 16px;--line-height: 1.6;--space: 0.5rem;--color-background: #ffffff;--color-surface: #f8f9fa;--color-border: #e0e1e6;--color-shadow: rgba(0, 0, 0, 0.1);--color-primary: #337ab7;--color-primary-border: #337ab7;--color-primary-hover: #2563eb;--color-primary-text: #ffffff;--color-secondary: #6c757d;--color-secondary-border: #6c757d;--color-secondary-hover: #545b62;--color-secondary-text: #ffffff;--color-success: #198754;--color-success-border: #198754;--color-success-hover: #1e7e34;--color-success-text: #ffffff;--color-danger: #dc3545;--color-danger-danger: #dc3545;--color-danger-hover: #c82333;--color-danger-text: #ffffff;--color-warning: #fbbf24;--color-warning-border: #fbbf24;--color-warning-hover: #e0a800;--color-warinng-text: #212529;--color-info: #60a5fa;--color-info-border: #60a5fa;--color-info-hover: #117a8b;--color-info-text: #ffffff;--color-text: #212529;--color-text-secondary: #6c757d;--color-heading-text: #343a40;--color-link: var(--color-primary);--color-link-hover: var(--color-primary-dark);--color-hover: rgba(0, 0, 0, 0.05);--color-selected: var(--color-primary);--color-selected-text: #ffffff;--border-radius: 6px;--border-radius-large: 12px;--border-width: 1px;--shadow-small: 0 1px 2px 0 rgba(0, 0, 0, 0.05);--shadow-medium: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);--shadow-large: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);--transition: 0.3s;--transition-type: ease-in-out;--transition-background: background-color var(--transition) var(--transition-type),\n\t\tborder-color var(--transition) var(--transition-type),\n\t\tcolor var(--transition) var(--transition-type);--content-max-width: 1280px;--content-tablet-width: 1024px;--content-mobile-width: 768px;--padding-desktop: 2rem;--padding-tablet: 1.5rem;--padding-mobile: 1rem}.theme_dark{--color-background: #1a202c;--color-surface: #2d3748;--color-border: #4a5568;--color-shadow: rgba(0, 0, 0, 0.3);--color-primary: #63b3ed;--color-primary-light: #90cdf4;--color-primary-dark: #4299e1;--color-primary-text: #ffffff;--color-secondary: #a0aec0;--color-secondary-light: #1a202c;--color-secondary-dark: #cbd5e0;--color-secondary-text: #718096;--color-success: #68d391;--color-success-light: #5cb870;--color-success-dark: #1e7e34;--color-success-text: #ffffff;--color-danger: #fc8181;--color-danger-light: #e4606d;--color-danger-dark: #c82333;--color-danger-text: #ffffff;--color-warning: #f6e05e;--color-warning-light: #ffcd38;--color-warning-dark: #e0a800;--color-warinng-text: #212529;--color-info: #63b3ed;--color-info-light: #4bd2e3;--color-info-dark: #117a8b;--color-info-text: #ffffff;--color-text: #e2e8f0;--color-text-secondary: #a0aec0;--color-heading-text: #ffffff;--color-link: var(--color-primary);--color-link-hover: red}body, html{scroll-behavior: smooth;transition: background-color var(--transition) var(--transition-type),\n\t\tcolor var(--transition) var(--transition-type)}.root_container{font-family: var(--font-family);font-size: var(--font-size);line-height: var(--line-height);box-sizing: border-box;width: 100%;padding: 0;margin: 0}.root_container *{box-sizing: border-box}.root_container h1, .root_container h2, .root_container h3, .root_container h4, .root_container h5, .root_container h6{font-family: var(--font-family);color: var(--color-heading-text);margin-top: calc(var(--space) * 3);margin-bottom: var(--space);line-height: 1.2;transition: background-color var(--transition) ease,\n\t\tcolor var(--transition) ease}.root_container h1{font-size: var(--font-size-h1);margin-top: 0}.root_container h2{font-size: var(--font-size-h2)}.root_container h3{font-size: var(--font-size-h3)}.root_container h4{font-size: var(--font-size-h4)}.root_container h5{font-size: var(--font-size-h5)}.root_container h6{font-size: var(--font-size-h6)}.root_container p{margin-bottom: 1em;transition: background-color var(--transition) ease,\n\t\tcolor var(--transition) ease}.link{text-decoration: none;color: var(--color-link);cursor: pointer}.link:hover, .link:visited:hover{text-decoration: underline;color: var(--color-link-hover)}.link:visited{text-decoration: none;color: var(--color-link)}.nolink{text-decoration: inherit;color: inherit}.nolink:hover, .nolink:visited, .nolink:visited:hover{text-decoration: inherit;color: inherit}.cursor{cursor: pointer}.nowrap{white-space: nowrap}.bold{font-weight: bold}.nobold{font-weight: normal}.underline{text-decoration: underline}.center{text-align: center}.left{text-align: left}.right{text-align: right}.clear{clear: both}.hidden{display: none}.inline-block{display: inline-block}.scroll-lock{overflow: hidden}.scroll-lock .core_ui_root{padding-right: 15px}"},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.CSS"]=Runtime.Widget.CSS;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};Runtime.Widget.Field={name:"Runtime.Widget.Field",extends:Runtime.Component,props:{readonly:{default:false},id:{default:""},name:{default:""},value:{default:""},default:{default:""},placeholder:{default:""},type:{default:"text"}},methods:{render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);__v.element("div",new Runtime.Map({class:rs.className(["field",componentHash])}));return __v},getProps:function(){let res=new Runtime.Map;if(this.readonly)res.set("readonly",true);if(this.id)res.set("id",this.id);return new Runtime.Map},getClassName:function(){return"Runtime.Widget.Field"}},getComponentStyle:function(){return""},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.Field"]=Runtime.Widget.Field;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};Runtime.Widget.Image={name:"Runtime.Widget.Image",extends:Runtime.Component,props:{src:{default:""}},methods:{renderNoImage:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["image__no_image",componentHash])}));__v0.push("No image");return __v},render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);if(this.src){__v.element("img",new Runtime.Map({class:rs.className(["image",this.class,componentHash]),src:this.src,key:"image"}))}else{let __v0=__v.element("div",new Runtime.Map({class:rs.className(["image",this.class,componentHash]),key:"no_image"}));__v0.push(this.renderNoImage())}return __v},getClassName:function(){return"Runtime.Widget.Image"}},getComponentStyle:function(){return".image.h-3404{display: inline-block}.image__no_image.h-3404{display: flex;align-items: center;justify-content: center;font-size: 20px;text-transform: uppercase;width: 270px;height: 70px}"},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.Image"]=Runtime.Widget.Image;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};Runtime.Widget.Input={name:"Runtime.Widget.Input",extends:Runtime.Widget.Field,props:{direct_update:{default:false},readonly:{default:false},name:{default:""},value:{default:""},default:{default:""},placeholder:{default:""},type:{default:"text"}},data:function(){return{change_timer:null}},methods:{render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let props=this.getProps();__v.element("input",new Runtime.Map({class:rs.className(["input",componentHash]),type:this.type,name:this.name,value:this.getValue(),placeholder:this.placeholder,"@ref":"input",onChange:this.onChange,onKeydown:this.onKeyDown}).concat(props));return __v},getValue:function(){if(this.value)return this.value;return this.default},onKeyDown:function(e){if(!this.direct_update)return;if(this.change_timer!=null){window.clearTimeout(this.change_timer);this.change_timer=null}this.change_timer=window.setTimeout(()=>{this.onChange()},300)},onChange:function(e){let input=this.getRef("input");this.emit(new Runtime.Widget.Messages.ValueChangeMessage(Runtime.Map.create({value:input.value,old_value:this.value,data:this.data})))},getClassName:function(){return"Runtime.Widget.Input"}},getComponentStyle:function(){return".input.h-f2de{width: 100%;font-family: var(--font-family);font-size: var(--font-input-size);padding: calc(var(--space) * 0.75) calc(var(--space) * 1.5);background-color: var(--color-background);border-width: var(--border-width);border-color: var(--color-border);border-style: solid;border-radius: var(--border-radius);box-shadow: none;color: var(--text-color);outline: transparent;line-height: normal;min-height: 32px;transition: background-color var(--transition) var(--transition-type),\n\t\tborder-color var(--transition) var(--transition-type),\n\t\tcolor var(--transition) var(--transition-type)}.input.h-f2de:focus{outline: transparent}"},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.Input"]=Runtime.Widget.Input;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};Runtime.Widget.Label={name:"Runtime.Widget.Label",extends:Runtime.Component,props:{value:{default:""}},methods:{render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("label",new Runtime.Map({class:rs.className(["label",componentHash])}));if(Runtime.rtl.isString(this.value)){__v0.push(!Runtime.rtl.isEmpty(this.value)?this.value:"")}else if(Runtime.rtl.is_instanceof(this.value,"Runtime.Vector")){for(let i=0;i<this.value.count();i++){let item=this.value.get(i);let __v1=__v0.element("span");__v1.push(!Runtime.rtl.isEmpty(item)?item:"")}}return __v},getClassName:function(){return"Runtime.Widget.Label"}},getComponentStyle:function(){return""},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.Label"]=Runtime.Widget.Label;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};Runtime.Widget.Link={name:"Runtime.Widget.Link",extends:Runtime.Component,props:{href:{default:""},text:{default:""},target:{default:"_self"}},methods:{render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let attrs=new Runtime.Map;if(this.target!=""){attrs=attrs.set("target",this.target)}let __v0=__v.element("a",new Runtime.Map({class:rs.className([this.class,componentHash]),href:this.href}).concat(attrs));__v0.push(this.text);return __v},getClassName:function(){return"Runtime.Widget.Link"}},getComponentStyle:function(){return""},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.Link"]=Runtime.Widget.Link;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};Runtime.Widget.Menu={name:"Runtime.Widget.Menu",extends:Runtime.Component,props:{items:{default:Runtime.Vector.create([])}},methods:{render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["menu",this.class,componentHash])}));for(let i=0;i<this.items.count();i++){let item=this.items.get(i);let __v1=__v0.element("div",new Runtime.Map({class:rs.className(["menu__item",this.menuActive(item.get("name"))?"active":"",componentHash])}));let __v2=__v1.element("a",new Runtime.Map({href:item.get("href"),class:rs.className(["nolink",componentHash])}));__v2.push(item.get("label"))}return __v},menuActive:function(route_name){if(this.layout.route==null)return false;if(this.layout.route.name!=route_name)return false;return true},getClassName:function(){return"Runtime.Widget.Menu"}},getComponentStyle:function(){return".menu__item.h-35e a{display: block;padding: var(--space);border-bottom: 1px solid var(--color-border)}.menu__item.h-35e a:hover{background-color: var(--color-hover)}.menu__item.active.h-35e a, .menu__item.active.h-35e a.nolink, .menu__item.active.h-35e a.nolink:visited{background-color: var(--color-selected);border-color: var(--color-selected);color: var(--color-selected-text)}.menu__item.h-35e:last-child a{border-bottom-width: 0px}"},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.Menu"]=Runtime.Widget.Menu;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};Runtime.Widget.Pagination={name:"Runtime.Widget.Pagination",extends:Runtime.Component,props:{page:{default:1},pages:{default:1},delta:{default:5},name:{default:""}},methods:{render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let page_start=Runtime.rtl.max(2,this.page-this.delta+1);let page_end=Runtime.rtl.min(this.page+this.delta,this.pages-1);let props=new Runtime.Map;let __v0=__v.element("nav",new Runtime.Map({class:rs.className(["pagination",componentHash])}));if(this.pages>1){let __v1=__v0.element("ul");if(this.name){let _=props.set("href",this.getPageUrl(1))}let __v2=__v1.element("li",new Runtime.Map({class:rs.className([this.page==1?"active":"",componentHash]),key:1}));let __v3=__v2.element("a",new Runtime.Map({onClick:this.hash(0)?this.hash(0):this.hash(0,event=>{this.onClick(1)})}).concat(props));__v3.push("1");if(page_start>2){let __v4=__v1.element("li",new Runtime.Map({key:"before"}));__v4.push("...")}if(page_start<=page_end){for(let p=page_start;p<=page_end;p++){if(this.name){let _=props.set("href",this.getPageUrl(p))}let __v5=__v1.element("li",new Runtime.Map({class:rs.className([this.page==p?"active":"",componentHash]),key:p}));let __v6=__v5.element("a",new Runtime.Map({onClick:this.hash(1)?this.hash(1):this.hash(1,event=>{this.onClick(p)})}).concat(props));__v6.push(p)}}if(page_end<this.pages-1){let __v7=__v1.element("li",new Runtime.Map({key:"after"}));__v7.push("...")}if(this.pages>1){if(this.name){let _=props.set("href",this.getPageUrl(this.pages))}let __v8=__v1.element("li",new Runtime.Map({class:rs.className([this.page==this.pages?"active":"",componentHash]),key:this.pages}));let __v9=__v8.element("a",new Runtime.Map({onClick:this.hash(2)?this.hash(2):this.hash(2,event=>{this.onClick(this.pages)})}).concat(props));__v9.push(this.pages)}}return __v},getPageUrl:function(page){let uri=this.layout.request_full_uri;return Runtime.rs.url_get_add(uri,this.name,page)},onClick:function(page){if(this.name)return;this.emit("page",page)},getClassName:function(){return"Runtime.Widget.Pagination"}},getComponentStyle:function(){return".pagination.h-e7d5{text-align: center;padding: var(--space) 0;width: 100%}.pagination.h-e7d5 ul, .pagination.h-e7d5 li{padding: 0;margin: 0}.pagination.h-e7d5 li{display: inline-block;vertical-align: top;list-style: none;margin-left: calc(var(--space) * 0.5);margin-right: calc(var(--space) * 0.5)}.pagination.h-e7d5 a, .pagination.h-e7d5 a:hover, .pagination.h-e7d5 span{display: flex;align-items: center;justify-content: center;background-color: var(--color-surface);border-color: var(--color-border);border-width: var(--border-width);border-style: solid;border-radius: var(--border-radius);color: var(--color-surface-text);text-align: center;width: 30px;height: 30px;line-height: 0;font-size: var(--font-size);text-decoration: none}.pagination.h-e7d5 li:first-child{margin-left: 0px}.pagination.h-e7d5 li.active a, .pagination.h-e7d5 li.active a:hover{background-color: var(--color-selected);border-color: var(--color-selected);color: var(--color-selected-text)}.pagination.h-e7d5 li a:focus{outline: 0;box-shadow: none}"},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.Pagination"]=Runtime.Widget.Pagination;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};Runtime.Widget.Result={name:"Runtime.Widget.Result",extends:Runtime.Component,methods:{render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["result",this.class,this.getErrorClass(),componentHash])}));__v0.push(this.model.message);return __v},getErrorClass:function(){if(this.model.message=="")return"result--hide";if(this.model.isSuccess())return"result--success";if(this.model.isError())return"result--error";return""},getClassName:function(){return"Runtime.Widget.Result"}},getComponentStyle:function(){return".result--center.h-4c3d{text-align: center}.result--margin_top.h-4c3d, .result--margin_bottom.h-4c3d{margin-top: calc(var(--space) * 2)}.result--field.h-4c3d{margin-top: calc(var(--space) * 0.5)}.result--form.h-4c3d{text-align: center;margin-top: calc(var(--space) * 2);margin-bottom: calc(var(--space) * 2)}.result--form.h-4c3d:last-child{margin-bottom: 0}.result--success.h-4c3d{color: var(--color-success)}.result--error.h-4c3d{color: var(--color-danger)}.result--hide.h-4c3d{display: none}"},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.Result"]=Runtime.Widget.Result;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};Runtime.Widget.ResultModel=class extends Runtime.BaseModel{static serialize(rules){super.serialize(rules);rules.addType("code",new Runtime.Serializer.IntegerType);rules.addType("message",new Runtime.Serializer.StringType)}initParams(params){super.initParams(params)}setMessage(message){this.message=message}setSuccess(message,code){if(code==undefined)code=1;this.code=code;this.message=message}setError(message,code){if(code==undefined)code=-1;this.code=code;this.message=message}setException(e){this.code=e.getErrorCode();this.message=e.getErrorMessage()}setApiResult(res){this.code=res.code;this.message=res.message}setWaitMessage(message){if(message==undefined)message="";this.code=0;this.message=message!=""?message:"Wait please ..."}clear(){this.code=0;this.message=""}isError(){return this.code<0}isSuccess(){return this.code>0}_init(){super._init();this.code=0;this.message="";this.component="Runtime.Widget.Result"}static getClassName(){return"Runtime.Widget.ResultModel"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Widget.ResultModel"]=Runtime.Widget.ResultModel;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};Runtime.Widget.RowButtons={name:"Runtime.Widget.RowButtons",extends:Runtime.Component,methods:{render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["row_buttons",this.class,componentHash])}));__v0.push(this.renderSlot("default"));return __v},getClassName:function(){return"Runtime.Widget.RowButtons"}},getComponentStyle:function(){return".row_buttons.h-a597{display: flex;gap: calc(var(--space) * 0.5)}.row_buttons.margin_top.h-a597{margin-top: calc(var(--space) * 2)}.row_buttons.margin_bottom.h-a597{margin-bottom: calc(var(--space) * 2)}"},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.RowButtons"]=Runtime.Widget.RowButtons;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};Runtime.Widget.Container={name:"Runtime.Widget.Container",extends:Runtime.Component,methods:{render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["container",this.class,componentHash])}));__v0.push(this.renderSlot("default"));return __v},getClassName:function(){return"Runtime.Widget.Container"}},getComponentStyle:function(){return""},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.Container"]=Runtime.Widget.Container;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};Runtime.Widget.Section={name:"Runtime.Widget.Section",extends:Runtime.Component,props:{id:{default:""},wrap:{default:"true"},flex:{default:"false"},align_items:{default:""},justify_content:{default:""},flex_wrap:{default:""},height:{default:""},min_height:{default:""}},methods:{render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let attrs=this.getAttrs;let __v0=__v.element("div",new Runtime.Map({class:rs.className(["section",this.class,componentHash]),style:this.getStyle()}).concat(attrs));if(this.wrap=="true"){let __v1=__v0.element("div",new Runtime.Map({class:rs.className(["section__wrap",componentHash]),style:this.getWrapStyle()}));__v1.push(this.renderSlot("default"))}else{__v0.push(this.renderSlot("default"))}return __v},getStyle:function(){let res=Runtime.Vector.create([]);if(!this.wrap){res.push(this.getWrapStyle())}return Runtime.rs.join(";",res)},getWrapStyle:function(){let res=Runtime.Vector.create([]);if(this.flex=="true"){res.push("display: flex;");if(this.align_items)res.push("align-items: "+String(this.align_items));if(this.justify_content)res.push("justify-content: "+String(this.justify_content));if(this.flex_wrap)res.push("flex-wrap: "+String(this.flex_wrap))}if(this.height)res.push("height: "+String(this.height));if(this.min_height)res.push("min-height: "+String(this.min_height));return Runtime.rs.join(";",res)},getClassName:function(){return"Runtime.Widget.Section"}},computed:{getAttrs:function(){let attrs=new Runtime.Map;if(this.id!="")attrs.set("id",this.id);return attrs}},getComponentStyle:function(){return".section__wrap.h-c82a{max-width: var(--content-max-width);margin-left: auto;margin-right: auto;padding: 0px var(--padding-desktop)}@media(max-width: 1000px){.section__wrap.h-c82a{padding: 0px var(--padding-tablet)}}@media(max-width: 768px){.section__wrap.h-c82a{padding: 0px var(--padding-mobile)}}"},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.Section"]=Runtime.Widget.Section;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};Runtime.Widget.Select={name:"Runtime.Widget.Select",extends:Runtime.Widget.Field,props:{name:{default:""},value:{default:""},default:{default:""},options:{default:null},show_select_value:{default:true}},methods:{render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let props=this.getProps();let __v0=__v.element("select",new Runtime.Map({name:this.name,class:rs.className(["select",this.class,componentHash]),onChange:this.onChange}).concat(props));let value=this.getValue();let options=this.getOptions();let selected=new Runtime.Map;if(this.show_select_value===true||this.show_select_value=="true"){if(value===""||value===null){selected=Runtime.Map.create({selected:"selected"})}let __v1=__v0.element("option",new Runtime.Map({key:":select_value",value:""}).concat(selected));__v1.push("Select value")}if(options!=null){for(let i=0;i<options.count();i++){let item=options.get(i);selected=new Runtime.Map;if(item.get("key")==value&&value!==""&&value!==null){selected=Runtime.Map.create({selected:"selected"})}let __v2=__v0.element("option",new Runtime.Map({key:item.get("key"),value:""+String(item.get("key"))}).concat(selected));__v2.push(item.get("value"))}}return __v},getValue:function(){if(this.value!==""&&this.value!==null)return this.value;return this.default},getOptions:function(){if(this.model==null)return this.options;return this.model.getOptions()},onChange:function(e){this.emit(new Runtime.Widget.Messages.ValueChangeMessage(Runtime.Map.create({value:e.target.value,old_value:this.value,data:this.data})))},getClassName:function(){return"Runtime.Widget.Select"}},getComponentStyle:function(){return".select.h-d72c, .select.h-d72c:focus{width: 100%;font-family: var(--font-family);font-size: var(--font-input-size);padding: calc(var(--space) * 0.75) calc(var(--space) * 1.5);background-color: var(--color-background);border-width: var(--border-width);border-color: var(--color-border);border-style: solid;border-radius: var(--border-radius);box-shadow: none;outline: transparent;line-height: normal;color: inherit;max-width: 100%;min-height: 32px;transition: background-color var(--transition) var(--transition-type),\n\t\tborder-color var(--transition) var(--transition-type),\n\t\tcolor var(--transition) var(--transition-type)}.widget_select.h-d72c:hover{color: inherit}"},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.Select"]=Runtime.Widget.Select;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};Runtime.Widget.SelectLabel={name:"Runtime.Widget.SelectLabel",extends:Runtime.Component,props:{value:{default:""},options:{default:new Runtime.Vector}},methods:{render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("span",new Runtime.Map({class:rs.className(["widget_select_label",componentHash])}));var item=this.options?this.options.findItem(item=>{return item.get("key")==this.value}):null;__v0.push(item!=null?item.get("value"):this.value);return __v},getClassName:function(){return"Runtime.Widget.SelectLabel"}},getComponentStyle:function(){return""},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.SelectLabel"]=Runtime.Widget.SelectLabel;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};Runtime.Widget.SortableList={name:"Runtime.Widget.SortableList",extends:Runtime.Component,props:{show_buttons:{default:"true"},name:{default:""},value:{default:new Runtime.Vector}},data:function(){return{old_value:new Runtime.Vector,is_drag:false,is_transition:false,drag_elem:null,drag_item:null,drag_item_pos:-1,shadow_elem:null,drag_elem_css:null,drag_start_point:null,duration:300}},methods:{renderValue:function(pos,item){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);__v.element(Runtime.Widget.Input,new Runtime.Map({value:item,key:item,onValueChange:this.hash(0)?this.hash(0):this.hash(0,message=>{var items=this.getItems();items.set(pos,message.value);this.onValueChange()})}));return __v},renderItem:function(pos){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);var item=this.getItems().get(pos);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["widget_sortable_list__item",componentHash]),"data-pos":pos,key:item}));let __v1=__v0.element("div",new Runtime.Map({class:rs.className(["widget_sortable_list__item_drag",componentHash]),onMousedown:this.hash(1)?this.hash(1):this.hash(1,e=>{this.onMouseDown(e,item)})}));__v1.push("@raw");__v1.push("&#9776;");let __v2=__v0.element("div",new Runtime.Map({class:rs.className(["widget_sortable_list__item_value",componentHash])}));__v2.push(this.renderValue(pos,item));let __v3=__v0.element("div",new Runtime.Map({class:rs.className(["widget_sortable_list__item_remove",componentHash]),onClick:this.hash(2)?this.hash(2):this.hash(2,e=>{this.removeItem(pos)})}));__v3.push("@raw");__v3.push("&#10005;");return __v},renderItems:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["widget_sortable_list__items",componentHash])}));var items=this.getItems();if(items){let __v1=__v0.element(TransitionGroup,new Runtime.Map({name:"widget_sortable_list"}));__v1.slot("default",()=>{const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);for(var i=0;i<items.count();i++){__v.push(this.renderItem(i))}return __v})}return __v},renderButtons:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);if(this.show_buttons=="true"){let __v0=__v.element("div",new Runtime.Map({class:rs.className(["widget_sortable_list__buttons",componentHash])}));let __v1=__v0.element(Runtime.Widget.Button,new Runtime.Map({styles:new Runtime.Vector("small"),onClick:this.hash(3)?this.hash(3):this.hash(3,event=>{this.onAddItemClick()})}));__v1.slot("default",()=>{const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);__v.push("Add");return __v})}return __v},render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["widget_sortable_list",componentHash])}));__v0.push(this.renderItems());__v0.push(this.renderButtons());__v0.element("div",new Runtime.Map({class:rs.className(["widget_sortable_list__shadow",componentHash]),"@ref":"shadow"}));return __v},getItems:function(){return this.value},createItem:function(){return""},createValue:function(){return new Runtime.Vector},swapItems:function(a,b){if(a>b){var c=a;a=b;b=c}var items=this.getItems();var obj_a=items.get(a);var obj_b=items.get(b);items.remove(b);items.insert(b,obj_a);items.remove(a);items.insert(a,obj_b)},removeItem:function(pos){var items=this.getItems();this.old_value=Runtime.Serializer.copy(this.value);items.remove(pos);this.onValueChange()},getDragElementFromPoint:function(x,y){var items=document.elementsFromPoint(x,y);for(var i=0;i<items.length;i++){var elem=items[i];if(elem.parentElement==this.shadow_elem)continue;if(elem.classList.contains("widget_sortable_list__item"))return elem}return null},getDragElement:function(elem){if(elem.classList.contains("widget_sortable_list__item"))return elem;if(elem.parentElement.classList.contains("widget_sortable_list__item")){return elem.parentElement}return null},createShadow:function(){if(!this.drag_elem)return;this.shadow_elem=document.createElement("div");this.shadow_elem.innerHTML=this.drag_elem.outerHTML;this.shadow_elem.classList.add("widget_sortable_list__shadow_elem");var arr=Runtime.rs.split(" ",this.constructor.getCssHash(this.constructor.getClassName()));arr=arr.filter(Runtime.lib.equalNot(""));for(var i=0;i<arr.count();i++){this.shadow_elem.classList.add(arr.get(i))}this.shadow_elem.style.height=this.drag_elem.offsetHeight+String("px");this.shadow_elem.style.width=this.drag_elem.offsetWidth+String("px");this.getRef("shadow").appendChild(this.shadow_elem)},moveShadow:function(x,y){if(!this.shadow_elem)return;var left=x-this.drag_start_point.get("shift_x");var top=y-this.drag_start_point.get("shift_y");this.shadow_elem.style.left=left+String("px");this.shadow_elem.style.top=top+String("px")},startDrag:function(e){if(this.is_drag!=false)return false;if(this.drag_start_point==null)return false;var move_x=Runtime.Math.abs(e.pageX-this.drag_start_point.get("x"));var move_y=Runtime.Math.abs(e.pageY-this.drag_start_point.get("y"));if(move_x<10&&move_y<10)return false;this.is_drag=true;this.createShadow();return true},stopDrag:function(){if(!this.is_drag)return;this.is_drag=false;this.is_transition=false;this.drag_elem=null;this.drag_start_point=null;this.shadow_elem.remove();this.shadow_elem=null},moveDrag:function(e){if(!this.is_drag)return;this.moveShadow(e.pageX,e.pageY);if(this.is_transition)return;var elem=this.getDragElementFromPoint(e.pageX,e.pageY);if(!elem)return;var pos=elem.getAttribute("data-pos");if(pos==this.drag_item_pos)return;this.is_transition=true;this.old_value=Runtime.Serializer.copy(this.value);this.swapItems(this.drag_item_pos,pos);this.drag_item_pos=pos;window.setTimeout(()=>{this.is_transition=false},this.duration);this.onValueChange()},onValueChange:function(){this.emit("valueChange",new Runtime.Web.Messages.ValueChangeMessage(Runtime.Map.create({value:this.value,old_value:this.old_value,data:this.data})))},onAddItemClick:function(){var items=this.getItems();if(items==null){this.emit("valueChange",new Runtime.Web.Messages.ValueChangeMessage(Runtime.Map.create({value:this.createValue(),old_value:this.old_value,data:this.data})))}this.nextTick(()=>{this.old_value=Runtime.Serializer.copy(this.value);var items=this.getItems();items.push(this.createItem());this.onValueChange()})},onMouseDown:function(e,item){if(e.button!=0)return;if(this.is_drag)return;this.drag_elem=this.getDragElement(e.target);this.drag_item=item;this.drag_item_pos=this.drag_elem.getAttribute("data-pos");this.drag_start_point=Runtime.Map.create({x:e.pageX,y:e.pageY,shift_x:e.pageX-e.target.offsetLeft,shift_y:e.pageY-e.target.offsetTop});document.addEventListener("mouseup",this.onMouseUp);document.addEventListener("mousemove",this.onMouseMove);e.preventDefault();return false},onMouseUp:function(e){document.removeEventListener("mouseup",this.onMouseUp);document.removeEventListener("mousemove",this.onMouseMove);this.stopDrag()},onMouseMove:function(e){if(this.drag_elem==null)return;if(!this.is_drag)this.startDrag(e);if(!this.is_drag)return;this.moveDrag(e)},getClassName:function(){return"Runtime.Widget.SortableList"}},getComponentStyle:function(){return".widget_sortable_list.h-2646{position: relative}.widget_sortable_list__item.h-2646{display: flex;align-items: center;justify-content: flex-start;border-width: var(--widget-border-width);border-color: var(--widget-color-border);border-style: solid;border-radius: 4px;margin: 5px}.widget_sortable_list__item_drag,\n.widget_sortable_list__item_remove.h-2646{cursor: pointer;padding: 0px 5px}.widget_sortable_list__item_value.h-2646{flex: 1}.widget_sortable_list__item_value.h-2646 %(Input)widget_input, %(Select)widget_select{padding: 0px 10px;border-color: transparent;border-radius: 0;border-width: 0}.widget_sortable_list__buttons.h-2646{text-align: center;margin-top: var(--widget-space)}.widget_sortable_list__shadow_elem.h-2646{position: absolute;opacity: 0.5;user-select: none;z-index: 9999999}.widget_sortable_list__shadow_elem.h-2646 .widget_sortable_list__item_drag{cursor: grabbing}.widget_sortable_list__shadow_elem.h-2646 .widget_sortable_list__item{margin: 0}.widget_sortable_list-move,\n.widget_sortable_list-enter-active,\n.widget_sortable_list-leave-active.h-2646{transition: all 0.3s ease}.widget_sortable_list-enter-from,\n.widget_sortable_list-leave-to.h-2646{opacity: 0}"},getRequiredComponents:function(){return new Runtime.Vector("Runtime.Widget.Button","Runtime.Widget.Input","Runtime.Widget.Select")}};window["Runtime.Widget.SortableList"]=Runtime.Widget.SortableList;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};Runtime.Widget.SortableFieldList={name:"Runtime.Widget.SortableFieldList",extends:Runtime.Widget.SortableList,data:function(){return{fields:new Runtime.Vector}},methods:{renderValueItem:function(field,pos,item){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["widget_sortable_list__item_value_row",componentHash])}));let __v1=__v0.element("div",new Runtime.Map({class:rs.className(["widget_sortable_list__item_value_label",componentHash])}));__v1.push(field.get("label"));let __v2=__v0.element("div",new Runtime.Map({class:rs.className(["widget_sortable_list__item_value_item",componentHash])}));if(item){var field_name=field.get("name");var field_component=field.get("component");var field_props=field.get("props");__v2.element(Runtime.rtl.findClass(field_component),new Runtime.Map({name:field_name,value:item.get(field_name),onValueChange:this.hash(0)?this.hash(0):this.hash(0,message=>{item.set(field_name,message.value);this.onValueChange()})}).concat(field_props))}return __v},renderValue:function(pos,item){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);for(var i=0;i<this.fields.count();i++){var field=this.fields.get(i);__v.push(this.renderValueItem(field,pos,item))}return __v},renderItem:function(pos){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);var item=this.getItems().get(pos);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["widget_sortable_list__item",componentHash]),"data-pos":pos,key:item}));let __v1=__v0.element("div",new Runtime.Map({class:rs.className(["widget_sortable_list__item_element widget_sortable_list__item_element--drag",componentHash])}));let __v2=__v1.element("div",new Runtime.Map({class:rs.className(["widget_sortable_list__item_drag",componentHash]),onMousedown:this.hash(1)?this.hash(1):this.hash(1,e=>{this.onMouseDown(e,item)})}));__v2.push("@raw");__v2.push("&#9776;");let __v3=__v0.element("div",new Runtime.Map({class:rs.className(["widget_sortable_list__item_value",componentHash])}));__v3.push(this.renderValue(pos,item));let __v4=__v0.element("div",new Runtime.Map({class:rs.className(["widget_sortable_list__item_element widget_sortable_list__item_element--remove",componentHash])}));let __v5=__v4.element("div",new Runtime.Map({class:rs.className(["widget_sortable_list__item_remove",componentHash]),onClick:this.hash(2)?this.hash(2):this.hash(2,e=>{this.removeItem(pos)})}));__v5.push("@raw");__v5.push("&#10005;");return __v},createItem:function(){return new Runtime.Map},getDragElement:function(elem){if(elem.classList.contains("widget_sortable_list__item"))return elem;if(elem.parentElement.classList.contains("widget_sortable_list__item")){return elem.parentElement}if(elem.parentElement.parentElement.classList.contains("widget_sortable_list__item")){return elem.parentElement.parentElement}return null},getClassName:function(){return"Runtime.Widget.SortableFieldList"}},getComponentStyle:function(){return".widget_sortable_list__item.h-a548{align-items: stretch;margin: 10px 0px}.widget_sortable_list__item_element.h-a548{display: flex}.widget_sortable_list__item_element--drag.h-a548{align-items: center}.widget_sortable_list__item_element--remove.h-a548{align-items: start}.widget_sortable_list__item_value.h-a548{padding: 5px}.widget_sortable_list__item_value.h-a548 %(Input)widget_input, %(Select)widget_select{border-bottom: 1px var(--widget-color-border) solid;box-shadow: none;outline: none}.widget_sortable_list__item_value_row.h-a548{display: flex;align-items: center;margin-bottom: 1px}.widget_sortable_list__item_value_label.h-a548{width: 80px}.widget_sortable_list__item_value_item.h-a548{flex: 1}"},getRequiredComponents:function(){return new Runtime.Vector("Runtime.Widget.Input","Runtime.Widget.Select")}};window["Runtime.Widget.SortableFieldList"]=Runtime.Widget.SortableFieldList;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};Runtime.Widget.Tag={name:"Runtime.Widget.Tag",extends:Runtime.Component,props:{name:{default:""},value:{default:Runtime.Vector.create([])}},methods:{render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["tag",componentHash])}));if(this.value){for(let i=0;i<this.value.count();i++){let __v1=__v0.element("div",new Runtime.Map({class:rs.className(["tag__item",componentHash])}));let __v2=__v1.element("div",new Runtime.Map({class:rs.className(["tag__text",componentHash]),contenteditable:"true",onBlur:this.hash(0)?this.hash(0):this.hash(0,e=>{this.onTextChange(i,e.target.innerText)}),onKeydown:this.hash(1)?this.hash(1):this.hash(1,e=>{this.onTextKeyDown(i,e.target.innerText,e)})}));__v2.push(this.value.get(i));let __v3=__v1.element("div",new Runtime.Map({class:rs.className(["tag__close",componentHash]),onClick:this.hash(2)?this.hash(2):this.hash(2,()=>{this.onCloseClick(i)})}));__v3.push("x")}}__v0.element("span",new Runtime.Map({class:rs.className(["tag__span",componentHash]),contenteditable:"true",onBlur:this.onSpanBlur,onKeydown:this.onSpanKeyDown,"@ref":"span"}));return __v},onTextChange:function(i,value){let old_value=this.value.slice();this.value.set(i,value);this.emit(new Runtime.Widget.Messages.ValueChangeMessage(Runtime.Map.create({value:this.value,old_value:old_value,data:this.data})))},onTextKeyDown:function(i,value,e){if(e.keyCode!=13)return;let old_value=this.value.slice();this.value.set(i,value);this.emit(new Runtime.Widget.Messages.ValueChangeMessage(Runtime.Map.create({value:this.value,old_value:old_value,data:this.data})));e.preventDefault();return false},onCloseClick:function(i){let old_value=this.value.slice();this.value.remove(i);this.emit(new Runtime.Widget.Messages.ValueChangeMessage(Runtime.Map.create({value:this.value,old_value:old_value,data:this.data})))},onSpanBlur:function(e){let span=this.getRef("span");if(span.innerText=="")return;let old_value=this.value.slice();this.value.push(span.innerText);span.innerText="";this.emit(new Runtime.Widget.Messages.ValueChangeMessage(Runtime.Map.create({value:this.value,old_value:old_value,data:this.data})))},onSpanKeyDown:function(e){if(e.keyCode!=13)return;let span=this.getRef("span");if(span.innerText=="")return;let old_value=this.value.slice();this.value.push(span.innerText);span.innerText="";this.emit(new Runtime.Widget.Messages.ValueChangeMessage(Runtime.Map.create({value:this.value,old_value:old_value,data:this.data})));e.preventDefault();return false},getClassName:function(){return"Runtime.Widget.Tag"}},getComponentStyle:function(){return".tag.h-27ed{display: flex;flex-wrap: wrap;font-family: var(--font-family);font-size: var(--font-size);background-color: var(--color-default);border-width: var(--border-width);border-color: var(--color-border);border-style: solid;border-radius: var(--border-radius);box-shadow: none;outline: transparent;line-height: normal;padding: var(--space);min-height: 40px;width: 100%}.tag__item.h-27ed{display: flex;align-items: stretch;justify-content: space-between;border-width: var(--border-width);border-color: var(--color-border);border-style: solid;border-radius: 4px;padding: 3px 5px;margin: 5px}.tag__text.h-27ed{overflow-wrap: anywhere;outline: 0}.tag__close.h-27ed{display: inline-flex;align-items: center;justify-content: center;margin-left: 5px;cursor: pointer}.tag__span.h-27ed{overflow-wrap: anywhere;min-width: 100px;padding: 3px;margin: 5px;outline: 0}.tag__span.h-27ed:first-child{padding-left: 0}"},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.Tag"]=Runtime.Widget.Tag;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};Runtime.Widget.Text={name:"Runtime.Widget.Text",extends:Runtime.Component,props:{tag:{default:"text"},raw:{default:"false"},content:{default:"Text"}},methods:{renderContent:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let content=Runtime.rs.split("\n",this.content);if(content.count()==1){__v.push(this.renderText(content.get(0)))}else{for(let i=0;i<content.count();i++){let item=content.get(i);let __v0=__v.element("div",new Runtime.Map({key:i}));__v0.push(this.renderText(item))}}return __v},render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);if(this.tag=="p"){let __v0=__v.element("p",new Runtime.Map({class:rs.className(["text",this.class,componentHash]),key:this.getKey()}));__v0.push(this.renderContent())}else if(this.tag=="h1"){let __v1=__v.element("h1",new Runtime.Map({class:rs.className(["text",this.class,componentHash]),key:this.getKey()}));__v1.push(this.renderContent())}else if(this.tag=="h2"){let __v2=__v.element("h2",new Runtime.Map({class:rs.className(["text",this.class,componentHash]),key:this.getKey()}));__v2.push(this.renderContent())}else if(this.tag=="h3"){let __v3=__v.element("h3",new Runtime.Map({class:rs.className(["text",this.class,componentHash]),key:this.getKey()}));__v3.push(this.renderContent())}else if(this.tag=="h4"){let __v4=__v.element("h4",new Runtime.Map({class:rs.className(["text",this.class,componentHash]),key:this.getKey()}));__v4.push(this.renderContent())}else if(this.tag=="html"){let __v5=__v.element("div",new Runtime.Map({class:rs.className(["text",this.class,componentHash]),key:this.getKey()}));__v5.push(this.renderContent())}else{let __v6=__v.element("div",new Runtime.Map({class:rs.className(["text",this.class,componentHash]),key:this.getKey()}));__v6.push(this.renderContent())}return __v},getKey:function(){let key=this.tag;if(this.raw=="true")key=key+String("-raw");return key},renderText:function(content){let vdom=new Runtime.VirtualDom;vdom.push(content);vdom.is_raw=this.raw=="true";return vdom},getClassName:function(){return"Runtime.Widget.Text"}},getComponentStyle:function(){return".text.h-8fb4{padding: 0;margin: 0}"},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.Text"]=Runtime.Widget.Text;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};Runtime.Widget.TextArea={name:"Runtime.Widget.TextArea",extends:Runtime.Widget.Field,props:{direct_update:{default:false},readonly:{default:false},height:{default:""},name:{default:""},value:{default:""},placeholder:{default:""}},data:function(){return{change_timer:null}},methods:{render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let props=this.getProps();let __v0=__v.element("textarea",new Runtime.Map({class:rs.className(["textarea",this.class,componentHash]),name:this.name,placeholder:this.placeholder,style:this.getStyle(),"@ref":"textarea",onChange:this.onChange,onKeydown:this.onKeyDown}).concat(props));__v0.push(this.value);return __v},getStyle:function(){let content=Runtime.Vector.create([]);if(this.height)content.push("min-height: "+String(this.height));return Runtime.rs.join(";",content)},onKeyDown:function(e){if(!this.direct_update)return;if(this.change_timer!=null){window.clearTimeout(this.change_timer);this.change_timer=null}this.change_timer=window.setTimeout(()=>{this.onChange()},300)},onChange:function(){let textarea=this.getRef("textarea");this.emit(new Runtime.Widget.Messages.ValueChangeMessage(Runtime.Map.create({value:textarea.value,old_value:this.value,data:this.data})))},getClassName:function(){return"Runtime.Widget.TextArea"}},updated:function(){let textarea=this.getRef("textarea");textarea.value=this.value},getComponentStyle:function(){return".textarea.h-ee81{width: 100%;max-width: 100%;font-family: var(--font-family);font-size: var(--font-input-size);padding: calc(var(--space) * 0.75) calc(var(--space) * 1.5);background-color: var(--color-background);border-width: var(--border-width);border-color: var(--color-border);border-style: solid;border-radius: var(--space);box-shadow: none;outline: transparent;line-height: normal;transition: background-color var(--transition) var(--transition-type),\n\t\tborder-color var(--transition) var(--transition-type),\n\t\tcolor var(--transition) var(--transition-type)}.textarea.h-ee81:focus{outline: transparent}"},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.TextArea"]=Runtime.Widget.TextArea;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};Runtime.Widget.TextEditable={name:"Runtime.Widget.TextEditable",extends:Runtime.Widget.Field,props:{reference:{default:null},readonly:{default:false},timeout:{default:500},name:{default:""},value:{default:""}},data:function(){return{change_timer:null,old_value:null}},methods:{render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let props=this.getProps();__v.element("div",new Runtime.Map({class:rs.className(["text_editable",this.class,componentHash]),name:this.name,contenteditable:"plaintext-only",onKeydown:this.onKeyDown,onInput:this.onInput,onBlur:this.onChange,"@ref":"text"}).concat(props));return __v},getValue:function(){return this.getRef("text").innerText},setValue:function(content){let text=this.getRef("text");text.innerText=content;this.old_value=content},getProps:function(){if(this.readonly)return Runtime.Map.create({readonly:true});return new Runtime.Map},onKeyDown:function(e){if(e.key=="Tab"){e.preventDefault();e.stopPropagation();let selection=this.getRef("text").ownerDocument.defaultView.getSelection();let range=selection.getRangeAt(0);let node=document.createTextNode("\t");range.insertNode(node);range.setStartAfter(node);range.setEndAfter(node)}},onInput:function(e){if(this.change_timer!=null){window.clearTimeout(this.change_timer);this.change_timer=null}this.change_timer=window.setTimeout(()=>{this.onChange()},this.timeout)},onChange:function(e){let value=this.getValue();this.emit(new Runtime.Widget.Messages.ValueChangeMessage(Runtime.Map.create({value:value,old_value:this.old_value,data:this.data})));this.old_value=value;this.change_timer=null},getClassName:function(){return"Runtime.Widget.TextEditable"}},mounted:function(){if(this.reference)this.reference.setValue(this);this.setValue(this.value)},updated:function(){if(this.old_value==this.value)return;if(this.change_timer)return;this.setValue(this.value)},getComponentStyle:function(){return".text_editable.h-86cc{width: 100%;max-width: 100%;font-family: var(--font-family);font-size: var(--font-input-size);padding: calc(var(--space) * 0.75) calc(var(--space) * 1.5);margin: 0;background-color: var(--color-default);border-width: var(--border-width);border-color: var(--color-border);border-style: solid;border-radius: var(--space);transition: background-color var(--transition) var(--transition-type),\n\t\tborder-color var(--transition) var(--transition-type),\n\t\tcolor var(--transition) var(--transition-type);box-shadow: none;overflow: auto;overflow-wrap: break-word;outline: transparent;line-height: normal;tab-size: 4;text-wrap: wrap;white-space: pre}"},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.TextEditable"]=Runtime.Widget.TextEditable;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};Runtime.Widget.TextImage={name:"Runtime.Widget.TextImage",extends:Runtime.Component,props:{kind:{default:"text_right"},image:{default:""},content:{default:""}},methods:{renderContent:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let content=Runtime.rs.split("\n",this.content);if(content.count()==1){__v.push(content.get(0))}else{for(let i=0;i<content.count();i++){let item=content.get(i);let __v0=__v.element("div");__v0.push(!Runtime.rtl.isEmpty(item)?item:"")}}return __v},render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["text_image",this.getClass(),this.class,componentHash])}));if(this.kind=="text_bottom"||this.kind=="text_right"){let __v1=__v0.element("div",new Runtime.Map({class:rs.className(["text_image__image",componentHash])}));__v1.element("Runtime.Widget.Image",new Runtime.Map({src:this.image}));let __v2=__v0.element("div",new Runtime.Map({class:rs.className(["text_image__text",componentHash])}));__v2.push(this.renderContent(this.content))}else if(this.kind=="text_top"||this.kind=="text_left"){let __v3=__v0.element("div",new Runtime.Map({class:rs.className(["text_image__text",componentHash])}));__v3.push(this.renderContent(this.content));let __v4=__v0.element("div",new Runtime.Map({class:rs.className(["text_image__image",componentHash])}));__v4.element("Runtime.Widget.Image",new Runtime.Map({src:this.image}))}return __v},getClass:function(){let styles=Runtime.Vector.create([]);styles.push("widget_text_image--"+String(this.kind));return Runtime.rs.join(" ",styles)},getClassName:function(){return"Runtime.Widget.TextImage"}},getComponentStyle:function(){return".text_image--text_left.h-e2c6, .text_image--text_right.h-e2c6{display: flex;align-items: center;justify-content: space-between}.text_image--text_top.h-e2c6, .text_image--text_bottom.h-e2c6{text-align: center}"},getRequiredComponents:function(){return new Runtime.Vector("Runtime.Widget.Image")}};window["Runtime.Widget.TextImage"]=Runtime.Widget.TextImage;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};Runtime.Widget.UploadFileButton={name:"Runtime.Widget.UploadFileButton",extends:Runtime.Widget.Button,methods:{render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["upload_file_button",componentHash])}));__v0.push(Runtime.Widget.Button.methods.render.call(this));__v0.element("input",new Runtime.Map({type:"file","@ref":"upload_file",onChange:this.onFileUploadChange}));return __v},onClick:function(e){let upload_file=this.getRef("upload_file");upload_file.click()},onFileUploadChange:function(e){let upload_file=this.getRef("upload_file");let file=upload_file.files[0];if(file){let message=new Runtime.Widget.Messages.ValueChangeMessage(Runtime.Map.create({name:"file",value:file,data:this.data}));this.emit(message);if(this.model)this.model.emit(message)}},getClassName:function(){return"Runtime.Widget.UploadFileButton"}},getComponentStyle:function(){return".upload_file_button.h-a4c6 input{display: none}"},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.UploadFileButton"]=Runtime.Widget.UploadFileButton;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Messages=="undefined")Runtime.Widget.Messages={};Runtime.Widget.Messages.ClickMessage=class extends Runtime.Message{constructor(params){if(params==undefined)params=null;super(params);this.name="click"}_init(){super._init()}static getClassName(){return"Runtime.Widget.Messages.ClickMessage"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Widget.Messages.ClickMessage"]=Runtime.Widget.Messages.ClickMessage;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Messages=="undefined")Runtime.Widget.Messages={};Runtime.Widget.Messages.ValueChangeMessage=class extends Runtime.Message{_init(){super._init();this.name="valueChange";this.value=null;this.old_value=null}static getClassName(){return"Runtime.Widget.Messages.ValueChangeMessage"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Widget.Messages.ValueChangeMessage"]=Runtime.Widget.Messages.ValueChangeMessage;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};Runtime.Widget.ModuleDescription=class{static getModuleName(){return"Runtime.Widget"}static getModuleVersion(){return"0.12.1"}static requiredModules(){return Runtime.Map.create({})}static entities(){return Runtime.Vector.create([new Runtime.Entity.Hook("Runtime.Widget.AppHook")])}_init(){}static getClassName(){return"Runtime.Widget.ModuleDescription"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Widget.ModuleDescription"]=Runtime.Widget.ModuleDescription;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.ContextMenu=="undefined")Runtime.Widget.ContextMenu={};Runtime.Widget.ContextMenu.ContextMenu={name:"Runtime.Widget.ContextMenu.ContextMenu",extends:Runtime.Component,methods:{renderItem:function(item){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["context_menu__item",item.get("hidden")==true?"hidden":"",componentHash]),key:item.get("key"),onClick:this.hash(0)?this.hash(0):this.hash(0,event=>{this.onClickItem(item)})}));__v0.push(item.get("label"));return __v},render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let props=this.getProps();let __v0=__v.element("div",new Runtime.Map({class:rs.className(["context_menu",this.model.is_open?"context_menu--open":"context_menu--hide",componentHash]),"@ref":"widget"}).concat(props));for(let i=0;i<this.model.items.count();i++){let item=this.model.items.get(i);__v0.push(this.renderItem(item))}return __v},getProps:function(){let styles=Runtime.Vector.create([]);if(this.model.width!=""){styles.push("max-width: "+String(this.model.width))}styles.push("left: "+String(this.model.x)+String("px;"));styles.push("top: "+String(this.model.y)+String("px;"));return Runtime.Map.create({style:Runtime.rs.join(";",styles)})},onClickItem:function(item){this.model.onClickItem(item)},getClassName:function(){return"Runtime.Widget.ContextMenu.ContextMenu"}},getComponentStyle:function(){return".context_menu.h-eb02{display: none;position: absolute;z-index: 99;background-color: var(--color-background);border: var(--border-width) var(--color-border) solid;border-bottom-width: 0}.context_menu--open.h-eb02{display: block}.context_menu__item.h-eb02{padding: calc(var(--space) * 0.75) var(--space);border-bottom: var(--border-width) var(--color-border) solid;cursor: pointer;user-select: none}.context_menu__item.h-eb02:hover{background-color: var(--color-hover)}.context_menu__item.hidden.h-eb02{display: none}"},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.ContextMenu.ContextMenu"]=Runtime.Widget.ContextMenu.ContextMenu;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.ContextMenu=="undefined")Runtime.Widget.ContextMenu={};Runtime.Widget.ContextMenu.ContextMenuMessage=class extends Runtime.Message{_init(){super._init();this.item=null}static getClassName(){return"Runtime.Widget.ContextMenu.ContextMenuMessage"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Widget.ContextMenu.ContextMenuMessage"]=Runtime.Widget.ContextMenu.ContextMenuMessage;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.ContextMenu=="undefined")Runtime.Widget.ContextMenu={};Runtime.Widget.ContextMenu.ContextMenuModel=class extends Runtime.BaseModel{initParams(params){super.initParams(params);if(params==null)return;if(params.has("items"))this.items=params.get("items")}setWidth(value){this.width=value}show(x,y){this.is_open=true;this.x=x;this.y=y}hide(){this.is_open=false}addItem(item){this.items.push(item)}find(key){return this.items.find(item=>{return item.get("key")==key})}findItem(key){return this.items.get(this.find(key))}onClickItem(item){this.listener.emit(new Runtime.Widget.ContextMenu.ContextMenuMessage(Runtime.Map.create({name:"clickItem",item:item})))}_init(){super._init();this.component="Runtime.Widget.ContextMenu.ContextMenu";this.widget_name="context_menu";this.is_open=false;this.width="";this.x=0;this.y=0;this.items=Runtime.Vector.create([]);this.data=null}static getClassName(){return"Runtime.Widget.ContextMenu.ContextMenuModel"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Widget.ContextMenu.ContextMenuModel"]=Runtime.Widget.ContextMenu.ContextMenuModel;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Dialog=="undefined")Runtime.Widget.Dialog={};Runtime.Widget.Dialog.Dialog={name:"Runtime.Widget.Dialog.Dialog",extends:Runtime.Component,props:{model:{default:null},modal:{default:true}},methods:{renderTitle:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);__v.push(this.renderSlot("title"));return __v},renderHeader:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["dialog__header",componentHash])}));let __v1=__v0.element("div",new Runtime.Map({class:rs.className(["dialog__header_title",componentHash])}));__v1.push(this.renderTitle());let __v2=__v0.element("Runtime.Widget.Button",new Runtime.Map({class:rs.className(["dialog__header_close button--small",componentHash]),onClick:this.hash(0)?this.hash(0):this.hash(0,event=>{this.onCloseClick()})}));__v2.slot("default",()=>{const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("svg",new Runtime.Map({width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"}));__v0.element("path",new Runtime.Map({d:"M12 4L4 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}));__v0.element("path",new Runtime.Map({d:"M4 4L12 12",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"}));return __v});return __v},renderContent:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["dialog__content",componentHash])}));__v0.push(this.renderSlot("content"));return __v},renderFooter:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);if(this.slot("footer")){let __v0=__v.element("div",new Runtime.Map({class:rs.className(["dialog__footer",componentHash])}));__v0.push(this.renderSlot("footer"))}return __v},render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["dialog",this.model.is_open?"dialog--open":"",componentHash]),onClick:this.hash(1)?this.hash(1):this.hash(1,event=>{this.onOverlayClick()})}));let __v1=__v0.element("div",new Runtime.Map({class:rs.className(["dialog__container",componentHash]),onClick:this.hash(2)?this.hash(2):this.hash(2,event=>{event.stopPropagation()})}));__v1.push(this.renderHeader());__v1.push(this.renderContent());__v1.push(this.renderFooter());return __v},onOverlayClick:function(){if(!this.modal){this.model.hide()}},onCloseClick:function(){this.model.hide()},getClassName:function(){return"Runtime.Widget.Dialog.Dialog"}},updated:function(){let body=document.getElementsByTagName("body")[0];if(this.model.is_open){if(!body.classList.contains("scroll-lock")){body.classList.add("scroll-lock")}}else{if(body.classList.contains("scroll-lock")){body.classList.remove("scroll-lock")}}},getComponentStyle:function(){return".dialog.h-a5bb{display: none;position: fixed;top: 0;left: 0;width: 100%;height: 100%;background-color: rgba(0, 0, 0, 0.2);z-index: 99999;align-items: center;justify-content: center;overflow-y: auto}.dialog--open.h-a5bb{display: grid}.dialog__container.h-a5bb{background-color: var(--color-background);border-radius: var(--border-radius);box-shadow: 0 4px 16px rgba(0, 0, 0, 0.5);width: 600px;margin: calc(var(--space) * 2) auto}.dialog__content.h-a5bb{padding: calc(var(--space) * 2)}.dialog__header.h-a5bb{padding: var(--space) calc(var(--space) * 2);border-bottom: 1px solid var(--color-border);display: flex;justify-content: space-between;align-items: center;font-weight: bold;font-size: 1.2em}.dialog__header.h-a5bb .button{font-size: 1.5em;line-height: 0;border: none}.dialog__footer.h-a5bb{padding: calc(var(--space) * 2);padding-top: var(--space);display: flex;justify-content: flex-end;gap: var(--space)}@media (max-width: 768px){.dialog__content_wrapper.h-a5bb{width: 95%}.dialog__header.h-a5bb{font-size: 1.1em;padding: 10px 15px}.dialog__content.h-a5bb{padding: 15px}.dialog__footer.h-a5bb{padding: 10px 15px}}"},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.Dialog.Dialog"]=Runtime.Widget.Dialog.Dialog;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Dialog=="undefined")Runtime.Widget.Dialog={};Runtime.Widget.Dialog.DialogMessage=class extends Runtime.Message{_init(){super._init();this.action="";this.value=""}static getClassName(){return"Runtime.Widget.Dialog.DialogMessage"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Widget.Dialog.DialogMessage"]=Runtime.Widget.Dialog.DialogMessage;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Dialog=="undefined")Runtime.Widget.Dialog={};Runtime.Widget.Dialog.DialogModel=class extends Runtime.BaseModel{show(){this.is_open=true}hide(){this.is_open=false;this.listener.emit(new Runtime.Widget.Dialog.DialogMessage(Runtime.Map.create({name:"hide"})))}_init(){super._init();this.is_open=false}static getClassName(){return"Runtime.Widget.Dialog.DialogModel"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Widget.Dialog.DialogModel"]=Runtime.Widget.Dialog.DialogModel;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Dialog=="undefined")Runtime.Widget.Dialog={};Runtime.Widget.Dialog.ConfirmDialog={name:"Runtime.Widget.Dialog.ConfirmDialog",extends:Runtime.Widget.Dialog.Dialog,methods:{renderTitle:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);if(this.slot("title")){__v.push(this.renderSlot("title"))}else{__v.push(this.model.title)}return __v},renderContent:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["dialog__content",componentHash])}));if(this.slot("content")){__v0.push(this.renderSlot("content"))}else{__v0.push(this.model.content)}__v0.push(this.renderWidget(this.model.result,Runtime.Map.create({class:"result--center"})));return __v},renderFooter:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["dialog__footer",componentHash])}));let __v1=__v0.element("Runtime.Widget.Button",new Runtime.Map({onClick:this.hash(0)?this.hash(0):this.hash(0,event=>{this.model.hide()})}));__v1.slot("default",()=>{const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);__v.push("Close");return __v});let __v2=__v0.element("Runtime.Widget.Button",new Runtime.Map({class:rs.className(["button--primary",componentHash]),styles:this.model.title_button_styles,onClick:this.hash(1)?this.hash(1):this.hash(1,event=>{this.model.confirm()})}));__v2.slot("default",()=>{const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);__v.push(this.model.title_button?this.model.title_button:"Confirm");return __v});return __v},getClassName:function(){return"Runtime.Widget.Dialog.ConfirmDialog"}},getComponentStyle:function(){return".dialog__content.h-5497 .result{margin-top: calc(var(--space) * 0.5)}"},getRequiredComponents:function(){return new Runtime.Vector("Runtime.Widget.Button")}};window["Runtime.Widget.Dialog.ConfirmDialog"]=Runtime.Widget.Dialog.ConfirmDialog;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Dialog=="undefined")Runtime.Widget.Dialog={};Runtime.Widget.Dialog.ConfirmDialogModel=class extends Runtime.Widget.Dialog.DialogModel{initWidget(params){super.initWidget(params);this.result=this.createWidget("Runtime.Widget.ResultModel")}setWaitMessage(){this.result.setWaitMessage()}setApiResult(result){this.result.setApiResult(result)}show(){super.show();this.result.clear()}confirm(){this.listener.emit(new Runtime.Widget.Dialog.DialogMessage(Runtime.Map.create({name:"confirm",action:this.action})))}_init(){super._init();this.component="Runtime.Widget.Dialog.ConfirmDialog";this.action="";this.title="";this.title_button="";this.title_button_styles=Runtime.Vector.create([]);this.content="";this.result=null}static getClassName(){return"Runtime.Widget.Dialog.ConfirmDialogModel"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Widget.Dialog.ConfirmDialogModel"]=Runtime.Widget.Dialog.ConfirmDialogModel;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Dialog=="undefined")Runtime.Widget.Dialog={};Runtime.Widget.Dialog.PromptDialog={name:"Runtime.Widget.Dialog.PromptDialog",extends:Runtime.Widget.Dialog.Dialog,methods:{renderTitle:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);if(this.slot("title")){__v.push(this.renderSlot("title"))}else{__v.push(this.model.title)}return __v},renderContent:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["dialog__content",componentHash])}));if(this.slot("content")){__v0.push(this.renderSlot("content"))}else{__v0.push(this.model.content)}__v0.element("Runtime.Widget.Input",new Runtime.Map({name:"value",value:this.model.value,onChange:this.hash(0)?this.hash(0):this.hash(0,event=>{this.model.setValue(event.target.value)})}));__v0.push(this.renderWidget(this.model.result,Runtime.Map.create({class:"result--center"})));return __v},renderFooter:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["dialog__footer",componentHash])}));let __v1=__v0.element("Runtime.Widget.Button",new Runtime.Map({onClick:this.hash(1)?this.hash(1):this.hash(1,event=>{this.model.hide()})}));__v1.slot("default",()=>{const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);__v.push("Close");return __v});let __v2=__v0.element("Runtime.Widget.Button",new Runtime.Map({class:rs.className(["button--primary",componentHash]),style:this.model.title_button_styles,onClick:this.hash(2)?this.hash(2):this.hash(2,event=>{this.model.confirm()})}));__v2.slot("default",()=>{const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);__v.push(this.model.title_button?this.model.title_button:"Confirm");return __v});return __v},getClassName:function(){return"Runtime.Widget.Dialog.PromptDialog"}},getComponentStyle:function(){return".dialog__content.h-688b .result{margin-top: calc(var(--space) * 0.5)}"},getRequiredComponents:function(){return new Runtime.Vector("Runtime.Widget.Button","Runtime.Widget.Input")}};window["Runtime.Widget.Dialog.PromptDialog"]=Runtime.Widget.Dialog.PromptDialog;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Dialog=="undefined")Runtime.Widget.Dialog={};Runtime.Widget.Dialog.PromptDialogModel=class extends Runtime.Widget.Dialog.DialogModel{initParams(params){super.initParams(params);this.result=this.createWidget("Runtime.Widget.ResultModel")}setWaitMessage(){this.result.setWaitMessage()}setApiResult(result){this.result.setApiResult(result)}setValue(value){this.value=value}show(){super.show();this.result.clear()}confirm(){this.listener.emit(new Runtime.Widget.Dialog.DialogMessage(Runtime.Map.create({name:"confirm",action:this.action,value:this.value})))}_init(){super._init();this.component="Runtime.Widget.Dialog.PromptDialog";this.action="";this.title="";this.title_button="";this.title_button_styles=Runtime.Vector.create([]);this.content="";this.value="";this.result=null}static getClassName(){return"Runtime.Widget.Dialog.PromptDialogModel"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Widget.Dialog.PromptDialogModel"]=Runtime.Widget.Dialog.PromptDialogModel;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Form=="undefined")Runtime.Widget.Form={};Runtime.Widget.Form.Form={name:"Runtime.Widget.Form.Form",extends:Runtime.Component,props:{fields:{default:Runtime.Vector.create([])}},methods:{renderTitle:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);if(this.slot("title")){__v.push(this.renderSlot("title"))}return __v},renderContent:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);if(this.slot("default")&&this.fields.count()==0){__v.push(this.renderSlot("default"))}else{for(let i=0;i<this.fields.count();i++){let field=this.fields.get(i);let props=field.get("props");let component=field.get("component");let name=field.get("name");if(!props){props=new Runtime.Map}let __v0=__v.element("Runtime.Widget.Form.FormRow",new Runtime.Map({name:name,label:field.get("label"),key:name,result:this.model.getResult(name)}));__v0.slot("default",()=>{const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);__v.element(component,new Runtime.Map({name:name,value:this.getValue(field),onValueChange:this.hash(0)?this.hash(0):this.hash(0,event=>{this.setValue(field,event.value)})}).concat(props));return __v})}__v.push(this.renderWidget(this.model.result,Runtime.Map.create({class:"result--form"})))}return __v},renderButtons:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);if(this.slot("buttons")){__v.push(this.renderSlot("buttons"))}return __v},render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("form",new Runtime.Map({class:rs.className(["form",componentHash])}));__v0.push(this.renderTitle());__v0.push(this.renderContent());__v0.push(this.renderButtons());return __v},getValue:function(field){if(field.has("value")){let value=field.get("value");return value(this.model.item)}let name=field.get("name");return this.model.item.get(name)},setValue:function(field,value){if(field.has("setValue")){let setValue=field.get("setValue");setValue(this.model.item,value)}else{let name=field.get("name");this.model.setValue(name,value)}},getClassName:function(){return"Runtime.Widget.Form.Form"}},getComponentStyle:function(){return".form.h-b6a7 textarea{min-height: 300px}.form.h-b6a7 .row_buttons{justify-content: center}"},getRequiredComponents:function(){return new Runtime.Vector("Runtime.Widget.Form.FormRow")}};window["Runtime.Widget.Form.Form"]=Runtime.Widget.Form.Form;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Form=="undefined")Runtime.Widget.Form={};Runtime.Widget.Form.FormRow={name:"Runtime.Widget.Form.FormRow",extends:Runtime.Component,props:{label:{default:""},result:{default:null}},methods:{render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["form_row",componentHash])}));let __v1=__v0.element("label");__v1.push(this.label);let __v2=__v0.element("div",new Runtime.Map({class:rs.className(["form_row__content",componentHash])}));__v2.push(this.renderSlot("default"));if(this.result){__v0.push(this.renderWidget(this.result,Runtime.Map.create({class:"result--field"})))}return __v},getClassName:function(){return"Runtime.Widget.Form.FormRow"}},getComponentStyle:function(){return".form_row.h-df7a{margin-bottom: calc(var(--space) * 2)}.form_row.h-df7a:last-child{margin-bottom: calc(var(--space) * 2)}.form_row.h-df7a label{display: block;font-weight: bold;margin-bottom: calc(var(--space) * 0.5)}"},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.Form.FormRow"]=Runtime.Widget.Form.FormRow;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Form=="undefined")Runtime.Widget.Form={};Runtime.Widget.Form.FormModel=class extends Runtime.BaseModel{static serialize(rules){super.serialize(rules);rules.addType("pk",rules.params?rules.params.get("pk_type"):null);rules.addType("item",rules.params?rules.params.get("item_type"):null);rules.addType("result",new Runtime.Serializer.ObjectType(Runtime.Map.create({class_name:"Runtime.Widget.ResultModel"})));rules.setup.add((model,rules)=>{model.pk_type=rules.params?rules.params.get("pk_type"):null;model.item_type=rules.params?rules.params.get("item_type"):null})}initParams(params){super.initParams(params)}initWidget(params){super.initWidget(params);this.result=this.createWidget("Runtime.Widget.ResultModel")}setWaitMessage(){this.result.setWaitMessage()}setApiResult(result){this.result.setApiResult(result);this.setFieldErrors(result.data.get("fields"))}setFieldErrors(field_errors){if(!field_errors)return;this.field_errors=new Runtime.Map;let keys=Runtime.rtl.list(field_errors.keys());for(let i=0;i<keys.count();i++){let field_name=keys.get(i);let messages=field_errors.get(field_name);let message=Runtime.rs.join(", ",messages);let result=new Runtime.Widget.ResultModel;result.setError(message);this.field_errors.set(field_name,result)}}getResult(name){return this.field_errors.get(name)}setValue(name,value){this.item.set(name,value)}setPrimaryKey(item){if(this.pk_type){let primary_key=this.pk_type.keys();this.pk=this.pk_type.filter(item.intersect(primary_key),Runtime.Vector.create([]))}else{this.pk=null}}setItem(item){this.item=this.item_type?this.item_type.filter(item,Runtime.Vector.create([])):item}clear(){this.pk=null;this.item=this.data_object?Runtime.rtl.newInstance(this.data_object):new Runtime.Map;this.field_errors=new Runtime.Map;this.result.clear()}_init(){super._init();this.component="Runtime.Widget.Form.Form";this.pk=null;this.item=new Runtime.Map;this.field_errors=new Runtime.Map;this.result=null;this.pk_type=null;this.item_type=null}static getClassName(){return"Runtime.Widget.Form.FormModel"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Widget.Form.FormModel"]=Runtime.Widget.Form.FormModel;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Gallery=="undefined")Runtime.Widget.Gallery={};Runtime.Widget.Gallery.Gallery={name:"Runtime.Widget.Gallery.Gallery",extends:Runtime.Component,methods:{renderItem:function(pos){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);__v.push(this.renderSlot("default",Runtime.Map.create({pos:pos,item:this.model.items.get(pos),onClick:()=>{this.onClick(pos)}})));return __v},render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["widget_gallery",this.class,componentHash])}));let __v1=__v0.element("div",new Runtime.Map({class:rs.className(["widget_gallery__items",componentHash])}));for(let i=0;i<this.model.items.count();i++){__v1.push(this.renderItem(i))}__v0.push(this.renderWidget(this.model.dialog));return __v},onClick:function(pos){this.model.dialog.select(pos);this.model.dialog.show()},getClassName:function(){return"Runtime.Widget.Gallery.Gallery"}},getComponentStyle:function(){return".widget_gallery__items.h-9a67{display: flex;align-items: center;justify-content: space-around;flex-wrap: wrap}"},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.Gallery.Gallery"]=Runtime.Widget.Gallery.Gallery;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Gallery=="undefined")Runtime.Widget.Gallery={};Runtime.Widget.Gallery.GalleryDialog={name:"Runtime.Widget.Gallery.GalleryDialog",extends:Runtime.Widget.Dialog.Dialog,methods:{renderDialogContainer:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["widget_dialog__container--photo",this.model.getImageContains()?"widget_dialog__container--photo_contain":"",componentHash]),onClick:this.onContainerClick}));let __v1=__v0.element("div",new Runtime.Map({class:rs.className(["widget_dialog__image",componentHash])}));let __v2=__v1.element("Runtime.Widget.Button",new Runtime.Map({class:rs.className(["widget_dialog__close",componentHash]),onClick:this.hash(0)?this.hash(0):this.hash(0,()=>{this.model.hide()})}));__v2.slot("default",()=>{const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);__v.push("x");return __v});__v1.element("img",new Runtime.Map({src:this.model.getCurrentImage(),unselectable:"on"}));__v0.element("div",new Runtime.Map({class:rs.className(["widget_dialog__clear",componentHash])}));__v0.element("div",new Runtime.Map({class:rs.className(["widget_dialog__arrow widget_dialog__arrow--left",componentHash]),onClick:this.hash(1)?this.hash(1):this.hash(1,()=>{this.model.prev()})}));__v0.element("div",new Runtime.Map({class:rs.className(["widget_dialog__arrow widget_dialog__arrow--right",componentHash]),onClick:this.hash(2)?this.hash(2):this.hash(2,()=>{this.model.next()})}));return __v},onContainerClick:function(e){if(e.target.classList.contains("widget_dialog__arrow")||e.target.classList.contains("widget_dialog__clear")||e.target.classList.contains("widget_dialog__close")||e.target.tagName=="IMG"){return}this.onShadowClick()},getClassName:function(){return"Runtime.Widget.Gallery.GalleryDialog"}},getComponentStyle:function(){return".widget_dialog__container--photo.h-ebbc{max-width: 1000px;background: transparent;border: 0px transparent solid;padding: 0px;margin: calc(var(--widget-space) * 5) auto;text-align: center}.widget_dialog__arrow.h-ebbc{position: fixed;top: calc(50% - 15px);cursor: pointer;opacity: 0.7}.widget_dialog__arrow.h-ebbc:before, .widget_dialog__arrow.h-ebbc:after{position: absolute;display: block;content: '';width: 0;height: 0;left: 0;top: 0}.widget_dialog__arrow.h-ebbc:hover{opacity: 0.8}.widget_dialog__arrow.h-ebbc:focus{outline: 0}.widget_dialog__arrow.h-ebbc:active{outline: 0;top: calc(50% - 14px)}.widget_dialog__arrow--left.h-ebbc{left: 10px}.widget_dialog__arrow--left.h-ebbc:before{border-top: 40px solid transparent;border-bottom: 40px solid transparent;border-right: 45px solid #3F3F3F}.widget_dialog__arrow--left.h-ebbc:after{left: 6px;top: 10px;border-top: 30px solid transparent;border-bottom: 30px solid transparent;border-right: 35px solid #FFF}.widget_dialog__arrow--right.h-ebbc{right: 70px}.widget_dialog__arrow--right.h-ebbc:before{border-top: 40px solid transparent;border-bottom: 40px solid transparent;border-left: 45px solid #3F3F3F}.widget_dialog__arrow--right.h-ebbc:after{left: 4px;top: 10px;border-top: 30px solid transparent;border-bottom: 30px solid transparent;border-left: 35px solid #FFF}.widget_dialog__image.h-ebbc{position: relative;display: inline-block}.widget_dialog__image.h-ebbc img{max-width: 100%;user-select: none}.widget_dialog__close.h-ebbc{position: absolute;display: flex;align-items: center;justify-content: center;margin: 10px;width: 42px;height: 34px;top: 0;right: 0;font-size: 20px;font-weight: bold;text-transform: uppercase;background-color: #fff;border: 1px #d9d9d9 solid;cursor: pointer;border-radius: 5px}.widget_dialog__shadow.h-ebbc{opacity: 0.5}.widget_dialog__clear.h-ebbc{clear: both}.widget_dialog__container--photo_contain.h-ebbc{text-align: center}.widget_dialog__container--photo_contain.h-ebbc .widget_dialog__image img{max-width: 100%;max-height: calc(100vh - 50px);user-select: none}"},getRequiredComponents:function(){return new Runtime.Vector("Runtime.Widget.Button")}};window["Runtime.Widget.Gallery.GalleryDialog"]=Runtime.Widget.Gallery.GalleryDialog;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Gallery=="undefined")Runtime.Widget.Gallery={};Runtime.Widget.Gallery.GalleryDialogModel=class extends Runtime.Widget.Dialog.DialogModel{getItems(){return this.parent_widget.getItems()}getItem(pos){return this.parent_widget.getItem(pos)}getImage(pos){return this.parent_widget.getBigImage(pos)}getImageContains(){return this.parent_widget.dialog_image_contains===true||this.parent_widget.dialog_image_contains=="1"||this.parent_widget.dialog_image_contains=="true"}getCurrentImage(){return this.getImage(this.current)}select(pos){let count=this.getItems().count();if(count==0){this.current=0;return}this.current=pos%count;if(this.current<0){this.current=(this.current+count)%count}}prev(){this.select(this.current-1)}next(){this.select(this.current+1)}_init(){super._init();this.component="Runtime.Widget.Gallery.GalleryDialog";this.current=0}static getClassName(){return"Runtime.Widget.Gallery.GalleryDialogModel"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Widget.Gallery.GalleryDialogModel"]=Runtime.Widget.Gallery.GalleryDialogModel;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Gallery=="undefined")Runtime.Widget.Gallery={};Runtime.Widget.Gallery.GalleryModel=class extends Runtime.BaseModel{getItems(){return this.items}getItem(pos){return this.items.get(pos)}getSmallImage(pos){return this.getItem(pos)}getBigImage(pos){return this.getItem(pos)}initParams(params){super.initParams(params);if(params==null)return;if(params.has("dialog_image_contains")){this.dialog_image_contains=params.get("dialog_image_contains")}if(params.has("items"))this.items=params.get("items")}initWidget(params){super.initWidget(params);this.dialog=this.addWidget("Runtime.Widget.Gallery.GalleryDialogModel",Runtime.Map.create({modal:false}))}_init(){super._init();this.component="Runtime.Widget.Gallery.Gallery";this.widget_name="gallery";this.dialog_image_contains=false;this.items=Runtime.Vector.create([]);this.dialog=null}static getClassName(){return"Runtime.Widget.Gallery.GalleryModel"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Widget.Gallery.GalleryModel"]=Runtime.Widget.Gallery.GalleryModel;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Seo=="undefined")Runtime.Widget.Seo={};Runtime.Widget.Seo.Seo=class extends Runtime.Web.Hooks.AppHook{static hook(params){if(params==undefined)params=null;return new Runtime.Entity.Hook("Runtime.Widget.Seo.Seo",params)}initParams(params){super.initParams(params);if(!params)return;if(params.has("class_name"))this.class_name=params.get("class_name")}register_hooks(){this.register(Runtime.Hooks.RuntimeHook.CREATE_LAYOUT,"createLayout");this.register(Runtime.Hooks.RuntimeHook.LAYOUT_HEADER,"renderHeader");this.register(Runtime.Web.Hooks.AppHook.ROUTE_BEFORE,"routeBefore")}createLayout(params){let container=params.get("container");container.layout.storage.set("seo",container.layout.createWidget("Runtime.Widget.Seo.SeoModel"))}renderHeader(params){let layout=params.get("layout");let seo=layout.get("seo");if(seo)params.get("components").push(Runtime.VirtualDom.renderModel(seo))}routeBefore(params){let container=params.get("container");if(container.route==null)return;if(container.route.data==null)return;let seo=container.layout.get("seo");let route_data=container.route.data;if(route_data.has("title"))container.layout.setPageTitle(route_data.get("title"));if(route_data.has("description"))seo.description=route_data.get("description");if(route_data.has("robots"))seo.robots=route_data.get("robots")}_init(){super._init();this.class_name="Runtime.Widget.Seo.SeoModel"}static getClassName(){return"Runtime.Widget.Seo.Seo"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Widget.Seo.Seo"]=Runtime.Widget.Seo.Seo;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Seo=="undefined")Runtime.Widget.Seo={};Runtime.Widget.Seo.SeoModel=class extends Runtime.BaseModel{static serialize(rules){super.serialize(rules);rules.addType("article_modified_time",new Runtime.Serializer.StringType);rules.addType("article_published_time",new Runtime.Serializer.StringType);rules.addType("canonical_url",new Runtime.Serializer.StringType);rules.addType("description",new Runtime.Serializer.StringType);rules.addType("favicon",new Runtime.Serializer.StringType);rules.addType("robots",new Runtime.Serializer.VectorType(new Runtime.Serializer.StringType));rules.addType("tags",new Runtime.Serializer.VectorType(new Runtime.Serializer.StringType))}initParams(params){super.initParams(params);if(params==null)return}setCanonicalUrl(canonical_url){if(this.layout.request_host){canonical_url="//"+String(this.layout.request_host)+String(canonical_url);if(this.layout.request_https)canonical_url="https:"+String(canonical_url);else canonical_url="http:"+String(canonical_url)}this.canonical_url=canonical_url}_init(){super._init();this.component="Runtime.Widget.Seo.SeoWidget";this.widget_name="seo";this.canonical_url="";this.description="";this.favicon="";this.article_published_time="";this.article_modified_time="";this.robots=Runtime.Vector.create(["follow","index"]);this.tags=null}static getClassName(){return"Runtime.Widget.Seo.SeoModel"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Widget.Seo.SeoModel"]=Runtime.Widget.Seo.SeoModel;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Seo=="undefined")Runtime.Widget.Seo={};Runtime.Widget.Seo.SeoWidget={name:"Runtime.Widget.Seo.SeoWidget",extends:Runtime.Component,methods:{render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);if(this.model.canonical_url){__v.element("link",new Runtime.Map({rel:"canonical",href:this.model.canonical_url}))}__v.element("meta",new Runtime.Map({property:"og:locale",content:this.layout.lang}));__v.element("meta",new Runtime.Map({property:"og:title",content:this.layout.title}));if(this.model.description!=""){__v.element("meta",new Runtime.Map({property:"og:description",content:this.model.description}));__v.element("meta",new Runtime.Map({name:"description",content:this.model.description}))}let site_name=this.layout.getSiteName();if(site_name){__v.element("meta",new Runtime.Map({property:"og:site_name",content:site_name}));__v.element("meta",new Runtime.Map({property:"article:publisher",content:site_name}))}if(this.model.robots){__v.element("meta",new Runtime.Map({name:"robots",content:Runtime.rs.join(",",this.model.robots)}))}if(this.model.tags!=null&&this.model.tags.count()>0){for(let i=0;i<this.model.tags.count();i++){__v.element("meta",new Runtime.Map({property:"article:tag",content:this.model.tags[i]}))}}if(this.model.article_published_time){__v.element("meta",new Runtime.Map({property:"article:published_time",content:this.model.article_published_time}))}if(this.model.article_modified_time){__v.element("meta",new Runtime.Map({property:"article:article_modified_time",content:this.model.article_modified_time}));__v.element("meta",new Runtime.Map({property:"og:article_modified_time",content:this.model.article_modified_time}))}return __v},getClassName:function(){return"Runtime.Widget.Seo.SeoWidget"}},getComponentStyle:function(){return""},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.Seo.SeoWidget"]=Runtime.Widget.Seo.SeoWidget;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Sortable=="undefined")Runtime.Widget.Sortable={};Runtime.Widget.Sortable.ItemList={name:"Runtime.Widget.Sortable.ItemList",extends:Runtime.Component,props:{show_buttons:{default:"true"},name:{default:""},value:{default:Runtime.Vector.create([])}},data:function(){return{old_value:Runtime.Vector.create([]),is_drag:false,is_transition:false,drag_elem:null,drag_item:null,drag_item_pos:-1,shadow_elem:null,drag_elem_css:null,drag_start_point:null,duration:300}},methods:{renderValue:function(pos,item){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);__v.element("Runtime.Widget.Input",new Runtime.Map({value:item,key:item,onValueChange:this.hash(0)?this.hash(0):this.hash(0,message=>{let items=this.getItems();items.set(pos,message.value);this.onValueChange()})}));return __v},renderItem:function(pos){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let item=this.getItems().get(pos);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["sortable_list__item",componentHash]),"data-pos":pos,key:item}));let __v1=__v0.element("div",new Runtime.Map({class:rs.className(["sortable_list__item_drag",componentHash]),onMousedown:this.hash(1)?this.hash(1):this.hash(1,e=>{this.onMouseDown(e,item)})}));__v1.push("@raw");__v1.push("&#9776;");let __v2=__v0.element("div",new Runtime.Map({class:rs.className(["sortable_list__item_value",componentHash])}));__v2.push(this.renderValue(pos,item));let __v3=__v0.element("div",new Runtime.Map({class:rs.className(["sortable_list__item_remove",componentHash]),onClick:this.hash(2)?this.hash(2):this.hash(2,e=>{this.removeItem(pos)})}));__v3.push("@raw");__v3.push("&#10005;");return __v},renderItems:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["sortable_list__items",componentHash])}));let items=this.getItems();if(items){let __v1=__v0.element("TransitionGroup",new Runtime.Map({name:"sortable_list"}));__v1.slot("default",()=>{const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);for(let i=0;i<items.count();i++){__v.push(this.renderItem(i))}return __v})}return __v},renderButtons:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);if(this.show_buttons=="true"){let __v0=__v.element("div",new Runtime.Map({class:rs.className(["sortable_list__buttons",componentHash])}));let __v1=__v0.element("Runtime.Widget.Button",new Runtime.Map({styles:Runtime.Vector.create(["small"]),onClick:this.hash(3)?this.hash(3):this.hash(3,event=>{this.onAddItemClick()})}));__v1.slot("default",()=>{const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);__v.push("Add");return __v})}return __v},render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["sortable_list",componentHash])}));__v0.push(this.renderItems());__v0.push(this.renderButtons());__v0.element("div",new Runtime.Map({class:rs.className(["sortable_list__shadow",componentHash]),"@ref":"shadow"}));return __v},getItems:function(){return this.value},createItem:function(){return""},copyItem:function(item){return item},createValue:function(){return Runtime.Vector.create([])},swapItems:function(a,b){if(a>b){let c=a;a=b;b=c}let items=this.getItems();let obj_a=items.get(a);let obj_b=items.get(b);items.remove(b);items.insert(b,obj_a);items.remove(a);items.insert(a,obj_b)},removeItem:function(pos){let items=this.getItems();this.old_value=this.value.slice();items.remove(pos);this.onValueChange()},getDragElementFromPoint:function(x,y){let items=document.elementsFromPoint(x,y);for(let i=0;i<items.length;i++){let elem=items[i];if(elem.parentElement==this.shadow_elem)continue;if(elem.classList.contains("sortable_list__item"))return elem}return null},getDragElement:function(elem){if(elem.classList.contains("sortable_list__item"))return elem;if(elem.parentElement.classList.contains("sortable_list__item")){return elem.parentElement}return null},createShadow:function(){if(!this.drag_elem)return;this.shadow_elem=document.createElement("div");this.shadow_elem.innerHTML=this.drag_elem.outerHTML;this.shadow_elem.classList.add("sortable_list__shadow_elem");let items=Runtime.rs.split(" ",Runtime.rs.getComponentHash(this.getClassName()));for(let i=0;i<items.count();i++)this.shadow_elem.classList.add(items.get(i));let arr=Runtime.rs.split(" ",Runtime.rs.getCssHash(this.getClassName()));arr=arr.filter(item=>{return item!=""});for(let i=0;i<arr.count();i++){this.shadow_elem.classList.add(arr.get(i))}this.shadow_elem.style.height=this.drag_elem.offsetHeight+String("px");this.shadow_elem.style.width=this.drag_elem.offsetWidth+String("px");this.getRef("shadow").appendChild(this.shadow_elem)},moveShadow:function(x,y){if(!this.shadow_elem)return;let left=x-this.drag_start_point.get("shift_x");let top=y-this.drag_start_point.get("shift_y");this.shadow_elem.style.left=left+String("px");this.shadow_elem.style.top=top+String("px")},startDrag:function(e){if(this.is_drag!=false)return false;if(this.drag_start_point==null)return false;let move_x=Runtime.rtl.abs(e.pageX-this.drag_start_point.get("x"));let move_y=Runtime.rtl.abs(e.pageY-this.drag_start_point.get("y"));if(move_x<10&&move_y<10)return false;this.is_drag=true;this.createShadow();return true},stopDrag:function(){if(!this.is_drag)return;this.is_drag=false;this.is_transition=false;this.drag_elem=null;this.drag_start_point=null;this.shadow_elem.remove();this.shadow_elem=null},moveDrag:function(e){if(!this.is_drag)return;this.moveShadow(e.pageX,e.pageY);if(this.is_transition)return;let elem=this.getDragElementFromPoint(e.pageX,e.pageY);if(!elem)return;let pos=elem.getAttribute("data-pos");if(pos==this.drag_item_pos)return;this.is_transition=true;this.old_value=this.value.slice();this.swapItems(this.drag_item_pos,pos);this.drag_item_pos=pos;window.setTimeout(()=>{this.is_transition=false},this.duration);this.onValueChange()},onValueChange:function(){this.emit(new Runtime.Widget.Messages.ValueChangeMessage(Runtime.Map.create({value:this.value,old_value:this.old_value,data:this.data})))},onAddItemClick:function(){let items=this.getItems();if(items==null){this.emit(new Runtime.Widget.Messages.ValueChangeMessage(Runtime.Map.create({value:this.createValue(),old_value:this.old_value,data:this.data})))}this.nextTick(()=>{this.old_value=this.value.slice();let items=this.getItems();items.push(this.createItem());this.onValueChange()})},onMouseDown:function(e,item){if(e.button!=0)return;if(this.is_drag)return;this.drag_elem=this.getDragElement(e.target);this.drag_item=item;this.drag_item_pos=this.drag_elem.getAttribute("data-pos");this.drag_start_point=Runtime.Map.create({x:e.pageX,y:e.pageY,shift_x:e.pageX-e.target.offsetLeft,shift_y:e.pageY-e.target.offsetTop});document.addEventListener("mouseup",this.onMouseUp);document.addEventListener("mousemove",this.onMouseMove);e.preventDefault();return false},onMouseUp:function(e){document.removeEventListener("mouseup",this.onMouseUp);document.removeEventListener("mousemove",this.onMouseMove);this.stopDrag()},onMouseMove:function(e){if(this.drag_elem==null)return;if(!this.is_drag)this.startDrag(e);if(!this.is_drag)return;this.moveDrag(e)},getClassName:function(){return"Runtime.Widget.Sortable.ItemList"}},getComponentStyle:function(){return".sortable_list.h-3bb3{position: relative}.sortable_list__item.h-3bb3{display: flex;align-items: center;justify-content: flex-start;border-width: var(--border-width);border-color: var(--color-border);border-style: solid;border-radius: 4px;margin: 5px}.sortable_list__item_drag.h-3bb3, .sortable_list__item_remove.h-3bb3{cursor: pointer;padding: 0px 5px}.sortable_list__item_value.h-3bb3{flex: 1}.sortable_list__item_value.h-3bb3 .input, .sortable_list__item_value.h-3bb3 .select{padding: 0px 10px;border-color: transparent;border-radius: 0;border-width: 0}.sortable_list__buttons.h-3bb3{text-align: center;margin-top: var(--space)}.sortable_list__shadow_elem.h-3bb3{position: absolute;opacity: 0.5;user-select: none;z-index: 9999999}.sortable_list__shadow_elem.h-3bb3 .sortable_list__item_drag{cursor: grabbing}.sortable_list__shadow_elem.h-3bb3 .sortable_list__item{margin: 0}.sortable_list-move.h-3bb3, .sortable_list-enter-active.h-3bb3, .sortable_list-leave-active.h-3bb3{transition: all 0.3s ease}.sortable_list-enter-from.h-3bb3, .sortable_list-leave-to.h-3bb3{opacity: 0}"},getRequiredComponents:function(){return new Runtime.Vector("Runtime.Widget.Button","Runtime.Widget.Input","Runtime.Widget.Select")}};window["Runtime.Widget.Sortable.ItemList"]=Runtime.Widget.Sortable.ItemList;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Sortable=="undefined")Runtime.Widget.Sortable={};Runtime.Widget.Sortable.FieldList={name:"Runtime.Widget.Sortable.FieldList",extends:Runtime.Widget.Sortable.ItemList,data:function(){return{fields:Runtime.Vector.create([])}},methods:{renderValueItem:function(field,pos,item){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["sortable_list__item_value_row",componentHash])}));let __v1=__v0.element("div",new Runtime.Map({class:rs.className(["sortable_list__item_value_label",componentHash])}));__v1.push(field.get("label"));let __v2=__v0.element("div",new Runtime.Map({class:rs.className(["sortable_list__item_value_item",componentHash])}));if(item){let field_name=field.get("name");let field_component=field.get("component");let field_props=field.get("props");if(!field_props){field_props=new Runtime.Map}__v2.element(field_component,new Runtime.Map({name:field_name,value:this.getValue(field,item),onValueChange:this.hash(0)?this.hash(0):this.hash(0,event=>{this.setValue(field,item,event)})}).concat(field_props))}return __v},renderValue:function(pos,item){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);for(let i=0;i<this.fields.count();i++){let field=this.fields.get(i);__v.push(this.renderValueItem(field,pos,item))}return __v},renderItem:function(pos){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let item=this.getItems().get(pos);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["sortable_list__item",componentHash]),"data-pos":pos,key:item}));let __v1=__v0.element("div",new Runtime.Map({class:rs.className(["sortable_list__item_element sortable_list__item_element--drag",componentHash])}));let __v2=__v1.element("div",new Runtime.Map({class:rs.className(["sortable_list__item_drag",componentHash]),onMousedown:this.hash(1)?this.hash(1):this.hash(1,e=>{this.onMouseDown(e,item)})}));__v2.push("☰");let __v3=__v0.element("div",new Runtime.Map({class:rs.className(["sortable_list__item_value",componentHash])}));__v3.push(this.renderValue(pos,item));let __v4=__v0.element("div",new Runtime.Map({class:rs.className(["sortable_list__item_element sortable_list__item_element--remove",componentHash])}));let __v5=__v4.element("div",new Runtime.Map({class:rs.className(["sortable_list__item_remove",componentHash]),onClick:this.hash(2)?this.hash(2):this.hash(2,e=>{this.removeItem(pos)})}));__v5.push("✕");return __v},createItem:function(){return new Runtime.Map},getValue:function(field,item){if(field.has("value")){let value=field.get("value");return value(item)}let field_name=field.get("name");return item.get(field_name)},setValue:function(field,item,message){if(field.has("setValue")){let setValue=field.get("setValue");setValue(item,message.value)}else{let field_name=field.get("name");item.set(field_name,message.value)}this.onValueChange()},getDragElement:function(elem){if(elem.classList.contains("sortable_list__item"))return elem;if(elem.parentElement.classList.contains("sortable_list__item")){return elem.parentElement}if(elem.parentElement.parentElement.classList.contains("sortable_list__item")){return elem.parentElement.parentElement}return null},getClassName:function(){return"Runtime.Widget.Sortable.FieldList"}},getComponentStyle:function(){return".sortable_list__item.h-a648{align-items: stretch;margin: 10px 0px}.sortable_list__item_element.h-a648{display: flex}.sortable_list__item_element--drag.h-a648{align-items: center}.sortable_list__item_element--remove.h-a648{align-items: start}.sortable_list__item_value.h-a648{padding: 5px}.sortable_list__item_value_row.h-a648{display: flex;align-items: center;margin-bottom: 1px}.sortable_list__item_value_label.h-a648{width: 80px}.sortable_list__item_value_item.h-a648{flex: 1}"},getRequiredComponents:function(){return new Runtime.Vector("Runtime.Widget.Input","Runtime.Widget.Select")}};window["Runtime.Widget.Sortable.FieldList"]=Runtime.Widget.Sortable.FieldList;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Tab=="undefined")Runtime.Widget.Tab={};Runtime.Widget.Tab.Tab={name:"Runtime.Widget.Tab.Tab",extends:Runtime.Component,props:{name:{default:""},title:{default:""},href:{default:""}},methods:{render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let model=this.getParent().model;let __v0=__v.element("div",new Runtime.Map({class:rs.className(["tabs__item",model.isActive(this.name)?"tabs__item--active":"",componentHash]),"data-tab":this.name}));if(this.canShow){__v0.push(this.renderSlot("default"))}return __v},getClassName:function(){return"Runtime.Widget.Tab.Tab"}},computed:{canShow:function(){if(this.href=="")return true;let model=this.getParent().model;if(model.isActive(this.name))return true;return false}},getComponentStyle:function(){return".tabs__item.h-8789{position: relative;display: none}.tabs__item--active.h-8789{display: block}"},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.Tab.Tab"]=Runtime.Widget.Tab.Tab;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Tab=="undefined")Runtime.Widget.Tab={};Runtime.Widget.Tab.TabMessage=class extends Runtime.Message{_init(){super._init();this.name="tab";this.key=""}static getClassName(){return"Runtime.Widget.Tab.TabMessage"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Widget.Tab.TabMessage"]=Runtime.Widget.Tab.TabMessage;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Tab=="undefined")Runtime.Widget.Tab={};Runtime.Widget.Tab.Tabs={name:"Runtime.Widget.Tab.Tabs",extends:Runtime.Component,methods:{renderHeader:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["tabs__header",componentHash])}));let items=this.items;for(let i=0;i<items.count();i++){let tab=items.get(i);let tab_name=tab.get("name");let tab_title=tab.get("title");let tab_href=tab.get("href");let is_active=this.model.isActive(tab_name);if(tab_href==null){let __v1=__v0.element("div",new Runtime.Map({class:rs.className(["tabs__header_item",is_active?"tabs__header_item--active":"",componentHash]),"data-tab":tab_name,onClick:this.hash(0)?this.hash(0):this.hash(0,event=>{this.onClick(tab_name)})}));__v1.push(tab_title)}else{let __v2=__v0.element("a",new Runtime.Map({class:rs.className(["tabs__header_item",is_active?"tabs__header_item--active":"",componentHash]),"data-tab":tab_name,href:tab_href}));__v2.push(tab_title)}}return __v},render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["tabs",this.class,componentHash])}));__v0.push(this.renderHeader());let __v1=__v0.element("div",new Runtime.Map({class:rs.className(["tabs__content",componentHash])}));__v1.push(this.renderSlot("default"));return __v},onClick:function(tab_key){this.model.setActive(tab_key);this.emit(new Runtime.Widget.Tab.TabMessage(Runtime.Map.create({key:tab_key})))},getClassName:function(){return"Runtime.Widget.Tab.Tabs"}},computed:{items:function(){let result=Runtime.Vector.create([]);let items=Runtime.Vector.create([]);let vdom=this.renderSlot("default");if(vdom instanceof Runtime.VirtualDom)items=vdom.items;else{items=Runtime.Vector.create(vdom)}for(let i=0;i<items.count();i++){let item=items.get(i);if(item instanceof Runtime.VirtualDom){result.push(Runtime.Map.create({name:item.attrs.get("name"),title:item.attrs.get("title"),href:item.attrs.get("href")}))}else{result.push(Runtime.Map.create({name:item.props.name,title:item.props.title,href:item.props.href}))}}return result}},getComponentStyle:function(){return".tabs.h-209{position: relative}.tabs__header.h-209{display: flex;position: relative;border-bottom-width: var(--border-width);border-bottom-color: var(--color-border);border-bottom-style: solid;transition: background-color var(--transition) var(--transition-type),\n\t\tborder-color var(--transition) var(--transition-type),\n\t\tcolor var(--transition) var(--transition-type)}.tabs__header_item.h-209{position: relative;padding: calc(1.5 * var(--space));border-color: transparent;border-width: var(--border-width);border-style: solid;border-bottom-width: 0px;transition: background-color var(--transition) var(--transition-type),\n\t\tborder-color var(--transition) var(--transition-type),\n\t\tcolor var(--transition) var(--transition-type);text-decoration: none;color: inherit;cursor: pointer;-webkit-user-select: none;-moz-user-select: none;-khtml-user-select: none;-ms-user-select: none;top: var(--border-width)}.tabs__header_item.h-209:hover, .tabs__header_item.h-209:visited, .tabs__header_item.h-209:visited:hover, .tabs__header_item.h-209:focus{text-decoration: none;color: inherit;box-shadow: none;outline: transparent}.tabs__header_item--active.h-209{background-color: var(--color-background);border-color: var(--color-border)}.tabs__content.h-209{margin-top: calc(2 * var(--space))}.tabs__item.h-209{position: relative;display: none}.tabs__item--active.h-209{display: block}"},getRequiredComponents:function(){return new Runtime.Vector("Runtime.Widget.Tab.Tab")}};window["Runtime.Widget.Tab.Tabs"]=Runtime.Widget.Tab.Tabs;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Tab=="undefined")Runtime.Widget.Tab={};Runtime.Widget.Tab.TabsModel=class extends Runtime.BaseModel{initParams(params){super.initParams(params);if(params==null)return;if(params.has("active"))this.active=params.get("active");if(params.has("render"))this.render=params.get("render")}isActive(name){return this.active==name}setActive(active){this.active=active}canShow(tab_key){let tab=this.items.findItem(Runtime.lib.equalAttr("key",tab_key));if(tab==null)return false;if(tab.has("href")&&tab.get("key")!=tab_key)return false;return true}_init(){super._init();this.active="";this.render=true;this.component="Runtime.Widget.Tab.Tabs"}static getClassName(){return"Runtime.Widget.Tab.TabsModel"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Widget.Tab.TabsModel"]=Runtime.Widget.Tab.TabsModel;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Table=="undefined")Runtime.Widget.Table={};Runtime.Widget.Table.Manager=class extends Runtime.BaseModel{static serialize(rules){super.serialize(rules);rules.addType("foreign_key",rules.params?rules.params.get("foreign_key"):null);rules.addType("form",new Runtime.Serializer.ObjectType(Runtime.Map.create({autocreate:true,extends:"Runtime.Widget.Form.FormModel",pk_type:rules.params?rules.params.get("pk_type"):null,item_type:rules.params?rules.params.get("item_type"):null})));rules.addType("table",new Runtime.Serializer.ObjectType(Runtime.Map.create({autocreate:true,extends:"Runtime.Widget.Table.TableModel",item_type:rules.params?rules.params.get("item_type"):null})));rules.addType("dialog",new Runtime.Serializer.ObjectType(Runtime.Map.create({extends:"Runtime.Widget.Dialog.DialogModel"})));rules.addType("loader",new Runtime.Serializer.ObjectType(Runtime.Map.create({extends:"Runtime.Widget.Table.TableLoader",foreign_key:rules.params?rules.params.get("foreign_key"):null})))}initParams(params){super.initParams(params);if(params.has("api_name"))this.api_name=params.get("api_name");if(params.has("foreign_key"))this.foreign_key=params.get("foreign_key");if(params.has("page_name"))this.page_name=params.get("page_name");if(params.has("title"))this.title=params.get("title")}initWidget(params){super.initWidget(params);if(params.has("dialog"))this.dialog=params.get("dialog");else this.dialog=this.createWidget("Runtime.Widget.Dialog.DialogModel");this.dialog.addEventListener("hide",new Runtime.Method(this,"onDialogHide"));if(params.has("form"))this.form=params.get("form");else this.form=this.createWidget("Runtime.Widget.Form.FormModel");if(params.has("table"))this.table=params.get("table");else this.table=this.createWidget("Runtime.Widget.Table.TableModel");if(params.has("loader"))this.loader=params.get("loader");else this.loader=this.createWidget("Runtime.Widget.Table.TableLoader",Runtime.Map.create({api_name:this.api_name,foreign_key:this.foreign_key,page_name:this.page_name,table:this.table}))}async loadData(container){await this.loader.loadData(container)}setForeignKey(key){this.foreign_key=key;this.loader.foreign_key=key}getDialogAction(){if(this.dialog_action=="save"){if(this.form.pk)return"edit";else return"add"}return this.dialog_action}getDialogTitle(action){if(this.title)return Runtime.rtl.apply(this.title,Runtime.Vector.create([action,this.form.item]));return""}showAddDialog(){this.dialog_action="save";this.form.clear();this.dialog.show()}showEditDialog(item){this.dialog_action="save";this.form.clear();this.form.setPrimaryKey(item);this.form.setItem(item);this.dialog.show()}showDeleteDialog(item){this.dialog_action="delete";this.form.clear();this.form.setPrimaryKey(item);this.form.setItem(item);this.dialog.show()}onDialogHide(){this.dialog_action=""}async onSave(){this.form.setWaitMessage();let result=await this.layout.sendApi(Runtime.Map.create({api_name:this.api_name,method_name:"save",data:Runtime.Map.create({pk:this.form.pk,item:this.form.item,foreign_key:this.foreign_key})}));this.form.setApiResult(result);if(result.isSuccess()){this.loader.reload();this.dialog.hide()}}async onDelete(){this.form.setWaitMessage();let result=await this.layout.sendApi(Runtime.Map.create({api_name:this.api_name,method_name:"delete",data:Runtime.Map.create({pk:this.form.pk,foreign_key:this.foreign_key})}));this.form.setApiResult(result);if(result.isSuccess()){this.loader.reload();this.dialog.hide()}}_init(){super._init();this.form=null;this.table=null;this.api_name="";this.page_name="page";this.foreign_key=null;this.dialog_action="";this.dialog=null;this.loader=null;this.title=null}static getClassName(){return"Runtime.Widget.Table.Manager"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Widget.Table.Manager"]=Runtime.Widget.Table.Manager;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Table=="undefined")Runtime.Widget.Table={};Runtime.Widget.Table.Table={name:"Runtime.Widget.Table.Table",extends:Runtime.Component,methods:{renderHeader:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);__v.push(this.renderSlot("header"));return __v},renderRow:function(item,row_number){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);__v.push(this.renderSlot("row",Runtime.Vector.create([item,row_number])));return __v},renderTable:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("table");let __v1=__v0.element("tbody");let __v2=__v1.element("tr",new Runtime.Map({class:rs.className(["table__header",componentHash])}));__v2.push(this.renderHeader());if(this.model.items){for(let i=0;i<this.model.items.count();i++){let item=this.model.items.get(i);let __v3=__v1.element("tr",new Runtime.Map({class:rs.className(["table__row",componentHash])}));__v3.push(this.renderRow(item,i))}}return __v},render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["table",componentHash])}));__v0.push(this.renderTable());return __v},getClassName:function(){return"Runtime.Widget.Table.Table"}},getComponentStyle:function(){return".table.h-6433 table{border-collapse: collapse;background-color: var(--color-background);border: 1px var(--color-border) solid}.table.h-6433 th, .table.h-6433 td{padding: var(--space);border-bottom: 1px var(--color-border) solid}.table.h-6433 th{font-weight: bold}.table__row.h-6433:nth-child(even){background-color: var(--color-surface)}.table__row.h-6433:last-child{border-bottom-width: 0px}"},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.Table.Table"]=Runtime.Widget.Table.Table;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Table=="undefined")Runtime.Widget.Table={};Runtime.Widget.Table.TableDialog={name:"Runtime.Widget.Table.TableDialog",extends:Runtime.Widget.Dialog.Dialog,props:{manager:{default:null}},methods:{renderTitle:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let action=this.manager.getDialogAction();__v.push(this.manager.getDialogTitle(action));return __v},renderContent:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["dialog__content",componentHash])}));if(this.manager.dialog_action=="save"){__v0.push(this.renderSlot("save"))}else if(this.manager.dialog_action=="delete"){let __v1=__v0.element("div",new Runtime.Map({class:rs.className(["dialog__delete_message",componentHash])}));__v1.push(this.manager.getDialogTitle("delete_message"));__v0.push(this.renderWidget(this.manager.form.result,Runtime.Map.create({class:"result--center"})))}return __v},renderFooter:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["dialog__footer",componentHash])}));let action=this.manager.getDialogAction();if(action=="add"){let __v1=__v0.element("Runtime.Widget.Button",new Runtime.Map({onClick:this.hash(0)?this.hash(0):this.hash(0,event=>{this.manager.dialog.hide()})}));__v1.slot("default",()=>{const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);__v.push("Cancel");return __v});let __v2=__v0.element("Runtime.Widget.Button",new Runtime.Map({onClick:this.hash(1)?this.hash(1):this.hash(1,event=>{this.manager.onSave()}),class:rs.className(["button--primary",componentHash])}));__v2.slot("default",()=>{const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);__v.push("Create");return __v})}else if(action=="edit"){let __v3=__v0.element("Runtime.Widget.Button",new Runtime.Map({onClick:this.hash(2)?this.hash(2):this.hash(2,event=>{this.manager.dialog.hide()})}));__v3.slot("default",()=>{const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);__v.push("Cancel");return __v});let __v4=__v0.element("Runtime.Widget.Button",new Runtime.Map({onClick:this.hash(3)?this.hash(3):this.hash(3,event=>{this.manager.onSave()}),class:rs.className(["button--primary",componentHash])}));__v4.slot("default",()=>{const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);__v.push("Save");return __v})}else if(action=="delete"){let __v5=__v0.element("Runtime.Widget.Button",new Runtime.Map({onClick:this.hash(4)?this.hash(4):this.hash(4,event=>{this.manager.dialog.hide()})}));__v5.slot("default",()=>{const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);__v.push("Cancel");return __v});let __v6=__v0.element("Runtime.Widget.Button",new Runtime.Map({onClick:this.hash(5)?this.hash(5):this.hash(5,event=>{this.manager.onDelete()}),class:rs.className(["button--danger",componentHash])}));__v6.slot("default",()=>{const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);__v.push("Delete");return __v})}return __v},getClassName:function(){return"Runtime.Widget.Table.TableDialog"}},getComponentStyle:function(){return""},getRequiredComponents:function(){return new Runtime.Vector("Runtime.Widget.Button")}};window["Runtime.Widget.Table.TableDialog"]=Runtime.Widget.Table.TableDialog;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Table=="undefined")Runtime.Widget.Table={};Runtime.Widget.Table.TableLoader=class extends Runtime.BaseModel{static serialize(rules){super.serialize(rules);rules.addType("foreign_key",rules.params?rules.params.get("foreign_key"):null);rules.addType("page",new Runtime.Serializer.IntegerType);rules.addType("limit",new Runtime.Serializer.IntegerType)}initParams(params){super.initParams(params);if(params.has("table"))this.table=params.get("table");if(params.has("foreign_key"))this.foreign_key=params.get("foreign_key");if(params.has("api_name"))this.api_name=params.get("api_name");if(params.has("method_name"))this.method_name=params.get("method_name");if(params.has("page_name"))this.page_name=params.get("page_name");if(params.has("page"))this.page=params.get("page");if(params.has("limit"))this.limit=params.get("limit")}async loadData(container){let page=container.request.query.get(this.page_name,1);this.page=page-1;return await this.reload()}async reload(){let api_result=await this.layout.sendApi(Runtime.Map.create({api_name:this.api_name,method_name:this.method_name,data:Runtime.Map.create({page:this.page,limit:this.limit,foreign_key:this.foreign_key})}));if(api_result.isSuccess()&&api_result.data.has("items")){this.table.setItems(api_result.data.get("items"))}return api_result}_init(){super._init();this.table=null;this.foreign_key=null;this.api_name="";this.method_name="search";this.page_name="page";this.page=0;this.limit=10}static getClassName(){return"Runtime.Widget.Table.TableLoader"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Widget.Table.TableLoader"]=Runtime.Widget.Table.TableLoader;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Table=="undefined")Runtime.Widget.Table={};Runtime.Widget.Table.TableModel=class extends Runtime.BaseModel{static serialize(rules){super.serialize(rules);rules.addType("items",new Runtime.Serializer.VectorType(rules.params?rules.params.get("item_type"):null));rules.setup.add((model,rules)=>{model.item_type=rules.params?rules.params.get("item_type"):null})}assignRules(rules){super.assignRules(rules);this.item_type=rules.params.get("item_type")}initParams(params){super.initParams(params)}setItems(items){let vector=new Runtime.Serializer.VectorType(this.item_type);this.items=vector.filter(items,Runtime.Vector.create([]))}_init(){super._init();this.component="Runtime.Widget.Table.Table";this.items=Runtime.Vector.create([]);this.item_type=null}static getClassName(){return"Runtime.Widget.Table.TableModel"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Widget.Table.TableModel"]=Runtime.Widget.Table.TableModel;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Table=="undefined")Runtime.Widget.Table={};Runtime.Widget.Table.TableWrap={name:"Runtime.Widget.Table.TableWrap",extends:Runtime.Component,props:{table_fields:{default:Runtime.Vector.create([])},form_fields:{default:Runtime.Vector.create([])},dialog:{default:"true"}},methods:{renderTopButtons:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);if(this.slot("top_buttons")){__v.push(this.renderSlot("top_buttons"))}return __v},renderDialog:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);if(this.dialog=="true"){let __v0=__v.element("Runtime.Widget.Table.TableDialog",new Runtime.Map({model:this.model.dialog,manager:this.model}));__v0.slot("save",()=>{const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);__v.element("Runtime.Widget.Form.Form",new Runtime.Map({fields:this.form_fields,model:this.model.form}));return __v})}return __v},renderTableValue:function(item,field,row_number){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let field_name=field.get("name");if(field_name=="row_number"){__v.push(row_number+this.row_offset+1)}else if(field.has("component")){let component=field.get("component");let props=field.get("props",new Runtime.Map);__v.element(component,new Runtime.Map({name:field_name,value:item.get(field_name)}).concat(props))}else if(field.has("model")){__v.push(this.renderWidget(field.get("model")))}else if(field.has("slot")){__v.push(this.renderSlot(field.get("slot"),Runtime.Vector.create([item,field,row_number])))}else if(field.has("value")){__v.push(Runtime.rtl.apply(field.get("value"),Runtime.Vector.create([item,field,row_number])))}else{__v.push(item.get(field_name))}return __v},render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["table_wrap",componentHash])}));__v0.push(this.renderTopButtons());let __v1=__v0.element("Runtime.Widget.Table.Table",new Runtime.Map({model:this.model.table}));__v1.slot("header",()=>{const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);for(let i=0;i<this.table_fields.count();i++){let field=this.table_fields.get(i);let __v0=__v.element("th");__v0.push(field.get("label"))}return __v});__v1.slot("row",(item,row_number)=>{const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);for(let i=0;i<this.table_fields.count();i++){let field=this.table_fields.get(i);let __v0=__v.element("td");__v0.push(this.renderTableValue(item,field,row_number))}return __v});__v0.push(this.renderDialog());return __v},getClassName:function(){return"Runtime.Widget.Table.TableWrap"}},computed:{row_offset:function(){if(!this.model.loader)return 0;return this.model.loader.page*this.model.loader.limit}},getComponentStyle:function(){return".table_wrap.h-714c > .row_buttons{margin-bottom: calc(var(--space) * 2)}"},getRequiredComponents:function(){return new Runtime.Vector("Runtime.Widget.Form.Form","Runtime.Widget.Form.FormRow","Runtime.Widget.Table.Table","Runtime.Widget.Table.TableDialog")}};window["Runtime.Widget.Table.TableWrap"]=Runtime.Widget.Table.TableWrap;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Tree=="undefined")Runtime.Widget.Tree={};Runtime.Widget.Tree.TreeItem=class extends Runtime.BaseObject{static serialize(rules){super.serialize(rules);rules.addType("key",new Runtime.Serializer.StringType);rules.addType("label",new Runtime.Serializer.StringType);rules.addType("items",new Runtime.Serializer.VectorType(new Runtime.Serializer.ObjectType(Runtime.Map.create({autocreate:true,extends:"Runtime.Widget.Tree.TreeItem"}))))}assignRules(rules){}constructor(params){if(params==undefined)params=null;super();this._assign_values(params)}canDragInside(){return true}get(path){if(path==null)return null;if(path.count()==0)return this;let pos=path.first();let new_item=this.items.get(pos);if(new_item==null)return null;return new_item.get(path.slice(1))}find(item){return item?this.items.find(Runtime.lib.equal(item)):-1}onContextMenu(model){}onClick(model){}onSelect(model){}_init(){super._init();this.key="";this.label="";this.open=false;this.items=Runtime.Vector.create([])}static getClassName(){return"Runtime.Widget.Tree.TreeItem"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return["Runtime.SerializeInterface"]}};window["Runtime.Widget.Tree.TreeItem"]=Runtime.Widget.Tree.TreeItem;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Tree=="undefined")Runtime.Widget.Tree={};Runtime.Widget.Tree.TreeMessage=class extends Runtime.Message{_init(){super._init()}static getClassName(){return"Runtime.Widget.Tree.TreeMessage"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Widget.Tree.TreeMessage"]=Runtime.Widget.Tree.TreeMessage;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Tree=="undefined")Runtime.Widget.Tree={};Runtime.Widget.Tree.TreeModel=class extends Runtime.BaseModel{static serialize(rules){super.serialize(rules);rules.addType("root",new Runtime.Serializer.ObjectType(Runtime.Map.create({autocreate:true,extends:"Runtime.Widget.Tree.TreeItem"})))}initParams(params){super.initParams(params);if(params==null)return;if(params.has("autoselect"))this.autoselect=params.get("autoselect");if(params.has("dnd"))this.dnd=params.get("dnd");if(params.has("icons"))this.icons=params.get("icons")}initWidget(params){super.initWidget(params);if(params.has("context_menu")){this.setContextMenu(params.get("context_menu"));if(params.has("context_menu_render")){this.context_menu_render=params.get("context_menu_render")}}}setContextMenu(context_menu){if(context_menu instanceof Runtime.Widget.ContextMenu.ContextMenuModel){this.context_menu_render=false;this.context_menu=context_menu}else if(context_menu instanceof Runtime.Map){this.context_menu_render=true;this.context_menu=this.createWidget("Runtime.Widget.ContextMenu.ContextMenuModel",context_menu)}}selectItem(path){let item=path?this.root.get(path):null;if(this.selected_item==item)return;this.selected_path=path;this.selected_item=item;if(this.selected_item){this.selected_item.onSelect()}}canDrag(src,dest,kind){let message=new Runtime.Widget.Tree.TreeMessage(Runtime.Map.create({name:"canDrag",src:src,dest:dest,src_item:this.root.get(src),dest_item:this.root.get(dest),kind:kind,result:true}));this.emit(message);return message.result}dragElement(src,dest,kind){if(dest.count()==0)dest=Runtime.Vector.create([this.root.items.count()-1]);if(!this.canDrag(src,dest,kind))return;let src_item=this.root.get(src);let dest_item=this.root.get(dest);if(!src_item)return;if(!dest_item)return;let src_parent_path=src.slice(0,-1);let dest_parent_path=kind!="into"?dest.slice(0,-1):dest;let src_parent_item=this.root.get(src_parent_path);let dest_parent_item=this.root.get(dest_parent_path);src_parent_item.items.removeItem(src_item);if(kind=="into")dest_parent_item.items.addItem(src_item,null,"before");else dest_parent_item.items.addItem(src_item,dest_item,kind);let new_dest_parent_path=dest_parent_path.slice();if(src.count()<=new_dest_parent_path.count()){let pos=src.count()-1;if(src.get(pos)<new_dest_parent_path.get(pos)){new_dest_parent_path.set(pos,new_dest_parent_path.get(pos)-1)}}let pos=dest_parent_item.find(src_item);let new_src_path=new_dest_parent_path.pushIm(pos);this.emit(new Runtime.Widget.Tree.TreeMessage(Runtime.Map.create({name:"dragElement",dest_item:dest_item,dest_parent_item:dest_parent_item,kind:kind,src_item:src_item,src_parent_item:src_parent_item,new_src_path:new_src_path})))}_init(){super._init();this.component="Runtime.Widget.Tree.TreeWidget";this.autoselect=true;this.dnd=false;this.icons=true;this.is_open=false;this.context_menu_render=true;this.context_menu=null;this.selected_path=null;this.selected_item=null;this.root=null}static getClassName(){return"Runtime.Widget.Tree.TreeModel"}static getMethodsList(){return null}static getMethodInfoByName(field_name){return null}static getInterfaces(){return[]}};window["Runtime.Widget.Tree.TreeModel"]=Runtime.Widget.Tree.TreeModel;"use strict;";if(typeof Runtime=="undefined")Runtime={};if(typeof Runtime.Widget=="undefined")Runtime.Widget={};if(typeof Runtime.Widget.Tree=="undefined")Runtime.Widget.Tree={};Runtime.Widget.Tree.TreeWidget={name:"Runtime.Widget.Tree.TreeWidget",extends:Runtime.Component,data:function(){return{dnd:null}},methods:{renderBox:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);if(this.dnd&&this.drag_dest_box!=null&&this.is_drag){__v.element("div",new Runtime.Map({class:rs.className(["tree_widget__box","tree_widget__box--"+String(this.drag_dest_kind),componentHash]),style:this.drag_dest_box}))}return __v},renderItemLabel:function(item,path){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("span",new Runtime.Map({class:rs.className(["tree_widget__item_label",componentHash]),onMousedown:this.hash(0)?this.hash(0):this.hash(0,event=>{this.onMouseDownItem(event,path)}),onContextmenu:this.hash(1)?this.hash(1):this.hash(1,event=>{this.onContextMenuItem(event,path)})}));__v0.push(item.label);return __v},renderItemContent:function(item,path){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);__v.push(this.renderItemLabel(item,path));return __v},renderItem:function(item,path){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["tree_widget__item",item==this.model.selected_item?"selected":"",componentHash]),"data-path":Runtime.rs.join(".",path),key:"item."+String(Runtime.rs.join(".",path))+String("-")+String(item.key),onMousemove:this.hash(2)?this.hash(2):this.hash(2,event=>{this.onMouseMoveItem(event,path)})}));__v0.push(this.renderItemContent(item,path));__v.push(this.renderItems(item,path));return __v},renderItems:function(item,path){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);if(item!=null&&item.items!=null&&item.items.count()>0){let key=path.count()>0?"item."+String(Runtime.rs.join(".",path))+String(".items"):"item";let __v0=__v.element("div",new Runtime.Map({class:rs.className(["tree_widget__items",!item.open?"hide":"",componentHash]),key:key}));for(let i=0;i<item.items.count();i++){__v0.push(this.renderItem(item.items.get(i),path.concat(Runtime.Vector.create([i]))))}}return __v},render:function(){const rs=use("Runtime.rs");const componentHash=rs.getComponentHash(this.getClassName());let __v=new Runtime.VirtualDom(this);let __v0=__v.element("div",new Runtime.Map({class:rs.className(["tree_widget",componentHash]),"@ref":"widget",onContextmenu:this.hash(3)?this.hash(3):this.hash(3,event=>{this.onContextMenuItem(event)}),onMousedown:this.hash(4)?this.hash(4):this.hash(4,event=>{this.onMouseDown(event)}),onMouseup:this.hash(5)?this.hash(5):this.hash(5,event=>{this.onMouseUp(event)}),onMousemove:this.hash(6)?this.hash(6):this.hash(6,event=>{this.onMouseMove(event)})}));__v0.push(this.renderBox());let __v1=__v0.element("div",new Runtime.Map({class:rs.className(["tree_widget__content",componentHash]),"@ref":"content"}));__v1.push(this.renderItems(this.model.root,Runtime.Vector.create([])));if(this.model.context_menu&&this.model.context_menu_render){__v.push(this.renderWidget(this.model.context_menu))}return __v},showContextMenu:function(e){let x,y;if(this.model.context_menu_render){x=e.layerX;y=e.layerY}else{x=e.clientX;y=e.clientY}this.model.context_menu.show(x,y)},onContextMenuItem:function(e,path){this.model.listener.emit(new Runtime.Widget.Tree.TreeMessage(Runtime.Map.create({name:"contextMenu",path:path,item:this.model.root.get(path),event:e})));if(this.model.autoselect){this.model.selectItem(path);this.model.listener.emit(new Runtime.Widget.Tree.TreeMessage(Runtime.Map.create({kind:"context_menu",name:"selectItem",path:path,item:this.model.selected_item})))}if(this.model.context_menu){this.showContextMenu(e)}e.preventDefault();e.stopPropagation();return false},onMouseDownItem:function(e,path){if(e.button!=0)return;if(this.model.context_menu){this.model.context_menu.hide()}if(this.model.autoselect){this.model.selectItem(path)}this.model.listener.emit(new Runtime.Widget.Tree.TreeMessage(Runtime.Map.create({kind:"click",name:"selectItem",path:path,item:this.model.root.get(path),event:e})));if(this.dnd)this.dnd.setStartDragItem(e);e.preventDefault();e.stopPropagation();return false},onMouseDown:function(e){if(this.model.context_menu){this.model.context_menu.hide()}},onMouseUp:function(e){if(this.dnd)this.dnd.stopDrag()},onMouseMoveItem:function(e,item){if(this.dnd)this.dnd.onMouseMoveItem(e,item)},onMouseMove:function(e){if(this.dnd)this.dnd.onMouseMove(e)},getClassName:function(){return"Runtime.Widget.Tree.TreeWidget"}},getComponentStyle:function(){return".tree_widget.h-fd25{position: relative;height: 100%}.tree_widget__items.h-fd25 > .tree_widget__items{padding-left: 10px}.tree_widget__items.hide.h-fd25{display: none}.tree_widget__item_label.h-fd25{display: inline-block;padding: 5px;cursor: pointer;user-select: none}.tree_widget__item.selected.h-fd25 > .tree_widget__item_label{background-color: var(--color-primary);color: var(--color-primary-text)}.tree_widget__box.h-fd25{position: absolute;border-style: solid;border-width: 0;border-color: transparent}.tree_widget__box--into.h-fd25{background-color: rgba(255, 0, 0, 0.5);pointer-events: none}.tree_widget__box--before.h-fd25, .tree_widget__box--after.h-fd25{border-top-width: 2px;border-top-color: red}"},getRequiredComponents:function(){return new Runtime.Vector}};window["Runtime.Widget.Tree.TreeWidget"]=Runtime.Widget.Tree.TreeWidget;